<!DOCTYPE html>
<html lang="en-US"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <meta charset="UTF-8">
        <title>Android Push Notifications using Google Cloud Messaging (GCM), PHP and MySQL</title>
        <link rel="profile" href="http://gmpg.org/xfn/11">
        <link href="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/css.css" rel="stylesheet" type="text/css">
        <link href="http://www.androidhive.info/wp-content/themes/omega/img/favicon.ico" rel="shortcut icon" type="image/x-icon">
        <script src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/gpt.js" type="text/javascript" async=""></script><script async="" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/cbgapi.loaded_1"></script><script async="" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/cbgapi.loaded_0"></script><script gapi_processed="true" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/plusone.js" async="" type="text/javascript"></script><script src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/all.js" id="facebook-jssdk"></script><script src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/ga.js" async="" type="text/javascript"></script><script src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/cse.js" async="" type="text/javascript"></script><script src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/jquery.js"></script>
        <script type="text/javascript" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/header.js"></script><script src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/count.js" type="text/javascript" async=""></script>
        <meta name="viewport" content="width=device-width">
<meta name="generator" content="WordPress 4.2.2">

<!-- All in One SEO Pack 2.2.6.2 by Michael Torbert of Semper Fi Web Designob_start_detected [-1,-1] -->
<meta name="description" content="Android tutorial about integrating Google Cloud Messaging in your android application using php, mysql.">

<meta name="keywords" content="android gcm,google cloud messaging,android google cloud messaging,google gcm,gcm php,gcm php mysql">

<link rel="canonical" href="http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/">
<!-- /all in one seo pack -->
<link rel="alternate" type="application/rss+xml" title="AndroidHive | Tutorials, Games, Apps, Tips » Feed" href="http://www.androidhive.info/feed/">
<link rel="alternate" type="application/rss+xml" title="AndroidHive | Tutorials, Games, Apps, Tips » Comments Feed" href="http://www.androidhive.info/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="AndroidHive | Tutorials, Games, Apps, Tips » Android Push Notifications using Google Cloud Messaging (GCM), PHP and MySQL Comments Feed" href="http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/feed/">
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/www.androidhive.info\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.2.2"}};
			!function(a,b,c){function d(a){var c=b.createElement("canvas"),d=c.getContext&&c.getContext("2d");return d&&d.fillText?(d.textBaseline="top",d.font="600 32px Arial","flag"===a?(d.fillText(String.fromCharCode(55356,56812,55356,56807),0,0),c.toDataURL().length>3e3):(d.fillText(String.fromCharCode(55357,56835),0,0),0!==d.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script type="text/javascript" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/wp-emoji-release.js"></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" id="wp-pagenavi-css" href="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/pagenavi-css.css" type="text/css" media="all">
<link rel="stylesheet" id="omega-style-css" href="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/style.css" type="text/css" media="all">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.androidhive.info/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.androidhive.info/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="Android Twitter oAuth Connect Tutorial" href="http://www.androidhive.info/2012/09/android-twitter-oauth-connect-tutorial/">
<link rel="next" title="Android Multilevel ListView Tutorial" href="http://www.androidhive.info/2012/10/android-multilevel-listview-tutorial/">
<link rel="shortlink" href="http://www.androidhive.info/?p=2171">
<script type="text/javascript">
	window._wp_rp_static_base_url = 'https://wprp.zemanta.com/static/';
	window._wp_rp_wp_ajax_url = "http://www.androidhive.info/wp-admin/admin-ajax.php";
	window._wp_rp_plugin_version = '3.5.4';
	window._wp_rp_post_id = '2171';
	window._wp_rp_num_rel_posts = '4';
	window._wp_rp_thumbnails = true;
	window._wp_rp_post_title = 'Android+Push+Notifications+using+Google+Cloud+Messaging+%28GCM%29%2C+PHP+and+MySQL';
	window._wp_rp_post_tags = ['php', 'gcm', 'google', 'intermediate', 'mysql', 'fashion', 'data', 'cloud', 'android', 'illustr', 'server', 'php', 'applic', 'code', 'mysql', 'apach', 'googl', 'batteri', 'tutori', 'servic'];
	window._wp_rp_promoted_content = true;
</script><script type="text/javascript" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/jsapi"></script><script src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/a_002" type="text/javascript"></script><script src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/a.htm" type="text/javascript"></script><link rel="stylesheet" href="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/defaulten.css" type="text/css"><link rel="stylesheet" href="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/default.css" type="text/css"><script src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/defaulten.js" type="text/javascript"></script>
<script type="text/javascript" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/loader.js" async=""></script>
<link rel="stylesheet" href="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/vertical.css">
<style type="text/css">
.related_post_title {
}
ul.related_post {
}
ul.related_post li {
}
ul.related_post li a {
}
ul.related_post li img {
}</style>
    <!--[if lt IE 9]>
    <script src="http://www.androidhive.info/wp-content/themes/omega/js/html5.js" type="text/javascript"></script>
    <![endif]-->
    
<style type="text/css" id="custom-css"></style>
<link href="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/shCore.css" type="text/css" rel="stylesheet"><link href="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/shThemeDefault.css" type="text/css" rel="stylesheet"><style type="text/css" id="syntaxhighlighteranchor"></style>
        <script type="text/javascript">
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-24602371-1']);
            _gaq.push(['_setDomainName', 'androidhive.info']);
            _gaq.push(['_trackPageview']);

            (function() {
                var ga = document.createElement('script');
                ga.type = 'text/javascript';
                ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(ga, s);
            })();
        </script>
    <style type="text/css">
.gsc-control-cse {
font-family: Arial, sans-serif;
border-color: #FFFFFF;
background-color: #FFFFFF;
}
.gsc-control-cse .gsc-table-result {
font-family: Arial, sans-serif;
}
input.gsc-input, .gsc-input-box, .gsc-input-box-hover, .gsc-input-box-focus {
border-color: #D9D9D9;
}
input.gsc-search-button, input.gsc-search-button:hover, input.gsc-search-button:focus {
border-color: #2F5BB7;
background-color: #357AE8;
background-image: none;
filter: none;
}
.gsc-tabHeader.gsc-tabhInactive {
border-color: #CCCCCC;
background-color: #FFFFFF;
}
.gsc-tabHeader.gsc-tabhActive {
border-color: #CCCCCC;
border-bottom-color: #FFFFFF;
background-color: #FFFFFF;
}
.gsc-tabsArea {
border-color: #CCCCCC;
}
.gsc-webResult.gsc-result,
.gsc-results .gsc-imageResult {
border-color: #FFFFFF;
background-color: #FFFFFF;
}
.gsc-webResult.gsc-result:hover,
.gsc-imageResult:hover {
border-color: #FFFFFF;
background-color: #FFFFFF;
}
.gs-webResult.gs-result a.gs-title:link,
.gs-webResult.gs-result a.gs-title:link b,
.gs-imageResult a.gs-title:link,
.gs-imageResult a.gs-title:link b {
color: #1155CC;
}
.gs-webResult.gs-result a.gs-title:visited,
.gs-webResult.gs-result a.gs-title:visited b,
.gs-imageResult a.gs-title:visited,
.gs-imageResult a.gs-title:visited b {
color: #000000;
}
.gs-webResult.gs-result a.gs-title:hover,
.gs-webResult.gs-result a.gs-title:hover b,
.gs-imageResult a.gs-title:hover,
.gs-imageResult a.gs-title:hover b {
color: #274E13;
}
.gs-webResult.gs-result a.gs-title:active,
.gs-webResult.gs-result a.gs-title:active b,
.gs-imageResult a.gs-title:active,
.gs-imageResult a.gs-title:active b {
color: #1155CC;
}
.gsc-cursor-page {
color: #1155CC;
}
a.gsc-trailing-more-results:link {
color: #1155CC;
}
.gs-webResult .gs-snippet,
.gs-imageResult .gs-snippet,
.gs-fileFormatType {
color: #666666;
}
.gs-webResult div.gs-visibleUrl,
.gs-imageResult div.gs-visibleUrl {
color: #6AA84F;
}
.gs-webResult div.gs-visibleUrl-short {
color: #6AA84F;
}
.gs-webResult div.gs-visibleUrl-short {
display: none;
}
.gs-webResult div.gs-visibleUrl-long {
display: block;
}
.gs-promotion div.gs-visibleUrl-short {
display: none;
}
.gs-promotion div.gs-visibleUrl-long {
display: block;
}
.gsc-cursor-box {
border-color: #FFFFFF;
}
.gsc-results .gsc-cursor-box .gsc-cursor-page {
border-color: #CCCCCC;
background-color: #FFFFFF;
color: #1155CC;
}
.gsc-results .gsc-cursor-box .gsc-cursor-current-page {
border-color: #CCCCCC;
background-color: #FFFFFF;
color: #000000;
}
.gsc-webResult.gsc-result.gsc-promotion {
border-color: #F6F6F6;
background-color: #F3F3F3;
}
.gsc-completion-title {
color: #1155CC;
}
.gsc-completion-snippet {
color: #666666;
}
.gs-promotion a.gs-title:link,
.gs-promotion a.gs-title:link *,
.gs-promotion .gs-snippet a:link {
color: #1155CC;
}
.gs-promotion a.gs-title:visited,
.gs-promotion a.gs-title:visited *,
.gs-promotion .gs-snippet a:visited {
color: #1155CC;
}
.gs-promotion a.gs-title:hover,
.gs-promotion a.gs-title:hover *,
.gs-promotion .gs-snippet a:hover {
color: #1155CC;
}
.gs-promotion a.gs-title:active,
.gs-promotion a.gs-title:active *,
.gs-promotion .gs-snippet a:active {
color: #1155CC;
}
.gs-promotion .gs-snippet,
.gs-promotion .gs-title .gs-promotion-title-right,
.gs-promotion .gs-title .gs-promotion-title-right * {
color: #333333;
}
.gs-promotion .gs-visibleUrl,
.gs-promotion .gs-visibleUrl-short {
color: #009933;
}</style><script src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/bsa.js" async="" type="text/javascript"></script><script src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/count-data.js" async=""></script><script async="async" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/s_7c32e89b651d1c540f683de3e98dc4a3.js" id="_bsap_js_7c32e89b651d1c540f683de3e98dc4a3" type="text/javascript"></script><script id="_bsap_premium_pro" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/pro.js" type="text/javascript"></script><script async="async" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/a" id="_bsaPRO_js" type="text/javascript"></script><script src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/pubads_impl_65.js" type="text/javascript" async=""></script><script src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/expansion_embed.js"></script><script src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/osd.js" type="text/javascript"></script><style type="text/css">.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}.fb_link img{border:none}
.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}.fb_reset .fb_dialog_legacy{overflow:visible}.fb_dialog_advanced{padding:10px;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px}.fb_dialog_content{background:#fff;color:#333}.fb_dialog_close_icon{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;_background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif);cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent;_background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}.fb_dialog_close_icon:active{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent;_background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}.fb_dialog_loader{background-color:#f6f7f8;border:1px solid #606060;font-size:24px;padding:20px}.fb_dialog_top_left,.fb_dialog_top_right,.fb_dialog_bottom_left,.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}.fb_dialog_top_left{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}.fb_dialog_top_right{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}.fb_dialog_bottom_left{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}.fb_dialog_bottom_right{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}.fb_dialog_vert_left,.fb_dialog_vert_right,.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}.fb_dialog_vert_left,.fb_dialog_vert_right{width:10px;height:100%}.fb_dialog_vert_left{margin-left:-10px}.fb_dialog_vert_right{right:0;margin-right:-10px}.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{width:100%;height:10px}.fb_dialog_horiz_top{margin-top:-10px}.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #3a5795;color:#fff;font-size:14px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yd/r/Cou7n-nqK52.gif) no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}body.fb_hidden{-webkit-transform:none;height:100%;margin:0;overflow:visible;position:absolute;top:-10000px;left:0;width:100%}.fb_dialog.fb_dialog_mobile.loading{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ya/r/3rhSv5V8j3o.gif) white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{max-height:590px;min-height:590px;max-width:500px;min-width:500px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .45);position:absolute;left:0;top:0;width:100%;min-height:100%;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_content .dialog_header{-webkit-box-shadow:white 0 1px 1px -1px inset;background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#738ABA), to(#2C4987));border-bottom:1px solid;border-color:#1d4088;color:#fff;font:14px Helvetica, sans-serif;font-weight:bold;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{-webkit-font-smoothing:subpixel-antialiased;height:43px;width:100%}.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#4966A6), color-stop(.5, #355492), to(#2A4887));border:1px solid #2f477a;-webkit-background-clip:padding-box;-webkit-border-radius:3px;-webkit-box-shadow:rgba(0, 0, 0, .117188) 0 1px 1px inset, rgba(255, 255, 255, .167969) 0 1px 0;display:inline-block;margin-top:3px;max-width:85px;line-height:18px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{border:none;background:none;color:#fff;font:12px Helvetica, sans-serif;font-weight:bold;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #555;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f6f7f8;border:1px solid #555;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}
.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_fluid_desktop,.fb_iframe_widget_fluid_desktop span,.fb_iframe_widget_fluid_desktop iframe{max-width:100%}.fb_iframe_widget_fluid_desktop iframe{min-width:220px;position:relative}.fb_iframe_widget_lift{z-index:1}.fb_hide_iframes iframe{position:relative;left:-10000px}.fb_iframe_widget_loader{position:relative;display:inline-block}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100%}.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}.fb_iframe_widget_loader .FB_Loader{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50%;z-index:4}</style><script src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/C6ADVKE.json" type="text/javascript" id="_fbn_projs"></script></head>

    <body data-twttr-rendered="true" style="opacity: 1;" class="wordpress ltr parent-theme y2015 m07 d07 h20 tuesday logged-out singular singular-post singular-post-2171 group-blog" dir="ltr" itemscope="itemscope" itemtype="http://schema.org/WebPage">

        
        <div class="site-container">

            <header id="header" class="site-header" role="banner" itemscope="itemscope" itemtype="http://schema.org/WPHeader"><div class="wrap"><div class="title-area"><div class="logo"><a href="http://www.androidhive.info/" onclick="_gaq.push(['_trackEvent', 'Logo', 'Click', 'Home Logo']);"><img src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/logo.png" alt="androidhive"></a></div><div class="nav"> <nav class="nav_top" role="navigation"><div class="profile"><ul id="social_icons"><li class="s" isshown="false" style="display:none"><div class="hover"></div><a href="" onclick="return false;"></a></li></ul></div><ul><li><a href="http://tips.androidhive.info/" title="Android Quick Code Hints" onclick="_gaq.push(['_trackEvent', 'Top Navigation', 'Click', 'Tips | Home Page']);">TIPS</a></li><li><a href="http://download.androidhive.info/" title="Android Cource Codes" onclick="_gaq.push(['_trackEvent', 'Top Navigation', 'Click', 'Download | Home Page']);">DOWNLOAD</a></li></ul></nav></div></div></div></header><!-- .site-header -->
            <div id="ad_top">                
                <!-- BuySellAds Zone Code -->
                <div data-serve="C67IPK7W" id="bsap_1302934" class="bsap bsap_1302934">
<style type="text/css">
div.bsap_1302934{width:100%;display:block;}div.bsap_1302934 a{width:728px;}div.bsap_1302934 a img{padding:0;}div.bsap_1302934 a em{font-style:normal;}div.bsap_1302934 a{display:block;font-size:11px;color:#888;font-family:verdana,sans-serif;margin:0;text-align:center;text-decoration:none;overflow:hidden;float:left;}
div.bsap_1302934 img{border:0;clear:right;}
div.bsap_1302934 a.adhere{color:#666;font-weight:bold;font-size:12px;border:1px solid #ccc;background:#e7e7e7;text-align:center;}
div.bsap_1302934 a.adhere:hover{border:1px solid #999;background:#ddd;color:#333;}
div.bsap_1302934 iframe{display:block;font-size:11px;color:#888;font-family:verdana,sans-serif;margin:0;text-align:center;text-decoration:none;overflow:hidden;float:left;}div.bsap_1302934 a{line-height:100%;}div.bsap_1302934 a.adhere{width:728px;height:90px;line-height:720%;}html>body div.bsap_1302934 a.adhere{width:726px;height:88px;}div.bsap_1302934 img.s{height:0;width:0;}div.bsap_1302934{line-height:9px;}div.bsap_1302934 .bsap_adhere2,div.bsap_1302934 iframe{float:left;}div.bsap_1302934 .bsap_adhere2 a{height:90px;width:20px;background:url(http:\/\/s3.buysellads.com\/ac\/ah20x90_1.gif) no-repeat 0 0;text-indent:-9999px;}
</style>
<!-- no ad -->

<div class="bsap_adhere">

<a href="http://buysellads.com/buy/detail/111048/zone/1302934?utm_source=site_111048&amp;utm_medium=website&amp;utm_campaign=imagetext&amp;utm_content=zone_1302934" class="">Advertise Here</a>

</div>


<script class="ignoreme" id="auto_1" type="text/javascript"> if (typeof(BSACallback) !== 'undefined') BSACallback(); </script></div>
                <!-- End BuySellAds Zone Code -->
            </div>
            <div class="clear"></div>

            <div class="site-inner">

                <div class="wrap">
	<main class="content" id="content" role="main" itemprop="mainContentOfPage" itemscope="itemscope" itemtype="http://schema.org/Blog">

		<article id="post-2171" class="entry post publish author-admin post-2171 format-standard has-post-thumbnail category-gcm category-google category-intermediate category-mysql category-php" itemscope="itemscope" itemtype="http://schema.org/BlogPosting" itemprop="blogPost">	

	<div class="entry-wrap">
		
		<header class="entry-header">	<h1 class="entry-title" itemprop="headline">Android Push Notifications using Google Cloud Messaging (GCM), PHP and MySQL</h1>
<div class="entry-meta">
        <a href="http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/#disqus_thread"><b>1205</b> Comments</a> . 
	<span class="entry-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">By <a href="http://www.androidhive.info/author/admin/" title="Posts by Ravi Tamada" rel="author" class="url fn n" itemprop="url"><span itemprop="name">Ravi Tamada</span></a></span> . on 
        <time class="entry-time" datetime="2012-10-14T19:36:20+00:00" itemprop="datePublished" title="Sunday, October 14, 2012, 7:36 pm">October 14, 2012</time>
	</div><!-- .entry-meta --></header><!-- .entry-header -->	
			
        <div class="entry-content" itemprop="articleBody">
            <div id="ad_inside_320_250">   
                <!-- BuySellAds Zone Code -->
                <div data-serve="CWADLKE" id="bsap_1289784" class="bsap bsap_1289784">
<style type="text/css">
div.bsap_1289784{width:100%;display:block;}div.bsap_1289784 a{width:300px;}div.bsap_1289784 a img{padding:0;}div.bsap_1289784 a em{font-style:normal;}div.bsap_1289784 a{display:block;font-size:11px;color:#888;font-family:verdana,sans-serif;margin:0;text-align:center;text-decoration:none;overflow:hidden;float:left;}
div.bsap_1289784 img{border:0;clear:right;}
div.bsap_1289784 a.adhere{color:#666;font-weight:bold;font-size:12px;border:1px solid #ccc;background:#e7e7e7;text-align:center;}
div.bsap_1289784 a.adhere:hover{border:1px solid #999;background:#ddd;color:#333;}
div.bsap_1289784 iframe{display:block;font-size:11px;color:#888;font-family:verdana,sans-serif;margin:0;text-align:center;text-decoration:none;overflow:hidden;float:left;}div.bsap_1289784 a{line-height:100%;}div.bsap_1289784 a.adhere{width:300px;height:250px;line-height:2000%;}html>body div.bsap_1289784 a.adhere{width:298px;height:248px;}div.bsap_1289784 img.s{height:0;width:0;}div.bsap_1289784{line-height:9px;}div.bsap_1289784 .bsap_adhere a{height:19px !important;width:298px !important;font-size:10px;background:#f1f1f1;border:1px solid #e1e1e1;border-top:none;border-radius: 0 0 2px 2px;line-height:16px;}.bsap_backfillframe{border:0;}
</style>
<!--INLINE--><script class="ignoreme" id="auto_2" type="text/javascript">
var googletag = googletag || {};
googletag.cmd = googletag.cmd || [];
(function() {
var gads = document.createElement('script');
gads.async = true;
gads.type = 'text/javascript';
var useSSL = 'https:' == document.location.protocol;
gads.src = (useSSL ? 'https:' : 'http:') + 
'//www.googletagservices.com/tag/js/gpt.js';
var node = document.getElementsByTagName('script')[0];
node.parentNode.insertBefore(gads, node);
})();
</script>

<script class="ignoreme" id="auto_3" type="text/javascript">
googletag.cmd.push(function() {
googletag.defineSlot('/8691100/androidhiveinfo_med_rec_Sidebar_MPU_300x250_BSAT_bsazone_1289784', [300, 250], 'div-gpt-ad-1391184922957-0').addService(googletag.pubads());
googletag.pubads().enableSingleRequest();
googletag.pubads().set("page_url", "http://androidhive.info");
googletag.enableServices();
});
</script>
<!-- androidhiveinfo_med_rec_Sidebar_MPU_300x250_BSAT_bsazone_1289784 -->
<div id="div-gpt-ad-1391184922957-0" style="width: 300px; height: 250px;">
<script class="ignoreme" id="auto_4" type="text/javascript">
googletag.cmd.push(function() { googletag.display('div-gpt-ad-1391184922957-0'); });
</script>
<div style="border: 0pt none; display: inline-block; width: 300px; height: 250px;" id="google_ads_iframe_/8691100/androidhiveinfo_med_rec_Sidebar_MPU_300x250_BSAT_bsazone_1289784_0__container__"><iframe data-is-safeframe="true" marginheight="0" marginwidth="0" scrolling="no" name="1-0-2;120396;&lt;!doctype html&gt;&lt;html&gt;&lt;head&gt;&lt;style&gt;&lt;!--
a:link { color: #000000 }a:visited { color: #000000 }a:hover { color: #000000 }a:active { color: #000000 }  --&gt;&lt;/style&gt;&lt;script&gt;&lt;!--
(function(){var c=this,e=function(a){var b=typeof a;if(&quot;object&quot;==b)if(a){if(a instanceof Array)return&quot;array&quot;;if(a instanceof Object)return b;var d=Object.prototype.toString.call(a);if(&quot;[object Window]&quot;==d)return&quot;object&quot;;if(&quot;[object Array]&quot;==d||&quot;number&quot;==typeof a.length&amp;&amp;&quot;undefined&quot;!=typeof a.splice&amp;&amp;&quot;undefined&quot;!=typeof a.propertyIsEnumerable&amp;&amp;!a.propertyIsEnumerable(&quot;splice&quot;))return&quot;array&quot;;if(&quot;[object Function]&quot;==d||&quot;undefined&quot;!=typeof a.call&amp;&amp;&quot;undefined&quot;!=typeof a.propertyIsEnumerable&amp;&amp;!a.propertyIsEnumerable(&quot;call&quot;))return&quot;function&quot;}else return&quot;null&quot;;else if(&quot;function&quot;==b&amp;&amp;&quot;undefined&quot;==typeof a.call)return&quot;object&quot;;return b};var g;a:{var h=c.navigator;if(h){var k=h.userAgent;if(k){g=k;break a}}g=&quot;&quot;}var l=function(a){return-1!=g.indexOf(a)};var m=function(){return l(&quot;Opera&quot;)||l(&quot;OPR&quot;)},n=function(){return(l(&quot;Chrome&quot;)||l(&quot;CriOS&quot;))&amp;&amp;!m()&amp;&amp;!l(&quot;Edge&quot;)};var p=m(),r=l(&quot;Trident&quot;)||l(&quot;MSIE&quot;),t=l(&quot;Edge&quot;),u=l(&quot;Gecko&quot;)&amp;&amp;!(-1!=g.toLowerCase().indexOf(&quot;webkit&quot;)&amp;&amp;!l(&quot;Edge&quot;))&amp;&amp;!(l(&quot;Trident&quot;)||l(&quot;MSIE&quot;))&amp;&amp;!l(&quot;Edge&quot;),v=-1!=g.toLowerCase().indexOf(&quot;webkit&quot;)&amp;&amp;!l(&quot;Edge&quot;),w=function(){var a=g;if(u)return/rv\:([^\);]+)(\)|;)/.exec(a);if(t)return/Edge\/([\d\.]+)/.exec(a);if(r)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(v)return/WebKit\/(\S+)/.exec(a)};(function(){if(p&amp;&amp;c.opera){var a=c.opera.version;return&quot;function&quot;==e(a)?a():a}var a=&quot;&quot;,b=w();b&amp;&amp;(a=b?b[1]:&quot;&quot;);return r&amp;&amp;(b=(b=c.document)?b.documentMode:void 0,b&gt;parseFloat(a))?String(b):a})();!l(&quot;Android&quot;)||n()||l(&quot;Firefox&quot;)||m();n();var x={};window.ss=function(a){void 0!==x[a]?x[a]++:x[a]=1;var b=document.getElementById(a),d=x[a];if(window.css)css(a,&quot;nm&quot;,d,void 0,void 0);else if(b){a=b.href;var f=a.indexOf(&quot;&amp;nm=&quot;);if(0&gt;f)d=a+&quot;&amp;nm=&quot;+d;else var f=f+4,q=a.indexOf(&quot;&amp;&quot;,f),d=0&lt;=q?a.substring(0,f)+d+a.substring(q):a.substring(0,f)+d;b.href=2E3&lt;d.length?a:d}};})();function su(id) {var a = document.getElementById(id);var b = (new Date()).getTime();if (a &amp;&amp; a.myt &amp;&amp; b) {var t = b - a.myt;if (window.css) {css(id,'clkt',t);return;}var bi = a.href.indexOf(&quot;&amp;clkt=&quot;);if (bi &gt; 0) {var c = a.href.substring(0, bi+6); var d = a.href.substring(bi+6, a.href.length);var ei = d.indexOf(&quot;&amp;&quot;);var r = '';if (ei &gt;= 0)r = d.substring(ei, d.length);a.href = c + t + r; } else {a.href += &quot;&amp;clkt=&quot; + t;}}}(function(){var d=this,g=function(a){var b=typeof a;if(&quot;object&quot;==b)if(a){if(a instanceof Array)return&quot;array&quot;;if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if(&quot;[object Window]&quot;==c)return&quot;object&quot;;if(&quot;[object Array]&quot;==c||&quot;number&quot;==typeof a.length&amp;&amp;&quot;undefined&quot;!=typeof a.splice&amp;&amp;&quot;undefined&quot;!=typeof a.propertyIsEnumerable&amp;&amp;!a.propertyIsEnumerable(&quot;splice&quot;))return&quot;array&quot;;if(&quot;[object Function]&quot;==c||&quot;undefined&quot;!=typeof a.call&amp;&amp;&quot;undefined&quot;!=typeof a.propertyIsEnumerable&amp;&amp;!a.propertyIsEnumerable(&quot;call&quot;))return&quot;function&quot;}else return&quot;null&quot;;else if(&quot;function&quot;==b&amp;&amp;&quot;undefined&quot;==typeof a.call)return&quot;object&quot;;return b};var h;a:{var k=d.navigator;if(k){var l=k.userAgent;if(l){h=l;break a}}h=&quot;&quot;}var m=function(a){return-1!=h.indexOf(a)};var n=function(){return m(&quot;Opera&quot;)||m(&quot;OPR&quot;)},p=function(){return(m(&quot;Chrome&quot;)||m(&quot;CriOS&quot;))&amp;&amp;!n()&amp;&amp;!m(&quot;Edge&quot;)};var q=n(),r=m(&quot;Trident&quot;)||m(&quot;MSIE&quot;),t=m(&quot;Edge&quot;),u=m(&quot;Gecko&quot;)&amp;&amp;!(-1!=h.toLowerCase().indexOf(&quot;webkit&quot;)&amp;&amp;!m(&quot;Edge&quot;))&amp;&amp;!(m(&quot;Trident&quot;)||m(&quot;MSIE&quot;))&amp;&amp;!m(&quot;Edge&quot;),v=-1!=h.toLowerCase().indexOf(&quot;webkit&quot;)&amp;&amp;!m(&quot;Edge&quot;),w=function(){var a=h;if(u)return/rv\:([^\);]+)(\)|;)/.exec(a);if(t)return/Edge\/([\d\.]+)/.exec(a);if(r)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(v)return/WebKit\/(\S+)/.exec(a)};(function(){if(q&amp;&amp;d.opera){var a=d.opera.version;return&quot;function&quot;==g(a)?a():a}var a=&quot;&quot;,b=w();b&amp;&amp;(a=b?b[1]:&quot;&quot;);return r&amp;&amp;(b=(b=d.document)?b.documentMode:void 0,b&gt;parseFloat(a))?String(b):a})();!m(&quot;Android&quot;)||p()||m(&quot;Firefox&quot;)||n();p();var x=function(a,b,c,e){if(window.css)css(b,c,e,void 0,void 0);else if(a){b=a.href;var f=&quot;&amp;&quot;+c+&quot;=&quot;;c=b.indexOf(f);0&gt;c?e=b+f+e:(c+=f.length,f=b.indexOf(&quot;&amp;&quot;,c),e=0&lt;=f?b.substring(0,c)+e+b.substring(f):b.substring(0,c)+e);a.href=2E3&lt;e.length?b:e}};var y=null,z=function(a){y=a};document.addEventListener&amp;&amp;document.addEventListener(&quot;mousedown&quot;,z,!0);window.xy=function(a,b,c){c=c||b;if((a=a||y)&amp;&amp;b&amp;&amp;c){var e=Math.round(a.clientY-c.offsetTop),f=b.id;x(b,f,&quot;nx&quot;,Math.round(a.clientX-c.offsetLeft));x(b,f,&quot;ny&quot;,e)}};})();(function(){var d=this,e=function(a){var b=typeof a;if(&quot;object&quot;==b)if(a){if(a instanceof Array)return&quot;array&quot;;if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if(&quot;[object Window]&quot;==c)return&quot;object&quot;;if(&quot;[object Array]&quot;==c||&quot;number&quot;==typeof a.length&amp;&amp;&quot;undefined&quot;!=typeof a.splice&amp;&amp;&quot;undefined&quot;!=typeof a.propertyIsEnumerable&amp;&amp;!a.propertyIsEnumerable(&quot;splice&quot;))return&quot;array&quot;;if(&quot;[object Function]&quot;==c||&quot;undefined&quot;!=typeof a.call&amp;&amp;&quot;undefined&quot;!=typeof a.propertyIsEnumerable&amp;&amp;!a.propertyIsEnumerable(&quot;call&quot;))return&quot;function&quot;}else return&quot;null&quot;;else if(&quot;function&quot;==b&amp;&amp;&quot;undefined&quot;==typeof a.call)return&quot;object&quot;;return b};var g;a:{var h=d.navigator;if(h){var k=h.userAgent;if(k){g=k;break a}}g=&quot;&quot;}var l=function(a){return-1!=g.indexOf(a)};var m=function(){return l(&quot;Opera&quot;)||l(&quot;OPR&quot;)},n=function(){return(l(&quot;Chrome&quot;)||l(&quot;CriOS&quot;))&amp;&amp;!m()&amp;&amp;!l(&quot;Edge&quot;)};var p=m(),r=l(&quot;Trident&quot;)||l(&quot;MSIE&quot;),t=l(&quot;Edge&quot;),u=l(&quot;Gecko&quot;)&amp;&amp;!(-1!=g.toLowerCase().indexOf(&quot;webkit&quot;)&amp;&amp;!l(&quot;Edge&quot;))&amp;&amp;!(l(&quot;Trident&quot;)||l(&quot;MSIE&quot;))&amp;&amp;!l(&quot;Edge&quot;),v=-1!=g.toLowerCase().indexOf(&quot;webkit&quot;)&amp;&amp;!l(&quot;Edge&quot;),w=function(){var a=g;if(u)return/rv\:([^\);]+)(\)|;)/.exec(a);if(t)return/Edge\/([\d\.]+)/.exec(a);if(r)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(v)return/WebKit\/(\S+)/.exec(a)};(function(){if(p&amp;&amp;d.opera){var a=d.opera.version;return&quot;function&quot;==e(a)?a():a}var a=&quot;&quot;,b=w();b&amp;&amp;(a=b?b[1]:&quot;&quot;);return r&amp;&amp;(b=(b=d.document)?b.documentMode:void 0,b&gt;parseFloat(a))?String(b):a})();!l(&quot;Android&quot;)||n()||l(&quot;Firefox&quot;)||m();n();var x=[0,2,1],y=null;document.addEventListener&amp;&amp;document.addEventListener(&quot;mousedown&quot;,function(a){y=a},!0);window.mb=function(a){if(a){var b;if(b=window.event||y){var c;(c=b.which?1&lt;&lt;x[b.which-1]:b.button)&amp;&amp;b.shiftKey&amp;&amp;(c|=8);c&amp;&amp;b.altKey&amp;&amp;(c|=16);c&amp;&amp;b.ctrlKey&amp;&amp;(c|=32);b=c}else b=null;if(b)if(c=b,window.css)css(a.id,&quot;mb&quot;,c,void 0,void 0);else if(a){b=a.href;var f=b.indexOf(&quot;&amp;mb=&quot;);if(0&gt;f)c=b+&quot;&amp;mb=&quot;+c;else{var f=f+4,q=b.indexOf(&quot;&amp;&quot;,f);c=0&lt;=q?b.substring(0,f)+c+b.substring(q):b.substring(0,f)+c}a.href=2E3&lt;c.length?b:c}}};})();(function(){var c=function(a,e,h){var b=document;b.addEventListener?b.addEventListener(a,e,h||!1):b.attachEvent&amp;&amp;b.attachEvent(&quot;on&quot;+a,e)};var d,f=!1,g=!1;c(&quot;mousedown&quot;,function(){f=!0});c(&quot;keydown&quot;,function(){g=!0});document.addEventListener&amp;&amp;c(&quot;click&quot;,function(a){d=a},!0);window.accbk=function(){var a=d?d:window.event;return a?f||g?!1:(a.preventDefault?a.preventDefault():a.returnValue=!1,!0):!1};})();function st(id) {var a = document.getElementById(id);if (a) {a.myt = (new Date()).getTime();xy(window.event, a, document.body);mb(a);}}function ha(a,x){  if (accbk()) return;su(a);}function ia(a,e,x) {if (accbk()) return;su(a);}function ja(a,x) {if (accbk()) return;su(a);}function ga(o,e,x) {if (document.getElementById) {var a=o.id.substring(1),p=&quot;&quot;,r=&quot;&quot;,g=e.target,t,f,h;if (g) {t=g.id;f=g.parentNode;if (f) {p=f.id;h=f.parentNode;if (h)r=h.id;}} else {h=e.srcElement;f=h.parentNode;if (f)p=f.id;t=h.id;}if (t==a||p==a||r==a)return true;ia(a,e,x);top.location.href=document.getElementById(a).href;}}
//--&gt;
&lt;/script&gt;&lt;/head&gt;&lt;body leftMargin=&quot;0&quot; topMargin=&quot;0&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; style=&quot;background:transparent&quot; &gt;&lt;div id=&quot;google_image_div&quot; style=&quot;height: 250px; width: 300px; overflow:hidden; position:absolute&quot;&gt;&lt;a id=&quot;aw0&quot; target=&quot;_top&quot; href=&quot;http://www.googleadservices.com/pagead/aclk?sa=L&amp;ai=CNT_6LTScVdPLOYrNbdnYvPgJhoiCsweOgPvmkAKY89fmTxABIPzf6Blgu76ug9AKoAH0x_vQA8gBAuACAKgDAcgDmQSqBJQBT9DL-qOfzGnsTUoGNnWzSQ6fARu0WFEA_t9gY4N6fEgdVcyn-8GXtKEkUmpWNcUXJiilGJaN6jbr7QmdhhZRFh9gN-YSYZX2AvrXsdICJxS_cpYIc0PL0PLd6ghGVAwtS_oOc4p-jp0erzdbbTEZC-SpHTLnLiJXai3ckAY1SSJBU1lqRUVMaBDBb85PjyNZTfCBLuAEAYgGAaAGAoAHxpSGMagHpr4b2AcB&amp;num=1&amp;cid=5Gi1ZxlOaMy8RlYskMTmGdAK&amp;sig=AOD64_1TZbWU3hVBO_blFWluMM_gqeSD4g&amp;client=ca-pub-2049948180079264&amp;adurl=http://5108.xg4ken.com/trk/v1%3Fprof%3D402%26camp%3D9184%26affcode%3Dcr431270%26kct%3Dgoogle%26kchid%3D7173004063%26cid%3D73204677502%7C371576%7C%26mType%3D%26networkType%3Dcontent%26kdv%3Dc%26criteriaid%3Dkwd-11969658093%26adgroupid%3D15386323582%26campaignid%3D243536302%26locphy%3D1006886%26adpos%3Dnone%26url%3Dhttp://partners.uber.com/signup/london/%3Futm_source%3DGDN%26utm_campaign%3Ddisplay%7Cdesktop%7Cdrivers%7Clondon%7Ccountry-184%7Ccity-18%7Cad_73204677502%7Cplacement_androidhive.info%7Ccampaign_remarketing%7Cgroup300x250%7C550_blue2&quot;&gt;&lt;img src=&quot;http://pagead2.googlesyndication.com/simgad/1447777955061775429&quot; border=&quot;0&quot; width=&quot;300&quot; class=&quot;img_ad&quot; onload=&quot;&quot; /&gt;&lt;/a&gt;&lt;style&gt;div,ul,li{margin:0;padding:0;}.abgc{height:15px;position:absolute;right:16px;text-rendering:geometricPrecision;top:0;width:15px;z-index:9010;}.abgb{height:100%;}.abgc img{display:block;}.abgc svg{display:block;}.abgs{display:none;height:100%;}.abgl{text-decoration:none;}&lt;/style&gt;&lt;div id=abgc class=abgc dir='ltr'&gt;&lt;div id=abgb class=&quot;abgb&quot;&gt;&lt;/div&gt;&lt;div id=abgs class=abgs&gt;&lt;a id=abgl class=abgl href=&quot;https://www.google.com/url?ct=abg&amp;amp;q=https://www.google.com/adsense/support/bin/request.py%3Fcontact%3Dabg_afc%26url%3Dhttp://www.androidhive.info/%26gl%3DGB%26hl%3Den%26client%3Dca-pub-2049948180079264%26ai0%3DCNT_6LTScVdPLOYrNbdnYvPgJhoiCsweOgPvmkAKY89fmTxABIPzf6Blgu76ug9AKoAH0x_vQA8gBAuACAKgDAcgDmQSqBJQBT9DL-qOfzGnsTUoGNnWzSQ6fARu0WFEA_t9gY4N6fEgdVcyn-8GXtKEkUmpWNcUXJiilGJaN6jbr7QmdhhZRFh9gN-YSYZX2AvrXsdICJxS_cpYIc0PL0PLd6ghGVAwtS_oOc4p-jp0erzdbbTEZC-SpHTLnLiJXai3ckAY1SSJBU1lqRUVMaBDBb85PjyNZTfCBLuAEAYgGAaAGAoAHxpSGMagHpr4b2AcB&amp;amp;usg=AFQjCNHBH0m05e5unaoiEdDcNpE6WKRH1Q&quot; target=_blank&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;script src=&quot;http://pagead2.googlesyndication.com/pagead/js/r20150630/r20110914/abg.js&quot;&gt;&lt;/script&gt;&lt;script&gt;var abgp={el:document.getElementById('abgc'),ael:document.getElementById('abgs'),iel:document.getElementById('abgb'),hw:15,sw:75,hh:15,sh:15,himg:'http://pagead2.googlesyndication.com'+'/pagead/images/adchoices/icon.png',simg:'http://pagead2.googlesyndication.com/pagead/images/adchoices/en.png',alt:'AdChoices',t:'AdChoices',tw:53,t2:'',t2w:0,tbo:0,att:'adchoices',ff:'',halign:'right',fe:false,fnb:false,iba:false,umd:false,uic:false,uit:false,ict:document.getElementById('cbb'),icd:undefined};window.abg &amp;&amp; new window.abg(abgp['el'],abgp['ael'],abgp['iel'],abgp['hw'],abgp['sw'],abgp['hh'],abgp['sh'],abgp['himg'],abgp['simg'],abgp['alt'],abgp['t'],abgp['tw'],abgp['t2'],abgp['t2w'],abgp['tbo'],abgp['att'],abgp['halign'],abgp['ff'],abgp['fe'],abgp['fnb'],abgp['iba'],abgp['umd'],abgp['uic'],abgp['uit'],abgp['ict'],abgp['icd']);&lt;/script&gt;&lt;style&gt;.cbc{background-image: url('http://pagead2.googlesyndication.com/pagead/images/x_button_blue2.png');background-position: right top;background-repeat: no-repeat;cursor:pointer;height:15px;right:0;top:0;margin:0;overflow:hidden;padding:0;position:absolute;width:16px;z-index:9010;}.cbc.cbc-hover {background-image: url('http://pagead2.googlesyndication.com/pagead/images/x_button_dark.png');}.cbc &gt; .cb-x{height: 15px;position:absolute;width: 16px;right:0;top:0;}.cb-x &gt; .cb-x-svg{background-color: lightgray;position:absolute;}.cbc.cbc-hover &gt; .cb-x &gt; .cb-x-svg{background-color: #58585a;}.cb-x &gt; .cb-x-svg &gt; .cb-x-svg-path{fill : #00aecd;}.cbc.cbc-hover &gt; .cb-x &gt; .cb-x-svg &gt; .cb-x-svg-path{fill : white;}.cb-x &gt; .cb-x-svg &gt; .cb-x-svg-s-path{fill : white;}&lt;/style&gt;&lt;div id=&quot;cbc&quot; class=cbc &gt;&lt;div id=&quot;cb-x&quot; class=cb-x&gt;&lt;/div&gt; &lt;/div&gt; &lt;style&gt;.ddmc{background:#ccc;color:#000;padding:0;position:absolute;z-index:9020;max-width:100%;box-shadow:2px 2px 3px #aaaaaa;}.ddmc.left{margin-right:0;left:0px;}.ddmc.right{margin-left:0;right:0px;}.ddmc.top{bottom:20px;}.ddmc.bottom{top:20px;}.ddmc .tip{border-left:4px solid transparent;border-right:4px solid transparent;height:0;position:absolute;width:0;font-size:0;line-height:0;}.ddmc.bottom .tip{border-bottom:4px solid #ccc;top:-4px;}.ddmc.top .tip{border-top:4px solid #ccc;bottom:-4px;}.ddmc.right .tip{right:3px;}.ddmc.left .tip{left:3px;}.ddmc .dropdown-content{display:block;}.dropdown-content{display:none;border-collapse:collapse;}.dropdown-item{font:12px Arial,sans-serif;cursor:pointer;padding:3px 7px;vertical-align:middle;}.dropdown-item-hover{background:#58585a;color:#fff;}.dropdown-content &gt; table{border-collapse:collapse;border-spacing:0;}.dropdown-content &gt; table &gt; tbody &gt; tr &gt; td{padding:0;}&lt;/style&gt;&lt;div id=&quot;ddmc&quot; style=&quot;display:none&quot;&gt;&lt;div class=&quot;tip&quot;&gt;&lt;/div&gt;&lt;div class=&quot;dropdown-content&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td&gt;&lt;div id=&quot;pubmute&quot; style=&quot;border-bottom:1px solid #999;&quot; class=&quot;dropdown-item&quot;&gt;&lt;span&gt;Ad covers the page&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;div id=&quot;admute&quot; class=&quot;dropdown-item&quot;&gt;&lt;span&gt;Stop seeing this ad&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/div&gt;&lt;script&gt;(function(){var k=this,l=function(a,b){var c=a.split(&quot;.&quot;),d=k;c[0]in d||!d.execScript||d.execScript(&quot;var &quot;+c[0]);for(var f;c.length&amp;&amp;(f=c.shift());)c.length||void 0===b?d=d[f]?d[f]:d[f]={}:d[f]=b},r=function(a){var b=typeof a;if(&quot;object&quot;==b)if(a){if(a instanceof Array)return&quot;array&quot;;if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if(&quot;[object Window]&quot;==c)return&quot;object&quot;;if(&quot;[object Array]&quot;==c||&quot;number&quot;==typeof a.length&amp;&amp;&quot;undefined&quot;!=typeof a.splice&amp;&amp;&quot;undefined&quot;!=typeof a.propertyIsEnumerable&amp;&amp;!a.propertyIsEnumerable(&quot;splice&quot;))return&quot;array&quot;;if(&quot;[object Function]&quot;==c||&quot;undefined&quot;!=typeof a.call&amp;&amp;&quot;undefined&quot;!=typeof a.propertyIsEnumerable&amp;&amp;!a.propertyIsEnumerable(&quot;call&quot;))return&quot;function&quot;}else return&quot;null&quot;;else if(&quot;function&quot;==b&amp;&amp;&quot;undefined&quot;==typeof a.call)return&quot;object&quot;;return b},aa=function(a,b,c){return a.call.apply(a.bind,arguments)},ba=function(a,b,c){if(!a)throw Error();if(2&lt;arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}},t=function(a,b,c){t=Function.prototype.bind&amp;&amp;-1!=Function.prototype.bind.toString().indexOf(&quot;native code&quot;)?aa:ba;return t.apply(null,arguments)};var u=&quot;undefined&quot;!=typeof DOMTokenList,v=function(a,b){if(u){var c=a.classList;0==c.contains(b)&amp;&amp;c.toggle(b)}else if(c=a.className){for(var c=c.split(/\s+/),d=!1,f=0;f&lt;c.length&amp;&amp;!d;++f)d=c[f]==b;d||(c.push(b),a.className=c.join(&quot; &quot;))}else a.className=b},w=function(a,b){if(u){var c=a.classList;1==c.contains(b)&amp;&amp;c.toggle(b)}else if((c=a.className)&amp;&amp;!(0&gt;c.indexOf(b))){for(var c=c.split(/\s+/),d=0;d&lt;c.length;++d)c[d]==b&amp;&amp;c.splice(d--,1);a.className=c.join(&quot; &quot;)}};var x=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,&quot;&quot;)},y=function(a,b){return a&lt;b?-1:a&gt;b?1:0};var ea=function(a){var b=window;b.addEventListener?b.addEventListener(&quot;load&quot;,a,!1):b.attachEvent&amp;&amp;b.attachEvent(&quot;onload&quot;,a)},z=function(a,b,c,d){c=t(d,c);a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&amp;&amp;a.attachEvent(&quot;on&quot;+b,c)};var A=function(a){var b=arguments.length;if(1==b&amp;&amp;&quot;array&quot;==r(arguments[0]))return A.apply(null,arguments[0]);for(var c={},d=0;d&lt;b;d++)c[arguments[d]]=!0;return c};A(&quot;area base br col command embed hr img input keygen link meta param source track wbr&quot;.split(&quot; &quot;));var B;a:{var C=k.navigator;if(C){var D=C.userAgent;if(D){B=D;break a}}B=&quot;&quot;};var fa=-1!=B.indexOf(&quot;Opera&quot;)||-1!=B.indexOf(&quot;OPR&quot;),E=-1!=B.indexOf(&quot;Trident&quot;)||-1!=B.indexOf(&quot;MSIE&quot;),ga=-1!=B.indexOf(&quot;Edge&quot;),F=-1!=B.indexOf(&quot;Gecko&quot;)&amp;&amp;!(-1!=B.toLowerCase().indexOf(&quot;webkit&quot;)&amp;&amp;-1==B.indexOf(&quot;Edge&quot;))&amp;&amp;!(-1!=B.indexOf(&quot;Trident&quot;)||-1!=B.indexOf(&quot;MSIE&quot;))&amp;&amp;-1==B.indexOf(&quot;Edge&quot;),ha=-1!=B.toLowerCase().indexOf(&quot;webkit&quot;)&amp;&amp;-1==B.indexOf(&quot;Edge&quot;),ia=function(){var a=B;if(F)return/rv\:([^\);]+)(\)|;)/.exec(a);if(ga)return/Edge\/([\d\.]+)/.exec(a);if(E)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(ha)return/WebKit\/(\S+)/.exec(a)},G=function(){var a=k.document;return a?a.documentMode:void 0},H=function(){if(fa&amp;&amp;k.opera){var a=k.opera.version;return&quot;function&quot;==r(a)?a():a}var a=&quot;&quot;,b=ia();b&amp;&amp;(a=b?b[1]:&quot;&quot;);return E&amp;&amp;(b=G(),b&gt;parseFloat(a))?String(b):a}(),I={},J=function(a){if(!I[a]){for(var b=0,c=x(String(H)).split(&quot;.&quot;),d=x(String(a)).split(&quot;.&quot;),f=Math.max(c.length,d.length),e=0;0==b&amp;&amp;e&lt;f;e++){var m=c[e]||&quot;&quot;,n=d[e]||&quot;&quot;,h=RegExp(&quot;(\\d*)(\\D*)&quot;,&quot;g&quot;),g=RegExp(&quot;(\\d*)(\\D*)&quot;,&quot;g&quot;);do{var p=h.exec(m)||[&quot;&quot;,&quot;&quot;,&quot;&quot;],q=g.exec(n)||[&quot;&quot;,&quot;&quot;,&quot;&quot;];if(0==p[0].length&amp;&amp;0==q[0].length)break;b=y(0==p[1].length?0:parseInt(p[1],10),0==q[1].length?0:parseInt(q[1],10))||y(0==p[2].length,0==q[2].length)||y(p[2],q[2])}while(0==b)}I[a]=0&lt;=b}},K=k.document,ka=K&amp;&amp;E?G()||(&quot;CSS1Compat&quot;==K.compatMode?parseInt(H,10):5):void 0;var L;if(!(L=!F&amp;&amp;!E)){var M;if(M=E)M=9&lt;=ka;L=M}L||F&amp;&amp;J(&quot;1.9.1&quot;);E&amp;&amp;J(&quot;9&quot;);var la=function(a,b,c){var d=&quot;mouseenter_custom&quot;==b,f=N(b);return function(e){e||(e=window.event);if(e.type==f){if(&quot;mouseenter_custom&quot;==b||&quot;mouseleave_custom&quot;==b){var m;if(m=d?e.relatedTarget||e.fromElement:e.relatedTarget||e.toElement)for(var n=0;n&lt;a.length;n++){var h;h=a[n];var g=m;if(h.contains&amp;&amp;1==g.nodeType)h=h==g||h.contains(g);else if(&quot;undefined&quot;!=typeof h.compareDocumentPosition)h=h==g||Boolean(h.compareDocumentPosition(g)&amp;16);else{for(;g&amp;&amp;h!=g;)g=g.parentNode;h=g==h}if(h)return}}c(e)}}},N=function(a){return&quot;mouseenter_custom&quot;==a?&quot;mouseover&quot;:&quot;mouseleave_custom&quot;==a?&quot;mouseout&quot;:a};var ma=function(){this.u=void 0},O=function(a,b,c){if(null==b)c.push(&quot;null&quot;);else{if(&quot;object&quot;==typeof b){if(&quot;array&quot;==r(b)){var d=b;b=d.length;c.push(&quot;[&quot;);for(var f=&quot;&quot;,e=0;e&lt;b;e++)c.push(f),f=d[e],O(a,a.u?a.u.call(d,String(e),f):f,c),f=&quot;,&quot;;c.push(&quot;]&quot;);return}if(b instanceof String||b instanceof Number||b instanceof Boolean)b=b.valueOf();else{c.push(&quot;{&quot;);e=&quot;&quot;;for(d in b)Object.prototype.hasOwnProperty.call(b,d)&amp;&amp;(f=b[d],&quot;function&quot;!=typeof f&amp;&amp;(c.push(e),P(d,c),c.push(&quot;:&quot;),O(a,a.u?a.u.call(b,d,f):f,c),e=&quot;,&quot;));c.push(&quot;}&quot;);return}}switch(typeof b){case &quot;string&quot;:P(b,c);break;case &quot;number&quot;:c.push(isFinite(b)&amp;&amp;!isNaN(b)?b:&quot;null&quot;);break;case &quot;boolean&quot;:c.push(b);break;case &quot;function&quot;:break;default:throw Error(&quot;Unknown type: &quot;+typeof b);}}},na={'&quot;':'\\&quot;',&quot;\\&quot;:&quot;\\\\&quot;,&quot;/&quot;:&quot;\\/&quot;,&quot;\b&quot;:&quot;\\b&quot;,&quot;\f&quot;:&quot;\\f&quot;,&quot;\n&quot;:&quot;\\n&quot;,&quot;\r&quot;:&quot;\\r&quot;,&quot;\t&quot;:&quot;\\t&quot;,&quot;\x0B&quot;:&quot;\\u000b&quot;},oa=/\uffff/.test(&quot;\uffff&quot;)?/[\\\&quot;\x00-\x1f\x7f-\uffff]/g:/[\\\&quot;\x00-\x1f\x7f-\xff]/g,P=function(a,b){b.push('&quot;',a.replace(oa,function(a){var b=na[a];b||(b=&quot;\\u&quot;+(a.charCodeAt(0)|65536).toString(16).substr(1),na[a]=b);return b}),'&quot;')};var Q=function(a,b,c,d,f,e,m,n,h,g,p,q){this.m=a;this.da=b;this.L=c;this.ba=d;this.B=f;this.A=e;this.ia=m;this.ga=n;this.o=null;this.J=!1;this.I=q;this.U=p;this.j=document.getElementById(&quot;pubmute&quot;+g);this.i=document.getElementById(&quot;admute&quot;+g);this.l=document.getElementById(&quot;wta&quot;+g);this.V=parseInt(g,10)||0;this.F();this.m.className=[&quot;ddmc&quot;,h&amp;1?&quot;left&quot;:&quot;right&quot;,h&amp;2?&quot;top&quot;:&quot;bottom&quot;].join(&quot; &quot;)};Q.prototype.F=function(){R(this.m,&quot;mouseenter_custom&quot;,this,this.w);R(this.m,&quot;mouseleave_custom&quot;,this,this.M);this.j&amp;&amp;(R(this.j,&quot;mouseenter_custom&quot;,this,this.$),R(this.j,&quot;mouseleave_custom&quot;,this,this.D),z(this.j,&quot;click&quot;,this,this.ca));this.i&amp;&amp;(R(this.i,&quot;mouseenter_custom&quot;,this,this.R),R(this.i,&quot;mouseleave_custom&quot;,this,this.v),z(this.i,&quot;click&quot;,this,this.aa));this.l&amp;&amp;(R(this.l,&quot;mouseenter_custom&quot;,this,this.ea),R(this.l,&quot;mouseleave_custom&quot;,this,this.G),z(this.l,&quot;click&quot;,this,this.Z))};Q.prototype.ca=function(){S(this);pa(this,0);var a=this.L;null!=a&amp;&amp;a();T(this,&quot;user_feedback_menu_option&quot;,&quot;3&quot;,!0)};Q.prototype.aa=function(){S(this);pa(this,1);var a=this.L;null!=a&amp;&amp;a();T(this,&quot;user_feedback_menu_option&quot;,&quot;1&quot;,!0)};var pa=function(a,b){var c={type:b,close_button_token:a.A,creative_conversion_url:a.B,ablation_config:a.U,undo_callback:a.ba,creative_index:a.V};if(a.I)a.I.fireOnObject(&quot;mute_option_selected&quot;,c);else{var d;a:{d=[&quot;muteSurvey&quot;];for(var f=k,e;e=d.shift();)if(null!=f[e])f=f[e];else{d=null;break a}d=f}d&amp;&amp;d.setupSurveyPage(c)}};Q.prototype.Z=function(){S(this);var a=window.open(this.ia,&quot;_blank&quot;);if(a){var b={};b.whyThisAdToken=this.ga;b.closeButtonToken=this.A;b.creativeConversionUrl=this.B;var c=[];O(new ma,b,c);a.name=c.join(&quot;&quot;)}T(this,&quot;closebutton_whythisad_click&quot;,a?&quot;1&quot;:&quot;2&quot;,!1)};var U=function(a,b){a.m.style.display=b?&quot;&quot;:&quot;none&quot;};Q.prototype.M=function(){this.o=k.setTimeout(t(function(){S(this);this.o=null},this),500)};Q.prototype.w=function(){null!=this.o&amp;&amp;(k.clearTimeout(this.o),this.o=null)};var S=function(a){var b=a.da;null!=b&amp;&amp;b();V(a)&amp;&amp;U(a,!1)};Q.prototype.$=function(){this.j&amp;&amp;v(this.j,&quot;dropdown-item-hover&quot;);this.v();this.G()};Q.prototype.D=function(){this.j&amp;&amp;w(this.j,&quot;dropdown-item-hover&quot;)};Q.prototype.R=function(){this.i&amp;&amp;v(this.i,&quot;dropdown-item-hover&quot;);this.D();this.G()};Q.prototype.v=function(){this.i&amp;&amp;w(this.i,&quot;dropdown-item-hover&quot;)};Q.prototype.ea=function(){this.l&amp;&amp;v(this.l,&quot;dropdown-item-hover&quot;);this.v();this.D()};Q.prototype.G=function(){this.l&amp;&amp;w(this.l,&quot;dropdown-item-hover&quot;)};var V=function(a){return&quot;none&quot;!==a.m.style.display};Q.prototype.toggle=function(){V(this)?V(this)&amp;&amp;U(this,!1):(U(this,!0),this.J||(this.J=!0,T(this,&quot;user_feedback_menu_interaction&quot;)))};var T=function(a,b,c,d){a=a.B+&quot;&amp;label=&quot;+b+(c?&quot;&amp;label_instance=&quot;+c:&quot;&quot;)+(d?&quot;&amp;cbt=&quot;+a.A:&quot;&quot;);b=window;b.google_image_requests||(b.google_image_requests=[]);c=b.document.createElement(&quot;img&quot;);c.src=a;b.google_image_requests.push(c)},R=function(a,b,c,d){d=la([a],b,t(d,c));z(a,N(b),c,d)};var W=function(a,b,c,d,f,e,m,n,h,g,p,q,ca,qa,da){this.creativeConversionUrl=f;this.T=e;this.ha=m;this.fa=n;this.S=document.getElementById(&quot;cb-x&quot;+ca);f=t(this.C,this);e=t(this.K,this);m=t(this.N,this);d?(g=g?1:0,p&amp;&amp;(g|=2),d=new Q(d,f,e,m,this.creativeConversionUrl,this.T,this.ha,this.fa,g,ca,qa,da)):d=null;this.h=d;this.O=document.getElementById(&quot;pbc&quot;);this.g=a;this.P=b;this.H=c;this.s=da;&quot;undefined&quot;!=typeof SVGElement&amp;&amp;&quot;undefined&quot;!=typeof document.createElementNS&amp;&amp;q&amp;&amp;(this.g.style.backgroundImage=&quot;none&quot;,this.S.appendChild(ra(h)));this.F()},X;W.prototype.F=function(){z(this.g,&quot;click&quot;,this,this.W);z(this.g,&quot;mouseover&quot;,this,this.Y);z(this.g,&quot;mouseout&quot;,this,this.X)};W.prototype.W=function(){this.h&amp;&amp;(this.h.w(),this.h.toggle())};W.prototype.Y=function(){this.h&amp;&amp;this.h.w();null!==this.g&amp;&amp;v(this.g,&quot;cbc-hover&quot;)};W.prototype.X=function(){this.h&amp;&amp;V(this.h)?this.h.M():this.C()};var ra=function(a){var b=document.createElementNS(&quot;//www.w3.org/2000/svg&quot;,&quot;svg&quot;),c=document.createElementNS(&quot;//www.w3.org/2000/svg&quot;,&quot;path&quot;),d=document.createElementNS(&quot;//www.w3.org/2000/svg&quot;,&quot;path&quot;),f=1.15/Math.sqrt(2),e=.2*a,f=&quot;M&quot;+(e+f+1)+&quot;,&quot;+e+&quot;L&quot;+(a/2+1)+&quot;,&quot;+(a/2-f)+&quot;L&quot;+(a-e-f+1)+&quot;,&quot;+e+&quot;L&quot;+(a-e+1)+&quot;,&quot;+(e+f)+&quot;L&quot;+(a/2+f+1)+&quot;,&quot;+a/2+&quot;L&quot;+(a-e+1)+&quot;,&quot;+(a-e-f)+&quot;L&quot;+(a-e-f+1)+&quot;,&quot;+(a-e)+&quot;L&quot;+(a/2+1)+&quot;,&quot;+(a/2+f)+&quot;L&quot;+(e+f+1)+&quot;,&quot;+(a-e)+&quot;L&quot;+(e+1)+&quot;,&quot;+(a-e-f)+&quot;L&quot;+(a/2-f+1)+&quot;,&quot;+a/2+&quot;L&quot;+(e+1)+&quot;,&quot;+(e+f)+&quot;Z&quot;,e=&quot;M0,0L1,0L1,&quot;+a+&quot;L0,&quot;+a+&quot;Z&quot;;b.setAttribute(&quot;class&quot;,&quot;cb-x-svg&quot;);b.setAttribute(&quot;width&quot;,a+1);b.setAttribute(&quot;height&quot;,a);b.appendChild(c);b.appendChild(d);c.setAttribute(&quot;d&quot;,f);c.setAttribute(&quot;class&quot;,&quot;cb-x-svg-path&quot;);d.setAttribute(&quot;d&quot;,e);d.setAttribute(&quot;class&quot;,&quot;cb-x-svg-s-path&quot;);return b},Y=function(a){a&amp;&amp;(a.style.display=&quot;block&quot;)},Z=function(a){a&amp;&amp;(a.style.display=&quot;none&quot;)};W.prototype.C=function(){null!==this.g&amp;&amp;w(this.g,&quot;cbc-hover&quot;)};W.prototype.K=function(){this.C();this.s?this.s.showOnly(0):(Z(this.g),Z(this.H),Z(this.O),Y(this.P))};W.prototype.N=function(){this.s?this.s.resetAll():(Y(this.g),Y(this.H),Y(this.O),Z(this.P))};l(&quot;cbb&quot;,function(a,b,c,d,f,e,m,n,h,g,p,q){ea(function(){X=new W(a,document.getElementById(&quot;cbtf&quot;),b,c,d,f,e,m,15,h,g,p,q,n,window.adSlot)})});l(&quot;cbbha&quot;,function(){X.K()});l(&quot;cbbsa&quot;,function(){X.N()});})();cbb(document.getElementById('cbc'),document.getElementById('google_image_div'),document.getElementById('ddmc'),'http://googleads.g.doubleclick.net/pagead/conversion/?ai\x3dCNT_6LTScVdPLOYrNbdnYvPgJhoiCsweOgPvmkAKY89fmTxABIPzf6Blgu76ug9AKoAH0x_vQA8gBAuACAKgDAcgDmQSqBJQBT9DL-qOfzGnsTUoGNnWzSQ6fARu0WFEA_t9gY4N6fEgdVcyn-8GXtKEkUmpWNcUXJiilGJaN6jbr7QmdhhZRFh9gN-YSYZX2AvrXsdICJxS_cpYIc0PL0PLd6ghGVAwtS_oOc4p-jp0erzdbbTEZC-SpHTLnLiJXai3ckAY1SSJBU1lqRUVMaBDBb85PjyNZTfCBLuAEAYgGAaAGAoAHxpSGMagHpr4b2AcB\x26sigh\x3d54WMuf0m69A','icEmUraEzSUIjoD75pACEK6jkHQY_pj_MCIRcGFydG5lcnMudWJlci5jb20yCAgFExjTngQUQhdjYS1wdWItMjA0OTk0ODE4MDA3OTI2NEgAWAJwAQ','https://www.google.com/ads/preferences/whythisad','','{\x22key_value\x22:[]}',false,false,false,'');&lt;/script&gt;&lt;iframe frameborder=0 height=0 width=0 src=&quot;http://googleads.g.doubleclick.net/pagead/drt/s?v=r20120211&quot; style=&quot;position:absolute&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;script&gt;&lt;/script&gt;&lt;script&gt;(function(_){var l=function(a){return function(){return aa[a].apply(this,arguments)}},aa,ga,ha;_.n=function(a,b){return aa[a]=b};var ba=function(a){return&quot;function&quot;==typeof window.encodeURIComponent?(0,window.encodeURIComponent)(a):(0,window.escape)(a)};aa=[];_.p=this;_.q=function(a){return void 0!==a};_.r=function(a,b,c){a=a.split(&quot;.&quot;);c=c||_.p;a[0]in c||!c.execScript||c.execScript(&quot;var &quot;+a[0]);for(var d;a.length&amp;&amp;(d=a.shift());)!a.length&amp;&amp;_.q(b)?c[d]=b:c=c[d]?c[d]:c[d]={}};_.ca=function(){};_.da=function(a){var b=typeof a;if(&quot;object&quot;==b)if(a){if(a instanceof Array)return&quot;array&quot;;if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if(&quot;[object Window]&quot;==c)return&quot;object&quot;;if(&quot;[object Array]&quot;==c||&quot;number&quot;==typeof a.length&amp;&amp;&quot;undefined&quot;!=typeof a.splice&amp;&amp;&quot;undefined&quot;!=typeof a.propertyIsEnumerable&amp;&amp;!a.propertyIsEnumerable(&quot;splice&quot;))return&quot;array&quot;;if(&quot;[object Function]&quot;==c||&quot;undefined&quot;!=typeof a.call&amp;&amp;&quot;undefined&quot;!=typeof a.propertyIsEnumerable&amp;&amp;!a.propertyIsEnumerable(&quot;call&quot;))return&quot;function&quot;}else return&quot;null&quot;;else if(&quot;function&quot;==b&amp;&amp;&quot;undefined&quot;==typeof a.call)return&quot;object&quot;;return b};_.u=function(a){return&quot;array&quot;==_.da(a)};_.v=function(a){return&quot;string&quot;==typeof a};_.ea=function(a){return&quot;function&quot;==_.da(a)};_.fa=function(a){var b=typeof a;return&quot;object&quot;==b&amp;&amp;null!=a||&quot;function&quot;==b};ga=function(a,b,c){return a.call.apply(a.bind,arguments)};ha=function(a,b,c){if(!a)throw Error();if(2&lt;arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}};_.w=function(a,b,c){_.w=Function.prototype.bind&amp;&amp;-1!=Function.prototype.bind.toString().indexOf(&quot;native code&quot;)?ga:ha;return _.w.apply(null,arguments)};_.x=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}};_.y=Date.now||function(){return+new Date};_.z=function(a,b){function c(){}c.prototype=b.prototype;a.yb=b.prototype;a.prototype=new c;a.hi=function(a,c,f){for(var g=Array(arguments.length-2),k=2;k&lt;arguments.length;k++)g[k-2]=arguments[k];return b.prototype[c].apply(a,g)}};_.ia=function(a){a[0]||(a[0]=[]);return a[0]};_.ka=function(a){return a[0]?a[0].length:0};var ma,oa;_.la=function(a){return&quot;true&quot;==a.toLowerCase()};ma=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,&quot;&quot;)};_.pa=function(a){var b=0,c=ma(String(na)).split(&quot;.&quot;);a=ma(String(a)).split(&quot;.&quot;);for(var d=Math.max(c.length,a.length),e=0;0==b&amp;&amp;e&lt;d;e++){var f=c[e]||&quot;&quot;,g=a[e]||&quot;&quot;,k=RegExp(&quot;(\\d*)(\\D*)&quot;,&quot;g&quot;),m=RegExp(&quot;(\\d*)(\\D*)&quot;,&quot;g&quot;);do{var t=k.exec(f)||[&quot;&quot;,&quot;&quot;,&quot;&quot;],E=m.exec(g)||[&quot;&quot;,&quot;&quot;,&quot;&quot;];if(0==t[0].length&amp;&amp;0==E[0].length)break;b=oa(0==t[1].length?0:(0,window.parseInt)(t[1],10),0==E[1].length?0:(0,window.parseInt)(E[1],10))||oa(0==t[2].length,0==E[2].length)||oa(t[2],E[2])}while(0==b)}return b};oa=function(a,b){return a&lt;b?-1:a&gt;b?1:0};var qa,ra,ta,ua,wa,Aa,Ca,Da,Ea,Fa,Ga;_.A=function(a){this.g=a||[]};qa=function(a){this.g=a||[]};ra=function(a){this.g=a||[]};_.sa=function(a){this.g=a||[]};ta=function(a){this.g=a||[]};ua=function(a){this.g=a||[]};wa=function(a){this.g=a||[]};_.xa=function(a){this.g=a||[]};_.A.prototype.Y=function(){return this.g};_.A.prototype.ta=function(){var a=this.g[1];return null!=a?a:0};_.A.prototype.sa=function(){var a=this.g[2];return null!=a?a:0};var ya=function(a){a=a.g[3];return null!=a?a:!1};_.h=_.A.prototype;_.h.getEscapedQemQueryId=function(){var a=this.g[6];return null!=a?a:&quot;&quot;};_.h.getEscapedGwsQueryId=function(){var a=this.g[7];return null!=a?a:&quot;&quot;};_.h.getWebProperty=function(){var a=this.g[9];return null!=a?a:&quot;&quot;};_.h.Xb=l(1);_.h.Ub=l(3);var za=function(a){a=a.g[12];return null!=a?a:!1};_.A.prototype.Wb=l(5);_.A.prototype.Vb=l(7);_.A.prototype.kb=l(9);Aa=new ra;_.Ba=function(a){return(a=a.g[5])?new ra(a):Aa};Ca=new ua;Da=function(a){return(a=a.g[8])?new ua(a):Ca};Ea=new wa;Fa=new qa;Ga=function(a){return(a=a.g[23])?new qa(a):Fa};_.Ha=new _.xa;_.A.prototype.Tb=l(11);var Ia=function(a,b){return new _.sa(_.ia(a.g)[b])};qa.prototype.Y=function(){return this.g};ra.prototype.Y=function(){return this.g};_.Ja=function(a){a=a.g[0];return null!=a?a:!1};_.Ka=function(a){a=a.g[1];return null!=a?a:!1};_.La=function(a){a=a.g[2];return null!=a?a:!1};_.Ma=function(a){a=a.g[3];return null!=a?a:0};_.sa.prototype.Y=function(){return this.g};_.sa.prototype.getIndex=function(){var a=this.g[1];return null!=a?a:0};_.sa.prototype.ta=function(){var a=this.g[2];return null!=a?a:0};_.sa.prototype.sa=function(){var a=this.g[3];return null!=a?a:0};var Na=function(a){a=a.g[4];return null!=a?a:&quot;&quot;};_.sa.prototype.Jc=function(){var a=this.g[7];return null!=a?a:&quot;&quot;};var Oa=new ta,Pa=function(a){return(a=a.g[9])?new ta(a):Oa};ta.prototype.Y=function(){return this.g};ta.prototype.Jc=function(){var a=this.g[0];return null!=a?a:&quot;&quot;};var Qa=function(a){a=a.g[2];return null!=a?a:&quot;&quot;};ua.prototype.Y=function(){return this.g};wa.prototype.Y=function(){return this.g};_.xa.prototype.Y=function(){return this.g};var B,Ra,Ua,Wa,Ya;B=Array.prototype;Ra=B.indexOf?function(a,b,c){return B.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0&gt;c?Math.max(0,a.length+c):c;if(_.v(a))return _.v(b)&amp;&amp;1==b.length?a.indexOf(b,c):-1;for(;c&lt;a.length;c++)if(c in a&amp;&amp;a[c]===b)return c;return-1};_.Sa=B.forEach?function(a,b,c){B.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=_.v(a)?a.split(&quot;&quot;):a,f=0;f&lt;d;f++)f in e&amp;&amp;b.call(c,e[f],f,a)};_.Ta=B.filter?function(a,b,c){return B.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g=_.v(a)?a.split(&quot;&quot;):a,k=0;k&lt;d;k++)if(k in g){var m=g[k];b.call(c,m,k,a)&amp;&amp;(e[f++]=m)}return e};Ua=B.every?function(a,b,c){return B.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=_.v(a)?a.split(&quot;&quot;):a,f=0;f&lt;d;f++)if(f in e&amp;&amp;!b.call(c,e[f],f,a))return!1;return!0};_.Va=function(a,b){var c=Ra(a,b),d;(d=0&lt;=c)&amp;&amp;B.splice.call(a,c,1);return d};Wa=function(a){return B.concat.apply(B,arguments)};_.Xa=function(a){var b=a.length;if(0&lt;b){for(var c=Array(b),d=0;d&lt;b;d++)c[d]=a[d];return c}return[]};Ya=function(a,b){return a&gt;b?1:a&lt;b?-1:0};var Za=function(a){Za[&quot; &quot;](a);return a};Za[&quot; &quot;]=_.ca;var ab,cb;_.$a=function(a,b,c){for(var d in a)b.call(c,a[d],d,a)};ab=&quot;constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf&quot;.split(&quot; &quot;);_.bb=function(a,b){for(var c,d,e=1;e&lt;arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f&lt;ab.length;f++)c=ab[f],Object.prototype.hasOwnProperty.call(d,c)&amp;&amp;(a[c]=d[c])}};cb=function(a){var b=arguments.length;if(1==b&amp;&amp;_.u(arguments[0]))return cb.apply(null,arguments[0]);for(var c={},d=0;d&lt;b;d++)c[arguments[d]]=!0;return c};var db;a:{var eb=_.p.navigator;if(eb){var fb=eb.userAgent;if(fb){db=fb;break a}}db=&quot;&quot;}var C=function(a){return-1!=db.indexOf(a)};var gb=function(){return C(&quot;Opera&quot;)||C(&quot;OPR&quot;)},ib=function(){return(C(&quot;Chrome&quot;)||C(&quot;CriOS&quot;))&amp;&amp;!gb()&amp;&amp;!C(&quot;Edge&quot;)};var kb,ob,pb,qb,na,rb,sb,tb;_.jb=gb();_.D=C(&quot;Trident&quot;)||C(&quot;MSIE&quot;);kb=C(&quot;Edge&quot;);_.lb=C(&quot;Gecko&quot;)&amp;&amp;!(-1!=db.toLowerCase().indexOf(&quot;webkit&quot;)&amp;&amp;!C(&quot;Edge&quot;))&amp;&amp;!(C(&quot;Trident&quot;)||C(&quot;MSIE&quot;))&amp;&amp;!C(&quot;Edge&quot;);_.nb=-1!=db.toLowerCase().indexOf(&quot;webkit&quot;)&amp;&amp;!C(&quot;Edge&quot;);ob=C(&quot;Android&quot;);pb=function(){var a=db;if(_.lb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(kb)return/Edge\/([\d\.]+)/.exec(a);if(_.D)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(_.nb)return/WebKit\/(\S+)/.exec(a)};qb=function(){var a=_.p.document;return a?a.documentMode:void 0};na=function(){if(_.jb&amp;&amp;_.p.opera){var a=_.p.opera.version;return _.ea(a)?a():a}var a=&quot;&quot;,b=pb();b&amp;&amp;(a=b?b[1]:&quot;&quot;);return _.D&amp;&amp;(b=qb(),b&gt;(0,window.parseFloat)(a))?String(b):a}();rb={};_.F=function(a){return rb[a]||(rb[a]=0&lt;=_.pa(a))};sb=_.p.document;tb=sb&amp;&amp;_.D?qb()||(&quot;CSS1Compat&quot;==sb.compatMode?(0,window.parseInt)(na,10):5):void 0;var ub=!_.D||9&lt;=tb,vb=_.D&amp;&amp;!_.F(&quot;9&quot;);!_.nb||_.F(&quot;528&quot;);_.lb&amp;&amp;_.F(&quot;1.9b&quot;)||_.D&amp;&amp;_.F(&quot;8&quot;)||_.jb&amp;&amp;_.F(&quot;9.5&quot;)||_.nb&amp;&amp;_.F(&quot;528&quot;);_.lb&amp;&amp;!_.F(&quot;8&quot;)||_.D&amp;&amp;_.F(&quot;9&quot;);_.G=function(){this.Pb=this.Pb;this.Xa=this.Xa};_.G.prototype.Pb=!1;_.G.prototype.Md=l(12);_.G.prototype.R=l(14);_.H=function(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.Za=!1;this.Nf=!0};_.H.prototype.stopPropagation=l(16);_.H.prototype.preventDefault=function(){this.defaultPrevented=!0;this.Nf=!1};_.wb=function(a,b){_.H.call(this,a?a.type:&quot;&quot;);this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.Sb=this.state=null;if(a){var c=this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(_.lb){var e;a:{try{Za(d.nodeName);e=!0;break a}catch(f){}e=!1}e||(d=null)}}else&quot;mouseover&quot;==c?d=a.fromElement:&quot;mouseout&quot;==c&amp;&amp;(d=a.toElement);this.relatedTarget=d;this.offsetX=_.nb||void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=_.nb||void 0!==a.offsetY?a.offsetY:a.layerY;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;this.screenX=a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(&quot;keypress&quot;==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.Sb=a;a.defaultPrevented&amp;&amp;this.preventDefault()}};_.z(_.wb,_.H);_.wb.prototype.stopPropagation=l(15);_.wb.prototype.preventDefault=function(){_.wb.yb.preventDefault.call(this);var a=this.Sb;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,vb)try{if(a.ctrlKey||112&lt;=a.keyCode&amp;&amp;123&gt;=a.keyCode)a.keyCode=-1}catch(b){}};var xb,zb;xb=&quot;closure_listenable_&quot;+(1E6*Math.random()|0);_.yb=function(a){return!(!a||!a[xb])};zb=0;var Ab;Ab=function(a,b,c,d,e){this.listener=a;this.ed=null;this.src=b;this.type=c;this.Dc=!!d;this.Oc=e;this.key=++zb;this.ub=this.Bc=!1};_.Bb=function(a){a.ub=!0;a.listener=null;a.ed=null;a.src=null;a.Oc=null};_.Cb=function(a){this.src=a;this.F={};this.qc=0};_.Cb.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.F[f];a||(a=this.F[f]=[],this.qc++);var g=Db(a,b,d,e);-1&lt;g?(b=a[g],c||(b.Bc=!1)):(b=new Ab(b,this.src,f,!!d,e),b.Bc=c,a.push(b));return b};_.Cb.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.F))return!1;var e=this.F[a];b=Db(e,b,c,d);return-1&lt;b?(_.Bb(e[b]),B.splice.call(e,b,1),0==e.length&amp;&amp;(delete this.F[a],this.qc--),!0):!1};var Eb=function(a,b){var c=b.type;c in a.F&amp;&amp;_.Va(a.F[c],b)&amp;&amp;(_.Bb(b),0==a.F[c].length&amp;&amp;(delete a.F[c],a.qc--))};_.Cb.prototype.hd=l(17);_.Cb.prototype.Yb=function(a,b,c,d){a=this.F[a.toString()];var e=-1;a&amp;&amp;(e=Db(a,b,c,d));return-1&lt;e?a[e]:null};var Db=function(a,b,c,d){for(var e=0;e&lt;a.length;++e){var f=a[e];if(!f.ub&amp;&amp;f.listener==b&amp;&amp;f.Dc==!!c&amp;&amp;f.Oc==d)return e}return-1};var Fb,Gb,Hb,Mb,Pb,Nb,Sb,Rb,Ob,Tb;Fb=&quot;closure_lm_&quot;+(1E6*Math.random()|0);Gb={};Hb=0;_.Ib=function(a,b,c,d,e){if(_.u(b)){for(var f=0;f&lt;b.length;f++)_.Ib(a,b[f],c,d,e);return null}c=_.Jb(c);return _.yb(a)?a.listen(b,c,d,e):_.Kb(a,b,c,!1,d,e)};_.Kb=function(a,b,c,d,e,f){if(!b)throw Error(&quot;Invalid event type&quot;);var g=!!e,k=_.Lb(a);k||(a[Fb]=k=new _.Cb(a));c=k.add(b,c,d,e,f);if(c.ed)return c;d=Mb();c.ed=d;d.src=a;d.listener=c;if(a.addEventListener)a.addEventListener(b.toString(),d,g);else if(a.attachEvent)a.attachEvent(Nb(b.toString()),d);else throw Error(&quot;addEventListener and attachEvent are unavailable.&quot;);Hb++;return c};Mb=function(){var a=Ob,b=ub?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b};Pb=function(a,b,c,d,e){if(_.u(b))for(var f=0;f&lt;b.length;f++)Pb(a,b[f],c,d,e);else c=_.Jb(c),_.yb(a)?a.unlisten(b,c,d,e):a&amp;&amp;(a=_.Lb(a))&amp;&amp;(b=a.Yb(b,c,!!d,e))&amp;&amp;_.Qb(b)};_.Qb=function(a){if(&quot;number&quot;!=typeof a&amp;&amp;a&amp;&amp;!a.ub){var b=a.src;if(_.yb(b))Eb(b.ra,a);else{var c=a.type,d=a.ed;b.removeEventListener?b.removeEventListener(c,d,a.Dc):b.detachEvent&amp;&amp;b.detachEvent(Nb(c),d);Hb--;(c=_.Lb(b))?(Eb(c,a),0==c.qc&amp;&amp;(c.src=null,b[Fb]=null)):_.Bb(a)}}};Nb=function(a){return a in Gb?Gb[a]:Gb[a]=&quot;on&quot;+a};Sb=function(a,b,c,d){var e=!0;if(a=_.Lb(a))if(b=a.F[b.toString()])for(b=b.concat(),a=0;a&lt;b.length;a++){var f=b[a];f&amp;&amp;f.Dc==c&amp;&amp;!f.ub&amp;&amp;(f=Rb(f,d),e=e&amp;&amp;!1!==f)}return e};Rb=function(a,b){var c=a.listener,d=a.Oc||a.src;a.Bc&amp;&amp;_.Qb(a);return c.call(d,b)};Ob=function(a,b){if(a.ub)return!0;if(!ub){var c;if(!(c=b))a:{c=[&quot;window&quot;,&quot;event&quot;];for(var d=_.p,e;e=c.shift();)if(null!=d[e])d=d[e];else{c=null;break a}c=d}e=c;c=new _.wb(e,this);d=!0;if(!(0&gt;e.keyCode||void 0!=e.returnValue)){a:{var f=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(g){f=!0}if(f||void 0==e.returnValue)e.returnValue=!0}e=[];for(f=c.currentTarget;f;f=f.parentNode)e.push(f);for(var f=a.type,k=e.length-1;!c.Za&amp;&amp;0&lt;=k;k--){c.currentTarget=e[k];var m=Sb(e[k],f,!0,c),d=d&amp;&amp;m}for(k=0;!c.Za&amp;&amp;k&lt;e.length;k++)c.currentTarget=e[k],m=Sb(e[k],f,!1,c),d=d&amp;&amp;m}return d}return Rb(a,new _.wb(b,this))};_.Lb=function(a){a=a[Fb];return a instanceof _.Cb?a:null};Tb=&quot;__closure_events_fn_&quot;+(1E9*Math.random()&gt;&gt;&gt;0);_.Jb=function(a){if(_.ea(a))return a;a[Tb]||(a[Tb]=function(b){return a.handleEvent(b)});return a[Tb]};_.I=function(){_.G.call(this);this.ra=new _.Cb(this);this.qg=this;this.qe=null};_.z(_.I,_.G);_.I.prototype[xb]=!0;_.h=_.I.prototype;_.h.addEventListener=function(a,b,c,d){_.Ib(this,a,b,c,d)};_.h.removeEventListener=function(a,b,c,d){Pb(this,a,b,c,d)};_.h.dispatchEvent=function(a){var b,c=this.qe;if(c)for(b=[];c;c=c.qe)b.push(c);var c=this.qg,d=a.type||a;if(_.v(a))a=new _.H(a,c);else if(a instanceof _.H)a.target=a.target||c;else{var e=a;a=new _.H(d,c);_.bb(a,e)}var e=!0,f;if(b)for(var g=b.length-1;!a.Za&amp;&amp;0&lt;=g;g--)f=a.currentTarget=b[g],e=Ub(f,d,!0,a)&amp;&amp;e;a.Za||(f=a.currentTarget=c,e=Ub(f,d,!0,a)&amp;&amp;e,a.Za||(e=Ub(f,d,!1,a)&amp;&amp;e));if(b)for(g=0;!a.Za&amp;&amp;g&lt;b.length;g++)f=a.currentTarget=b[g],e=Ub(f,d,!1,a)&amp;&amp;e;return e};_.h.R=l(13);_.h.listen=function(a,b,c,d){return this.ra.add(String(a),b,!1,c,d)};_.h.ie=l(18);_.h.unlisten=function(a,b,c,d){return this.ra.remove(String(a),b,c,d)};var Ub=function(a,b,c,d){b=a.ra.F[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f&lt;b.length;++f){var g=b[f];if(g&amp;&amp;!g.ub&amp;&amp;g.Dc==c){var k=g.listener,m=g.Oc||g.src;g.Bc&amp;&amp;Eb(a.ra,g);e=!1!==k.call(m,d)&amp;&amp;e}}return e&amp;&amp;0!=d.Nf};_.I.prototype.Yb=function(a,b,c,d){return this.ra.Yb(String(a),b,c,d)};var Vb=function(){this.j=[];this.sc=[]};_.h=Vb.prototype;_.h.Fa=function(){return this.sc.concat()};_.h.Sa=function(){return this.j.concat()};_.h.oa=function(a){return 0&lt;=Ra(this.j,a)};_.h.remove=function(a){a=Ra(this.j,a);return 0&lt;=a?(this.j.splice(a,1),this.sc.splice(a,1),!0):!1};_.h.get=function(a,b){var c=Ra(this.j,a);return 0&lt;=c?this.sc[c]:b};_.h.set=function(a,b){var c=Ra(this.j,a);0&lt;=c?this.sc[c]=b:(this.j.push(a),this.sc.push(b))};var Wb;_.J=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&amp;&amp;a.attachEvent(&quot;on&quot;+b,c)};Wb=function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d||!1):a.detachEvent&amp;&amp;a.detachEvent(&quot;on&quot;+b,c)};_.K=function(a,b,c){a.google_image_requests||(a.google_image_requests=[]);var d=a.document.createElement(&quot;img&quot;);if(c){var e=function(a){c(a);Wb(d,&quot;load&quot;,e);Wb(d,&quot;error&quot;,e)};_.J(d,&quot;load&quot;,e);_.J(d,&quot;error&quot;,e)}d.src=b;a.google_image_requests.push(d)};_.L=window.document;_.M=window;var Yb;_.Xb=function(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&amp;&amp;b.call(null,a[c],c,a)};Yb=function(a,b,c,d,e,f){var g;if(window.document.createEvent)g=window.document.createEvent(&quot;MouseEvents&quot;),g.initMouseEvent(b,!0,!0,null,0,0,0,0,0,d,!1,e,f,c,null);else if(window.document.createEventObject)g=window.document.createEventObject(),g.Sd=&quot;on&quot;+b,g.button=c,g.ctrlKey=d,g.shiftKey=e,g.metaKey=f;else return!1;window.document.createEvent?a.dispatchEvent(g):a.fireEvent(g.Sd,g);return!0};_.N=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};_.Zb=function(a){return a.preventDefault?a.defaultPrevented:!1===a.returnValue};var $b=function(a,b,c){this.sh=c;this.Cg=a;this.Qh=b;this.Xc=0;this.Pc=null};$b.prototype.get=function(){var a;0&lt;this.Xc?(this.Xc--,a=this.Pc,this.Pc=a.next,a.next=null):a=this.Cg();return a};$b.prototype.put=function(a){this.Qh(a);this.Xc&lt;this.sh&amp;&amp;(this.Xc++,a.next=this.Pc,this.Pc=a)};var ac=function(a){_.p.setTimeout(function(){throw a;},0)},bc,cc=function(){var a=_.p.MessageChannel;&quot;undefined&quot;===typeof a&amp;&amp;&quot;undefined&quot;!==typeof window&amp;&amp;window.postMessage&amp;&amp;window.addEventListener&amp;&amp;!C(&quot;Presto&quot;)&amp;&amp;(a=function(){var a=window.document.createElement(&quot;IFRAME&quot;);a.style.display=&quot;none&quot;;a.src=&quot;&quot;;window.document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write(&quot;&quot;);a.close();var c=&quot;callImmediate&quot;+Math.random(),d=&quot;file:&quot;==b.location.protocol?&quot;*&quot;:b.location.protocol+&quot;//&quot;+b.location.host,a=(0,_.w)(function(a){if((&quot;*&quot;==d||a.origin==d)&amp;&amp;a.data==c)this.port1.onmessage()},this);b.addEventListener(&quot;message&quot;,a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if(&quot;undefined&quot;!==typeof a&amp;&amp;!C(&quot;Trident&quot;)&amp;&amp;!C(&quot;MSIE&quot;)){var b=new a,c={},d=c;b.port1.onmessage=function(){if(_.q(c.next)){c=c.next;var a=c.We;c.We=null;a()}};return function(a){d.next={We:a};d=d.next;b.port2.postMessage(0)}}return&quot;undefined&quot;!==typeof window.document&amp;&amp;&quot;onreadystatechange&quot;in window.document.createElement(&quot;SCRIPT&quot;)?function(a){var b=window.document.createElement(&quot;SCRIPT&quot;);b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};window.document.documentElement.appendChild(b)}:function(a){_.p.setTimeout(a,0)}};var dc=function(){this.ud=this.Bb=null},fc=new $b(function(){return new ec},function(a){a.reset()},100);dc.prototype.add=function(a,b){var c=fc.get();c.set(a,b);this.ud?this.ud.next=c:this.Bb=c;this.ud=c};dc.prototype.remove=function(){var a=null;this.Bb&amp;&amp;(a=this.Bb,this.Bb=this.Bb.next,this.Bb||(this.ud=null),a.next=null);return a};var ec=function(){this.next=this.scope=this.Wd=null};ec.prototype.set=function(a,b){this.Wd=a;this.scope=b;this.next=null};ec.prototype.reset=function(){this.next=this.scope=this.Wd=null};var kc=function(a,b){gc||hc();ic||(gc(),ic=!0);jc.add(a,b)},gc,hc=function(){if(_.p.Promise&amp;&amp;_.p.Promise.resolve){var a=_.p.Promise.resolve();gc=function(){a.then(lc)}}else gc=function(){var a=lc;!_.ea(_.p.setImmediate)||_.p.Window&amp;&amp;_.p.Window.prototype&amp;&amp;_.p.Window.prototype.setImmediate==_.p.setImmediate?(bc||(bc=cc()),bc(a)):_.p.setImmediate(a)}},ic=!1,jc=new dc,lc=function(){for(var a=null;a=jc.remove();){try{a.Wd.call(a.scope)}catch(b){ac(b)}fc.put(a)}ic=!1};var O=function(a,b){this.Ka=0;this.Mf=void 0;this.Cc=this.ab=this.ad=null;this.Mc=this.Td=!1;if(a!=_.ca)try{var c=this;a.call(b,function(a){mc(c,2,a)},function(a){mc(c,3,a)})}catch(d){mc(this,3,d)}},nc=function(){this.next=this.context=this.rb=this.fc=this.cb=null;this.Fd=!1};nc.prototype.reset=function(){this.context=this.rb=this.fc=this.cb=null;this.Fd=!1};var oc=new $b(function(){return new nc},function(a){a.reset()},100),pc=function(a,b,c){var d=oc.get();d.fc=a;d.rb=b;d.context=c;return d},rc=function(a,b,c){qc(a,b,c,null)||kc(_.x(b,a))},sc=function(a){return new O(function(b,c){a.length||b(void 0);for(var d=0,e;e=a[d];d++)rc(e,b,c)})},tc=function(a){return new O(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&amp;&amp;b(e)},g=function(a){c(a)},k=0,m;m=a[k];k++)rc(m,_.x(f,k),g);else b(e)})};O.prototype.then=function(a,b,c){return uc(this,_.ea(a)?a:null,_.ea(b)?b:null,c)};O.prototype.then=O.prototype.then;O.prototype.$goog_Thenable=!0;var wc=function(a,b){a.ab||2!=a.Ka&amp;&amp;3!=a.Ka||vc(a);a.Cc?a.Cc.next=b:a.ab=b;a.Cc=b},uc=function(a,b,c,d){var e=pc(null,null,null);e.cb=new O(function(a,g){e.fc=b?function(c){try{var e=b.call(d,c);a(e)}catch(t){g(t)}}:a;e.rb=c?function(b){try{var e=c.call(d,b);a(e)}catch(t){g(t)}}:g});e.cb.ad=a;wc(a,e);return e.cb};O.prototype.ci=function(a){this.Ka=0;mc(this,2,a)};O.prototype.di=function(a){this.Ka=0;mc(this,3,a)};var mc=function(a,b,c){0==a.Ka&amp;&amp;(a==c&amp;&amp;(b=3,c=new TypeError(&quot;Promise cannot resolve to itself&quot;)),a.Ka=1,qc(c,a.ci,a.di,a)||(a.Mf=c,a.Ka=b,a.ad=null,vc(a),3!=b||xc(a,c)))},qc=function(a,b,c,d){if(a instanceof O)return wc(a,pc(b||_.ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(f){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;if(_.fa(a))try{var g=a.then;if(_.ea(g))return yc(a,g,b,c,d),!0}catch(k){return c.call(d,k),!0}return!1},yc=function(a,b,c,d,e){var f=!1,g=function(a){f||(f=!0,c.call(e,a))},k=function(a){f||(f=!0,d.call(e,a))};try{b.call(a,g,k)}catch(m){k(m)}},vc=function(a){a.Td||(a.Td=!0,kc(a.Og,a))},zc=function(a){var b=null;a.ab&amp;&amp;(b=a.ab,a.ab=b.next,b.next=null);a.ab||(a.Cc=null);return b};O.prototype.Og=function(){for(var a=null;a=zc(this);){var b=this.Ka,c=this.Mf;if(3==b&amp;&amp;a.rb&amp;&amp;!a.Fd)for(var d=void 0,d=this;d&amp;&amp;d.Mc;d=d.ad)d.Mc=!1;if(a.cb)a.cb.ad=null,Ac(a,b,c);else try{a.Fd?a.fc.call(a.context):Ac(a,b,c)}catch(e){Bc.call(null,e)}oc.put(a)}this.Td=!1};var Ac=function(a,b,c){2==b?a.fc.call(a.context,c):a.rb&amp;&amp;a.rb.call(a.context,c)},xc=function(a,b){a.Mc=!0;kc(function(){a.Mc&amp;&amp;Bc.call(null,b)})},Bc=ac;cb(&quot;area base br col command embed hr img input keygen link meta param source track wbr&quot;.split(&quot; &quot;));_.Cc=!_.D||9&lt;=tb;!_.lb&amp;&amp;!_.D||_.D&amp;&amp;9&lt;=tb||_.lb&amp;&amp;_.F(&quot;1.9.1&quot;);var Dc=_.D&amp;&amp;!_.F(&quot;9&quot;);var Ic,Jc,Kc;_.Fc=function(a,b){var c=b||window.document;return c.querySelectorAll&amp;&amp;c.querySelector?c.querySelectorAll(&quot;.&quot;+a):_.Ec(&quot;*&quot;,a,b)};_.Ec=function(a,b,c){var d=window.document;c=c||d;var e=a&amp;&amp;&quot;*&quot;!=a?a.toUpperCase():&quot;&quot;;if(c.querySelectorAll&amp;&amp;c.querySelector&amp;&amp;(e||b))return c.querySelectorAll(e+(b?&quot;.&quot;+b:&quot;&quot;));if(b&amp;&amp;c.getElementsByClassName){a=c.getElementsByClassName(b);if(e){c={};for(var f=d=0,g;g=a[f];f++)e==g.nodeName&amp;&amp;(c[d++]=g);c.length=d;return c}return a}a=c.getElementsByTagName(e||&quot;*&quot;);if(b){c={};for(f=d=0;g=a[f];f++){var e=g.className,k;if(k=&quot;function&quot;==typeof e.split)k=0&lt;=Ra(e.split(/\s+/),b);k&amp;&amp;(c[d++]=g)}c.length=d;return c}return a};_.Gc=function(a,b){if(a.contains&amp;&amp;1==b.nodeType)return a==b||a.contains(b);if(&quot;undefined&quot;!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&amp;16);for(;b&amp;&amp;a!=b;)b=b.parentNode;return b==a};_.Hc=function(a){return 9==a.nodeType?a:a.ownerDocument||a.document};Ic={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1};Jc={IMG:&quot; &quot;,BR:&quot;\n&quot;};_.Lc=function(a){if(Dc&amp;&amp;&quot;innerText&quot;in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,&quot;\n&quot;);else{var b=[];Kc(a,b,!0);a=b.join(&quot;&quot;)}a=a.replace(/ \xAD /g,&quot; &quot;).replace(/\xAD/g,&quot;&quot;);a=a.replace(/\u200B/g,&quot;&quot;);Dc||(a=a.replace(/ +/g,&quot; &quot;));&quot; &quot;!=a&amp;&amp;(a=a.replace(/^\s*/,&quot;&quot;));return a};Kc=function(a,b,c){if(!(a.nodeName in Ic))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,&quot;&quot;)):b.push(a.nodeValue);else if(a.nodeName in Jc)b.push(Jc[a.nodeName]);else for(a=a.firstChild;a;)Kc(a,b,c),a=a.nextSibling};var Nc=function(a,b,c){var d=&quot;mouseenter_custom&quot;==b,e=Mc(b);return function(f){f||(f=window.event);if(f.type==e){if(&quot;mouseenter_custom&quot;==b||&quot;mouseleave_custom&quot;==b){var g;if(g=d?f.relatedTarget||f.fromElement:f.relatedTarget||f.toElement)for(var k=0;k&lt;a.length;k++)if(_.Gc(a[k],g))return}c(f)}}},Mc=function(a){return&quot;mouseenter_custom&quot;==a?&quot;mouseover&quot;:&quot;mouseleave_custom&quot;==a?&quot;mouseout&quot;:a};var Oc=function(a,b,c,d,e){if(e)c=a+(&quot;&amp;&quot;+b+&quot;=&quot;+c);else{var f=&quot;&amp;&quot;+b+&quot;=&quot;,g=a.indexOf(f);0&gt;g?c=a+f+c:(g+=f.length,f=a.indexOf(&quot;&amp;&quot;,g),c=0&lt;=f?a.substring(0,g)+c+a.substring(f):a.substring(0,g)+c)}return 2E3&lt;c.length?_.q(d)?Oc(a,b,d,void 0,e):a:c};var Pc=&quot;StopIteration&quot;in _.p?_.p.StopIteration:{message:&quot;StopIteration&quot;,stack:&quot;&quot;},Qc=function(){};Qc.prototype.next=function(){throw Pc;};Qc.prototype.pg=function(){return this};var Rc=function(a,b){this.ca={};this.j=[];this.td=this.B=0;var c=arguments.length;if(1&lt;c){if(c%2)throw Error(&quot;Uneven number of arguments&quot;);for(var d=0;d&lt;c;d+=2)this.set(arguments[d],arguments[d+1])}else a&amp;&amp;this.addAll(a)};Rc.prototype.Fa=function(){Sc(this);for(var a=[],b=0;b&lt;this.j.length;b++)a.push(this.ca[this.j[b]]);return a};Rc.prototype.Sa=function(){Sc(this);return this.j.concat()};Rc.prototype.oa=function(a){return Tc(this.ca,a)};Rc.prototype.remove=function(a){return Tc(this.ca,a)?(delete this.ca[a],this.B--,this.td++,this.j.length&gt;2*this.B&amp;&amp;Sc(this),!0):!1};var Sc=function(a){if(a.B!=a.j.length){for(var b=0,c=0;b&lt;a.j.length;){var d=a.j[b];Tc(a.ca,d)&amp;&amp;(a.j[c++]=d);b++}a.j.length=c}if(a.B!=a.j.length){for(var e={},c=b=0;b&lt;a.j.length;)d=a.j[b],Tc(e,d)||(a.j[c++]=d,e[d]=1),b++;a.j.length=c}};_.h=Rc.prototype;_.h.get=function(a,b){return Tc(this.ca,a)?this.ca[a]:b};_.h.set=function(a,b){Tc(this.ca,a)||(this.B++,this.j.push(a),this.td++);this.ca[a]=b};_.h.addAll=function(a){var b;if(a instanceof Rc)b=a.Sa(),a=a.Fa();else{b=[];var c=0,d;for(d in a)b[c++]=d;c=[];d=0;for(var e in a)c[d++]=a[e];a=c}for(e=0;e&lt;b.length;e++)this.set(b[e],a[e])};_.h.forEach=function(a,b){for(var c=this.Sa(),d=0;d&lt;c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};_.h.clone=function(){return new Rc(this)};_.h.pg=function(a){Sc(this);var b=0,c=this.td,d=this,e=new Qc;e.next=function(){if(c!=d.td)throw Error(&quot;The map has changed since the iterator was created&quot;);if(b&gt;=d.j.length)throw Pc;var e=d.j[b++];return a?e:d.ca[e]};return e};var Tc=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};var Vc=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/,Xc=function(a){if(Wc){Wc=!1;var b=_.p.location;if(b){var c=b.href;if(c&amp;&amp;(c=(c=Xc(c)[3]||null)?(0,window.decodeURI)(c):c)&amp;&amp;c!=b.hostname)throw Wc=!0,Error();}}return a.match(Vc)},Wc=_.nb,Yc=function(a,b){if(a)for(var c=a.split(&quot;&amp;&quot;),d=0;d&lt;c.length;d++){var e=c[d].indexOf(&quot;=&quot;),f=null,g=null;0&lt;=e?(f=c[d].substring(0,e),g=c[d].substring(e+1)):f=c[d];b(f,g?(0,window.decodeURIComponent)(g.replace(/\+/g,&quot; &quot;)):&quot;&quot;)}};var Zc=function(a,b){this.Pa=this.$a=this.Ja=&quot;&quot;;this.sb=null;this.Ra=this.da=&quot;&quot;;this.L=this.oh=!1;var c;if(a instanceof Zc)this.L=_.q(b)?b:a.L,$c(this,a.Ja),c=a.$a,P(this),this.$a=c,ad(this,a.Pa),bd(this,a.sb),c=a.da,P(this),this.da=c,cd(this,a.wa.clone()),c=a.Ra,P(this),this.Ra=c;else if(a&amp;&amp;(c=Xc(String(a)))){this.L=!!b;$c(this,c[1]||&quot;&quot;,!0);var d=c[2]||&quot;&quot;;P(this);this.$a=dd(d);ad(this,c[3]||&quot;&quot;,!0);bd(this,c[4]);d=c[5]||&quot;&quot;;P(this);this.da=dd(d,!0);cd(this,c[6]||&quot;&quot;,!0);c=c[7]||&quot;&quot;;P(this);this.Ra=dd(c)}else this.L=!!b,this.wa=new ed(null,0,this.L)};Zc.prototype.toString=function(){var a=[],b=this.Ja;b&amp;&amp;a.push(fd(b,gd,!0),&quot;:&quot;);if(b=this.Pa){a.push(&quot;//&quot;);var c=this.$a;c&amp;&amp;a.push(fd(c,gd,!0),&quot;@&quot;);a.push((0,window.encodeURIComponent)(String(b)).replace(/%25([0-9a-fA-F]{2})/g,&quot;%$1&quot;));b=this.sb;null!=b&amp;&amp;a.push(&quot;:&quot;,String(b))}if(b=this.da)this.Pa&amp;&amp;&quot;/&quot;!=b.charAt(0)&amp;&amp;a.push(&quot;/&quot;),a.push(fd(b,&quot;/&quot;==b.charAt(0)?hd:id,!0));(b=this.wa.toString())&amp;&amp;a.push(&quot;?&quot;,b);(b=this.Ra)&amp;&amp;a.push(&quot;#&quot;,fd(b,jd));return a.join(&quot;&quot;)};Zc.prototype.resolve=function(a){var b=this.clone(),c=!!a.Ja;c?$c(b,a.Ja):c=!!a.$a;if(c){var d=a.$a;P(b);b.$a=d}else c=!!a.Pa;c?ad(b,a.Pa):c=null!=a.sb;d=a.da;if(c)bd(b,a.sb);else if(c=!!a.da){if(&quot;/&quot;!=d.charAt(0))if(this.Pa&amp;&amp;!this.da)d=&quot;/&quot;+d;else{var e=b.da.lastIndexOf(&quot;/&quot;);-1!=e&amp;&amp;(d=b.da.substr(0,e+1)+d)}e=d;if(&quot;..&quot;==e||&quot;.&quot;==e)d=&quot;&quot;;else if(-1!=e.indexOf(&quot;./&quot;)||-1!=e.indexOf(&quot;/.&quot;)){for(var d=0==e.lastIndexOf(&quot;/&quot;,0),e=e.split(&quot;/&quot;),f=[],g=0;g&lt;e.length;){var k=e[g++];&quot;.&quot;==k?d&amp;&amp;g==e.length&amp;&amp;f.push(&quot;&quot;):&quot;..&quot;==k?((1&lt;f.length||1==f.length&amp;&amp;&quot;&quot;!=f[0])&amp;&amp;f.pop(),d&amp;&amp;g==e.length&amp;&amp;f.push(&quot;&quot;)):(f.push(k),d=!0)}d=f.join(&quot;/&quot;)}else d=e}c?(P(b),b.da=d):c=&quot;&quot;!==a.wa.toString();c?cd(b,dd(a.wa.toString())):c=!!a.Ra;c&amp;&amp;(a=a.Ra,P(b),b.Ra=a);return b};Zc.prototype.clone=function(){return new Zc(this)};var $c=function(a,b,c){P(a);a.Ja=c?dd(b,!0):b;a.Ja&amp;&amp;(a.Ja=a.Ja.replace(/:$/,&quot;&quot;))},ad=function(a,b,c){P(a);a.Pa=c?dd(b,!0):b},bd=function(a,b){P(a);if(b){b=Number(b);if((0,window.isNaN)(b)||0&gt;b)throw Error(&quot;Bad port number &quot;+b);a.sb=b}else a.sb=null},cd=function(a,b,c){P(a);b instanceof ed?(a.wa=b,a.wa.ye(a.L)):(c||(b=fd(b,kd)),a.wa=new ed(b,0,a.L))},P=function(a){if(a.oh)throw Error(&quot;Tried to modify a read-only Uri&quot;);};Zc.prototype.ye=function(a){this.L=a;this.wa&amp;&amp;this.wa.ye(a);return this};var dd=function(a,b){return a?b?(0,window.decodeURI)(a.replace(/%25/g,&quot;%2525&quot;)):(0,window.decodeURIComponent)(a):&quot;&quot;},fd=function(a,b,c){return _.v(a)?(a=(0,window.encodeURI)(a).replace(b,ld),c&amp;&amp;(a=a.replace(/%25([0-9a-fA-F]{2})/g,&quot;%$1&quot;)),a):null},ld=function(a){a=a.charCodeAt(0);return&quot;%&quot;+(a&gt;&gt;4&amp;15).toString(16)+(a&amp;15).toString(16)},gd=/[#\/\?@]/g,id=/[\#\?:]/g,hd=/[\#\?]/g,kd=/[\#\?@]/g,jd=/#/g,ed=function(a,b,c){this.B=this.s=null;this.K=a||null;this.L=!!c},md=function(a){a.s||(a.s=new Rc,a.B=0,a.K&amp;&amp;Yc(a.K,function(b,c){a.add((0,window.decodeURIComponent)(b.replace(/\+/g,&quot; &quot;)),c)}))};_.h=ed.prototype;_.h.add=function(a,b){md(this);this.K=null;a=nd(this,a);var c=this.s.get(a);c||this.s.set(a,c=[]);c.push(b);this.B++;return this};_.h.remove=function(a){md(this);a=nd(this,a);return this.s.oa(a)?(this.K=null,this.B-=this.s.get(a).length,this.s.remove(a)):!1};_.h.oa=function(a){md(this);a=nd(this,a);return this.s.oa(a)};_.h.Sa=function(){md(this);for(var a=this.s.Fa(),b=this.s.Sa(),c=[],d=0;d&lt;b.length;d++)for(var e=a[d],f=0;f&lt;e.length;f++)c.push(b[d]);return c};_.h.Fa=function(a){md(this);var b=[];if(_.v(a))this.oa(a)&amp;&amp;(b=Wa(b,this.s.get(nd(this,a))));else{a=this.s.Fa();for(var c=0;c&lt;a.length;c++)b=Wa(b,a[c])}return b};_.h.set=function(a,b){md(this);this.K=null;a=nd(this,a);this.oa(a)&amp;&amp;(this.B-=this.s.get(a).length);this.s.set(a,[b]);this.B++;return this};_.h.get=function(a,b){var c=a?this.Fa(a):[];return 0&lt;c.length?String(c[0]):b};_.h.toString=function(){if(this.K)return this.K;if(!this.s)return&quot;&quot;;for(var a=[],b=this.s.Sa(),c=0;c&lt;b.length;c++)for(var d=b[c],e=(0,window.encodeURIComponent)(String(d)),d=this.Fa(d),f=0;f&lt;d.length;f++){var g=e;&quot;&quot;!==d[f]&amp;&amp;(g+=&quot;=&quot;+(0,window.encodeURIComponent)(String(d[f])));a.push(g)}return this.K=a.join(&quot;&amp;&quot;)};_.h.clone=function(){var a=new ed;a.K=this.K;this.s&amp;&amp;(a.s=this.s.clone(),a.B=this.B);return a};var nd=function(a,b){var c=String(b);a.L&amp;&amp;(c=c.toLowerCase());return c};ed.prototype.ye=function(a){a&amp;&amp;!this.L&amp;&amp;(md(this),this.K=null,this.s.forEach(function(a,c){var d=c.toLowerCase();c!=d&amp;&amp;(this.remove(c),this.remove(d),0&lt;a.length&amp;&amp;(this.K=null,this.s.set(nd(this,d),_.Xa(a)),this.B+=a.length))},this));this.L=a};var od=C(&quot;Android&quot;)&amp;&amp;!(ib()||C(&quot;Firefox&quot;)||gb()||C(&quot;Silk&quot;));ib();var Q;Q={ig:0,la:1,URL:2,ia:3,ha:4,xc:5,wc:7,FAVICON:8,vc:9,ka:6,Oe:10,zd:11,yd:12,Ne:13,tc:14,xd:15,Ad:16,og:29,gg:30,Pe:17,wd:18,Me:19,hg:20,Le:21,mg:22,Fb:23,Cb:24,Eb:25,Db:26,vd:27,Bd:28,ng:31,fg:32,uc:33,jg:1E3,kg:1001,lg:1002};_.pd=[Q.zd,Q.yd,Q.Ad,Q.wd,Q.vd,Q.Bd];_.R={};_.R[Q.ig]=&quot;c&quot;;_.R[Q.la]=&quot;t&quot;;_.R[Q.URL]=&quot;u&quot;;_.R[Q.ia]=&quot;b&quot;;_.R[Q.ha]=&quot;a&quot;;_.R[Q.xc]=&quot;s&quot;;_.R[Q.FAVICON]=&quot;f&quot;;_.R[Q.vc]=&quot;g&quot;;_.R[Q.ka]=&quot;i&quot;;_.R[Q.Oe]=&quot;ih&quot;;_.R[Q.zd]=&quot;ib&quot;;_.R[Q.yd]=&quot;ic&quot;;_.R[Q.wc]=&quot;r&quot;;_.R[Q.Ad]=&quot;ig&quot;;_.R[Q.Ne]=&quot;cre&quot;;_.R[Q.tc]=&quot;addr&quot;;_.R[Q.xd]=&quot;ia&quot;;_.R[Q.Pe]=&quot;mf&quot;;_.R[Q.wd]=&quot;bc&quot;;_.R[Q.Me]=&quot;cl&quot;;_.R[Q.hg]=&quot;c1ct&quot;;_.R[Q.Le]=&quot;amo&quot;;_.R[Q.Db]=&quot;pr&quot;;_.R[Q.Fb]=&quot;rv&quot;;_.R[Q.Cb]=&quot;asi&quot;;_.R[Q.Eb]=&quot;ph&quot;;_.R[Q.vd]=&quot;at&quot;;_.R[Q.Bd]=&quot;mb&quot;;_.R[Q.uc]=&quot;ai&quot;;_.R[Q.jg]=&quot;e&quot;;var qd=function(a,b,c,d){b=c(d,b);if(!(b instanceof Array))return a;(0,_.Sa)(b,function(b){if(2!==b.length&amp;&amp;3!==b.length)return a;a=Oc(a,b[0],b[1],b[2],!0)});return a},rd=function(a,b,c){if(window.ona){_.N(a);a=b.href;a:{if(window.ona){if(c.match(/^https?:\/\/itunes[.]apple[.]com/)){if(window.onc)window.onc(a),window.ona(c);else window.ona(a);c=!0;break a}c=a;if(c.match(/market[.]android[.]com|play[.]google[.]com/)&amp;&amp;c.match(/[\?&amp;]sa=L/)&amp;&amp;!c.match(/googleadservices[.]com/)){var d=window.location.host;if(d){b=1;for(var e=d.split(&quot;:&quot;),d=[];0&lt;b&amp;&amp;e.length;)d.push(e.shift()),b--;e.length&amp;&amp;d.push(e.join(&quot;:&quot;));b=d[0];d=d[1];c=new Zc(c);ad(c,b);bd(c,d);c=c.toString()}c=c.replace(&quot;?&quot;,&quot;?&quot;+(0,window.encodeURIComponent)(&quot;rct&quot;)+&quot;=&quot;+(0,window.encodeURIComponent)(&quot;j&quot;)+&quot;&amp;&quot;);b=new window.XMLHttpRequest;b.open(&quot;GET&quot;,c,!1);window.jstiming&amp;&amp;_.ea(window.jstiming.report)?(d=new window.jstiming.Timer,b.send(),d.tick(&quot;cr_csr&quot;),window.jstiming.report(d)):b.send();b.responseText&amp;&amp;(b=b.responseText.match(/URL=\'([^\']*)\'/),1&lt;b.length&amp;&amp;(c=b[1].replace(/&amp;amp;/g,&quot;&amp;&quot;)));c=od||ob?c.replace(/https?:\/\/(market.android.com|play.google.com\/store\/apps)\//,&quot;market://&quot;):c}else c=null;if(c){window.ona(c);c=!0;break a}}c=!1}if(!c)window.ona(a)}};_.S=function(a){this.na=a;this.Ie=[];this.Ac=[];this.ce={};this.o={};this.Df=1;this.gc=&quot;data-original-click-url&quot;;this.ve=&quot;data-landing-url&quot;;this.ya={};this.ee=!1;this.Hc=[]};_.S.prototype.ic=l(20);var sd=function(a,b,c){var d=b=b.getAttribute(a.gc);if(d)for(var e=0;e&lt;a.Ie.length;e++)d=qd(d,b,a.Ie[e],c);return d},td=function(a,b,c,d){if(0!=a.Ac.length&amp;&amp;!_.Zb(d)){_.N(d);for(var e=[],f=0;f&lt;a.Ac.length;f++){var g=a.Ac[f](c);if(g){var k=new O(function(a){_.K(window,g,a)});e.push(k)}}c=tc(e);e=new O(function(a){window.setTimeout(a,2E3)});sc([c,e]).then((0,_.w)(_.S.prototype.Lh,a,b,d))}};_.S.prototype.Lh=function(a,b){this.ee=!0;var c=!1;b.target&amp;&amp;(c=Yb(b.target,&quot;click&quot;,b.button,b.ctrlKey,b.shiftKey,b.metaKey));a.href&amp;&amp;!c&amp;&amp;(_.M.top.location=a.href)};_.S.prototype.Pg=function(a,b,c,d){if(this.ee)this.ee=!1;else{d||(d=window.event);_.$a(this.o[c][b],function(a){a(d)});if(a.href){var e=sd(this,a,d.type);e&amp;&amp;(this.ya[b]?a.ping=e:a.href=e)}&quot;click&quot;==c&amp;&amp;td(this,a,b,d);ud(this);&quot;click&quot;!=c||_.Zb(d)||rd(d,a,Na(this.na))}};var vd=function(a,b,c,d){a.o[d]||(a.o[d]={});a.o[d][c]||(a.o[d][c]={});a=(0,_.w)(a.Pg,a,b,c,d);_.J(b,d,a,void 0)};_.h=_.S.prototype;_.h.J=function(a,b){for(var c=0;c&lt;a.length;c++){var d=a[c];d.href&amp;&amp;d.setAttribute(this.gc,d.href);vd(this,d,b,&quot;mousedown&quot;);vd(this,d,b,&quot;click&quot;)}this.ce[b]=!0};_.h.rc=l(22);_.h.Ob=l(24);_.h.oc=l(26);_.h.kc=l(28);_.h.queueOnObjectAfterClickModifiers=function(a,b,c,d){this.Hc.push({rg:a,Sd:b,Ng:c,xg:d})};var ud=function(a){for(var b=0;b&lt;a.Hc.length;b++){var c=a.Hc[b],d=c.rg,e=c.Sd,f=c.Ng;c.xg&amp;&amp;_.Zb(f)||d.fireOnObject(e,f)}a.Hc=[]};var wd;wd=&quot;undefined&quot;!=typeof window.DOMTokenList;_.xd=function(a,b){if(wd){var c=a.classList;0==c.contains(b)&amp;&amp;c.toggle(b)}else if(c=a.className){for(var c=c.split(/\s+/),d=!1,e=0;e&lt;c.length&amp;&amp;!d;++e)d=c[e]==b;d||(c.push(b),a.className=c.join(&quot; &quot;))}else a.className=b};_.yd=function(a,b){if(wd){var c=a.classList;1==c.contains(b)&amp;&amp;c.toggle(b)}else if((c=a.className)&amp;&amp;!(0&gt;c.indexOf(b))){for(var c=c.split(/\s+/),d=0;d&lt;c.length;++d)c[d]==b&amp;&amp;c.splice(d--,1);a.className=c.join(&quot; &quot;)}};var Ad,Bd;_.zd=!0;Ad=Math.random();_.Cd=function(a,b,c){try{if((&quot;jserror&quot;==a?Math.random():Ad)&lt;(c||.01)){var d=&quot;/pagead/gen_204?id=&quot;+a+Bd(b),e=&quot;http&quot;+(&quot;http:&quot;==_.M.location.protocol?&quot;&quot;:&quot;s&quot;)+&quot;://pagead2.googlesyndication.com&quot;+d,e=e.substring(0,2E3);_.K(_.M,e,void 0)}}catch(f){}};Bd=function(a){var b=&quot;&quot;;_.Xb(a,function(a,d){if(0===a||a)b+=&quot;&amp;&quot;+d+&quot;=&quot;+ba(a)});return b};_.T=function(a,b,c){this.ae=new _.I;this.l=a;this.l[0]=[b];this.Cf=[];this.Mb=b.style.display;this.Z=new _.S(c);this.na=c;if(b=window.document.getElementById(&quot;common_15click_anchor&quot;))a[20]=[b],this.J(20)};_.h=_.T.prototype;_.h.navigationAdPieces=function(){return this.Cf};_.h.de=function(){return!0};_.h.hide=function(){for(var a=this.l[0],b=0;b&lt;a.length;b++)a[b].style.display=&quot;none&quot;};_.h.reset=function(){for(var a=this.l[0],b=0;b&lt;a.length;b++)a[b].style.display=this.Mb};_.h.has=function(a){return(a=this.l[a])&amp;&amp;0&lt;a.length};_.h.listen=function(a,b,c){var d=this.l[a];if(d){var e=this.Z,f=Mc(b),g=(&quot;click&quot;==b||&quot;mousedown&quot;==b)&amp;&amp;e.ce[a],k=Nc(d,b,_.x(c,a,this));e.o[f]||(e.o[f]={});e.o[f][a]||(e.o[f][a]={});var m=e.Df;e.o[f][a][m]=k;e.Df=m+1;if(!g)for(e=0;e&lt;d.length;e++)_.J(d[e],f,k,void 0);c.ma||(c.ma={});c.ma[b]||(c.ma[b]={});c.ma[b][a]=m}};_.h.unlisten=function(a,b,c){var d;if(c.ma&amp;&amp;c.ma[b]&amp;&amp;c.ma[b][a]){var e=c.ma[b][a];delete c.ma[b][a];d=e}else d=-1;if(c=this.l[a]){var f=this.Z,e=Mc(b);b=(&quot;click&quot;==b||&quot;mousedown&quot;==b)&amp;&amp;f.ce[a];if(f.o[e]&amp;&amp;f.o[e][a]){var g=f.o[e][a][d];delete f.o[e][a][d];a=g}else a=null;if(a&amp;&amp;!b)for(b=0;b&lt;c.length;b++)Wb(c[b],e,a,void 0)}};_.Dd=function(a,b,c,d,e,f){if(a=a.l[b])for(b=0;b&lt;a.length;b++){var g=&quot;click&quot;,g=Mc(g);Yb(a[b],g,c,d,e,f)}};_.T.prototype.registerClickUrlModifier=function(a){this.Z.Ie.push(a)};_.T.prototype.ic=l(19);_.T.prototype.modifyCssClass=function(a,b,c){if(b&amp;&amp;(a=this.l[a]))for(var d=0;d&lt;a.length;d++)(c?_.yd:_.xd)(a[d],b)};_.T.prototype.getComputedStyle=function(a){return(a=this.l[a])&amp;&amp;0&lt;a.length?window.getComputedStyle(a[0]):null};var Ed=function(a,b){var c=a.l[b];if(!c||!c[0])return&quot;rgb(255, 255, 255)&quot;;c=c[0].parentElement;if(!c)return&quot;rgb(255, 255, 255)&quot;;for(var d=/rgba\([ \d]+,[ \d]+,[ \d]+,[ 0\.]+\)/;c;){var e=window.getComputedStyle(c).backgroundColor;if(e&amp;&amp;!d.exec(e)&amp;&amp;&quot;transparent&quot;!=e)return e;c=c.parentElement}return&quot;rgb(255, 255, 255)&quot;};_.h=_.T.prototype;_.h.tf=function(a){return(a=this.l[a])&amp;&amp;0&lt;a.length?_.Lc(a[0]):&quot;&quot;};_.h.getAttribute=function(a,b){var c=this.l[a];if(c&amp;&amp;b)for(var d=0;d&lt;c.length;d++){var e=c[d].getAttribute(b);if(e)return e}return null};_.h.setAttribute=function(a,b,c){(a=this.l[a])&amp;&amp;0&lt;a.length&amp;&amp;b&amp;&amp;a[0].setAttribute(b,c)};_.h.removeAttribute=function(a,b){var c=this.l[a];c&amp;&amp;0&lt;c.length&amp;&amp;b&amp;&amp;c[0].removeAttribute(b)};_.h.getBoundingClientRect=function(a){return(a=this.l[a])?a[0].getBoundingClientRect():null};_.h.forEachAdPiece=function(a){var b=this.l;_.$a(Q,function(c){b[c]&amp;&amp;0&lt;b[c].length&amp;&amp;a(c)})};_.h.J=function(a){this.l[a]&amp;&amp;this.de(a)&amp;&amp;(this.Cf.push(a),this.Z.J(this.l[a],a))};_.h.rc=l(21);_.h.Ob=l(23);_.h.oc=l(25);_.h.kc=l(27);_.Fd=function(a,b){var c=a.l[b];if(!c)return!1;for(var d=0;d&lt;c.length;d++)if(!c[d].href)return!1;return!0};_.h=_.T.prototype;_.h.creativeConversionUrl=function(){var a=this.na.g[5];return null!=a?a:&quot;&quot;};_.h.adGroupCreativeId=function(){var a=this.na.g[6];return null!=a?a:&quot;&quot;};_.h.redirectUrl=function(){return this.na.Jc()};_.h.lf=function(){return Na(this.na)};_.h.getIndex=function(){return this.na.getIndex()};_.h.ta=function(){return this.na.ta()};_.h.sa=function(){return this.na.sa()};_.h.listenOnObject=function(a,b){_.Ib(this.ae,a,b)};_.h.unlistenOnObject=function(a,b){Pb(this.ae,a,b)};_.h.fireOnObject=function(a,b){var c=this.ae;_.yb(c)?Ub(c,a,!1,b):Sb(c,a,!1,b)};_.h.queueOnObjectAfterClickModifiers=function(a,b,c){this.Z.queueOnObjectAfterClickModifiers(this,a,b,c)};_.T.prototype.modifyCssClass=_.T.prototype.modifyCssClass;_.T.prototype.has=_.T.prototype.has;_.T.prototype.listen=_.T.prototype.listen;_.T.prototype.unlisten=_.T.prototype.unlisten;_.T.prototype.registerClickUrlModifier=_.T.prototype.registerClickUrlModifier;_.T.prototype.hide=_.T.prototype.hide;_.T.prototype.reset=_.T.prototype.reset;_.T.prototype.forEachAdPiece=_.T.prototype.forEachAdPiece;_.T.prototype.getAttribute=_.T.prototype.getAttribute;_.T.prototype.setAttribute=_.T.prototype.setAttribute;_.T.prototype.removeAttribute=_.T.prototype.removeAttribute;_.T.prototype.getBoundingClientRect=_.T.prototype.getBoundingClientRect;_.T.prototype.creativeConversionUrl=_.T.prototype.creativeConversionUrl;_.T.prototype.adGroupCreativeId=_.T.prototype.adGroupCreativeId;_.T.prototype.redirectUrl=_.T.prototype.redirectUrl;_.T.prototype.finalDestinationUrl=_.T.prototype.lf;_.T.prototype.getIndex=_.T.prototype.getIndex;_.T.prototype.listenOnObject=_.T.prototype.listenOnObject;_.T.prototype.unlistenOnObject=_.T.prototype.unlistenOnObject;_.T.prototype.fireOnObject=_.T.prototype.fireOnObject;_.T.prototype.navigationAdPieces=_.T.prototype.navigationAdPieces;_.T.prototype.queueOnObjectAfterClickModifiers=_.T.prototype.queueOnObjectAfterClickModifiers;var Hd=function(a,b,c){_.T.call(this,a,b,c);for(a=0;a&lt;Gd.length;a++)this.J(Gd[a]);this.listen(4,&quot;mouseover&quot;,(0,_.w)(this.modifyCssClass,this,0,&quot;onhoverbg&quot;,!1));this.listen(4,&quot;mouseout&quot;,(0,_.w)(this.modifyCssClass,this,0,&quot;onhoverbg&quot;,!0))};_.z(Hd,_.T);var Gd=[Q.la,Q.URL,Q.ha,Q.xc,Q.wc,Q.FAVICON,Q.ia,Q.vc,Q.ka,Q.tc,Q.xd],Id={la:&quot;rhtitle&quot;,ia:&quot;rhbody&quot;,URL:&quot;rhurl&quot;,ha:&quot;rhbutton&quot;,FAVICON:&quot;rhfavicon&quot;,tc:&quot;rhaddress&quot;,ka:&quot;rhimage&quot;,Ad:&quot;rhimagegallery&quot;,og:&quot;rhviewimagegallery&quot;,gg:&quot;rhcloseimagegalleryview&quot;,ng:&quot;rhtrydemobutton&quot;,fg:&quot;rhclosetrydemoview&quot;,Oe:&quot;rhimage-container&quot;,zd:&quot;rhexpand-button&quot;,yd:&quot;rhimage-collapsed&quot;,vc:&quot;rhbackground&quot;,Ne:&quot;rh-icore-empty&quot;,xc:&quot;rhsitelink&quot;,wc:&quot;rhradlink&quot;,Pe:&quot;rh-multiframe&quot;,wd:&quot;rh-box-breadcrumbs&quot;,Le:&quot;rh-ms-mute-overlay&quot;,mg:&quot;rh-ms-mute-undo&quot;,Fb:&quot;rhstarratings&quot;,Cb:&quot;rh-box-store-icon&quot;,Eb:&quot;rhpromotext&quot;,Db:&quot;rhprice&quot;,vd:&quot;abgc&quot;,Bd:&quot;cbc&quot;,kg:&quot;rhoverlap-imagegallery&quot;,lg:&quot;rhoverlap-trydemo&quot;},Jd=function(a){var b={};b[0]=[a];for(var c in Id){var d=Q[c],e=b,f=_.Ec(null,Id[c],a);e[d]=[];for(var g=0;g&lt;f.length;g++)e[d].push(f[g])}return b};Hd.prototype.de=function(a){return _.Fd(this,a)||4==a};_.U=function(a,b,c){_.I.call(this);this.O=a;this.Mb=&quot;none&quot;;this.O&amp;&amp;(this.Mb=this.O.style.display);this.G=b;this.g=c;this.o={};this.me=[];this.wf=!1;this.ga=[]};_.z(_.U,_.I);_.U.prototype.forEachAd=function(a){(0,_.Sa)(this.G,a)};_.U.prototype.yc=function(a){this.G.push(a)};_.Kd=function(a){a=new _.U(null,[],new _.A(a));_.r(&quot;adSlot&quot;,a,void 0);return a};_.h=_.U.prototype;_.h.mf=function(a){if(a=window.document.getElementById(a))this.O=a,this.Mb=this.O.style.display;if(0==this.G.length)window.css=null;else{window.SlideConstructor&amp;&amp;0&lt;this.G.length&amp;&amp;new window.SlideConstructor(this.G[0],this,ya(this.g));window.ImageExpandConstructor&amp;&amp;1==this.G.length&amp;&amp;new window.ImageExpandConstructor(this,ya(this.g));window.OneClickConstructor&amp;&amp;0&lt;this.G.length&amp;&amp;new window.OneClickConstructor(this,0);window.OnePointFiveClickConstructor&amp;&amp;0&lt;this.G.length&amp;&amp;(a=_.Ba(this.g).g[4],new window.OnePointFiveClickConstructor(this,_.Ja(_.Ba(this.g)),_.Ka(_.Ba(this.g)),_.La(_.Ba(this.g)),_.Ma(_.Ba(this.g)),null!=a?a:!1));window.OnePointFiveClickExpConstructor&amp;&amp;0&lt;this.G.length&amp;&amp;new window.OnePointFiveClickExpConstructor(this);if(window.IntentfulClickConstructor&amp;&amp;0&lt;this.G.length){a=Da(this.g).g[0];var b=Da(this.g).g[1],c=Da(this.g).g[2];new window.IntentfulClickConstructor(this,null!=a?a:&quot;&quot;,null!=b?b:!1,null!=c?c:!1)}window.MultiframeConstructor&amp;&amp;new window.MultiframeConstructor(this,ya(this.g));if(a=window.ona)a=this.g.g[4],a=!(null!=a&amp;&amp;a);a&amp;&amp;(window.ona=null);for(a=0;a&lt;this.me.length;++a)this.me[a]();this.wf=!0}};_.h.listenOnContainer=function(a,b){var c=Nc([this.O],a,_.x(b,this));_.J(this.O,Mc(a),c,void 0);this.o[a]||(this.o[a]=new Vb);this.o[a].set(b,c)};_.h.unlistenOnContainer=function(a,b){var c;this.o[a]&amp;&amp;this.o[a].oa(b)?(c=this.o[a].get(b),this.o[a].remove(b)):c=null;c&amp;&amp;Wb(this.O,Mc(a),c,void 0)};_.h.listenOnObject=function(a,b){_.Ib(this,a,b)};_.h.unlistenOnObject=function(a,b){Pb(this,a,b)};_.h.fireOnObject=function(a,b){b.fi=this;_.yb(this)?Ub(this,a,!1,b):Sb(this,a,!1,b)};_.h.registerFinalizeCallback=function(a){this.wf?a():this.me.push(a)};_.h.registerWidget=function(a,b){0&lt;=Ra(this.ga,a)||(this.ga[b]=a,a.reset(this))};var Ld=function(a){a.O.style.display=&quot;none&quot;;for(var b=0;b&lt;a.ga.length;b++)a.ga[b]&amp;&amp;a.ga[b].hide(a)};_.U.prototype.resetAll=function(){this.O.style.display=this.Mb;for(var a=0;a&lt;this.ga.length;a++)this.ga[a]&amp;&amp;this.ga[a].reset(this)};_.U.prototype.showOnly=function(a){var b=this;Ld(this);Md(this,a,function(a){a.show(b)})};var Md=function(a,b,c){a.ga[b]&amp;&amp;c(a.ga[b])};_.h=_.U.prototype;_.h.isDirectContent=function(){var a=this.g.g[14];return null!=a?a:!1};_.h.Tb=l(10);_.h.getEscapedQemQueryId=function(){return this.g.getEscapedQemQueryId()};_.h.getEscapedGwsQueryId=function(){return this.g.getEscapedGwsQueryId()};_.h.getWebProperty=function(){return this.g.getWebProperty()};_.h.ta=function(){return this.g.ta()};_.h.sa=function(){return this.g.sa()};_.h.Xb=l(0);_.h.Ub=l(2);_.h.Wb=l(4);_.h.Vb=l(6);_.h.kb=l(8);_.h.getSerializedAdSlotData=function(){return this.g.Y()};_.h.getAdsLength=function(){return this.G.length};_.h.getAd=function(a){return 0&lt;=a&amp;&amp;a&lt;this.G.length&amp;&amp;this.G[a].getIndex()==a?this.G[a]:null};_.U.prototype.forEachAd=_.U.prototype.forEachAd;_.U.prototype.addAd=_.U.prototype.yc;_.U.prototype.finalize=_.U.prototype.mf;_.U.prototype.registerFinalizeCallback=_.U.prototype.registerFinalizeCallback;_.U.prototype.listenOnContainer=_.U.prototype.listenOnContainer;_.U.prototype.unlistenOnContainer=_.U.prototype.unlistenOnContainer;_.U.prototype.registerWidget=_.U.prototype.registerWidget;_.U.prototype.resetAll=_.U.prototype.resetAll;_.U.prototype.showOnly=_.U.prototype.showOnly;_.U.prototype.isDirectContent=_.U.prototype.isDirectContent;_.U.prototype.getEscapedQemQueryId=_.U.prototype.getEscapedQemQueryId;_.U.prototype.getEscapedGwsQueryId=_.U.prototype.getEscapedGwsQueryId;_.U.prototype.getWebProperty=_.U.prototype.getWebProperty;_.U.prototype.getAdsLength=_.U.prototype.getAdsLength;_.U.prototype.getAd=_.U.prototype.getAd;_.U.prototype.listenOnObject=_.U.prototype.listenOnObject;_.U.prototype.unlistenOnObject=_.U.prototype.unlistenOnObject;_.U.prototype.fireOnObject=_.U.prototype.fireOnObject;_.U.prototype.getSerializedAdSlotData=_.U.prototype.getSerializedAdSlotData;_.r(&quot;buildAdSlot&quot;,_.Kd,void 0);var Od=function(a,b,c){_.T.call(this,a,b,c);for(a=0;a&lt;Nd.length;a++)this.J(Nd[a])};_.z(Od,_.T);var Nd=[Q.la,Q.URL,Q.ia,Q.ha,Q.FAVICON,Q.ka];Od.prototype.de=function(a){return _.Fd(this,a)||4==a};var Pd=function(a){var b=&quot;&quot;;_.Xb(a,function(a,d){if(0===a||a)b+=&quot;&amp;&quot;+ba(d)+&quot;=&quot;+ba(a)});return b},Qd=&quot;UNKNOWN&quot;,Rd=&quot;UNKNOWN&quot;,Sd=null,Td=function(a,b){var c=&quot;//pagead2.googlesyndication.com&quot;+(&quot;/pagead/gen_204?id=glaurung&quot;+Pd({gqid:Qd,qqid:Rd,com:a})+Pd(b)),c=c.substring(0,2E3);_.K(_.M,c,void 0)},V={la:&quot;ad-title&quot;,URL:&quot;ad-url&quot;,ia:&quot;ad-body&quot;,ha:&quot;ad-button&quot;,FAVICON:&quot;ad-favicon&quot;,ka:&quot;ad-image&quot;,Db:&quot;ad-price&quot;,Fb:&quot;ad-reviews&quot;,Cb:&quot;ad-app-store-image&quot;,Eb:&quot;ad-promo-headline&quot;,uc:&quot;ad-app-icon&quot;},Ud=function(a,b,c){var d=a.g,e;e=(e=d.g[15])?new wa(e):Ea;var f;if(f=e)e=e.g[0],f=null!=e?e:!1;f&amp;&amp;(V={la:&quot;title-link&quot;,URL:&quot;url-link&quot;,ia:&quot;body&quot;,ha:&quot;button-link&quot;,FAVICON:&quot;favicon-link&quot;,ka:&quot;image-link&quot;,Db:&quot;price&quot;,Fb:&quot;reviews&quot;,Cb:&quot;app-store&quot;,Eb:&quot;promo-headline&quot;,uc:&quot;app-icon&quot;});e=b.getElementById(&quot;adunit&quot;);b=b.getElementById(&quot;ads&quot;);if(!e||!b)return 1;e.style.width=d.ta()+&quot;px&quot;;e.style.height=d.sa()+&quot;px&quot;;try{c(b,a)}catch(g){return za(d)&amp;&amp;(Sd=g),2}for(c=0;c&lt;_.ka(d.g);c++){e=Ia(d,c);b=&quot;taw&quot;+e.getIndex();f=window.document.getElementById(b);if(!f)return 3;var k=V,m={};if(f){m[0]=[f];var t=void 0;for(t in k){var E=Q[t],va=m,$e=_.Ec(null,k[t],f);va[E]=[];for(var Uc=0;Uc&lt;$e.length;Uc++)va[E].push($e[Uc])}e=new Od(m,f,e)}else e=null;if(!e)return 1;window.registerAd&amp;&amp;window.registerAd(e,b);a.yc(e)}return 0};_.r(&quot;buildGlaurungAds&quot;,function(a,b,c){var d=(new Date).getTime(),e=1,f=!1;Sd=null;try{f=za(a.g),Qd=a.getEscapedGwsQueryId(),Rd=a.getEscapedQemQueryId(),e=Ud(a,b,c)}catch(g){f&amp;&amp;(Sd=g),e=1}a=(new Date).getTime();b={};b.r=e;b.d=a-d;Td(&quot;bridge&quot;,b);return e},void 0);_.r(&quot;glaurungError&quot;,function(){return Sd},void 0);_.r(&quot;glaurungBridge.log&quot;,Td,void 0);_.r(&quot;glaurungBridge.getGlaurungAdPieceClassNames&quot;,function(){return{TITLE:V.la,URL:V.URL,BODY:V.ia,ACTION_BUTTON:V.ha,FAVICON:V.FAVICON,IMAGE_EXTENSION:V.ka,PRICE:V.Db,REVIEWS:V.Fb,APP_STORE_IMAGE:V.Cb,PROMO_HEADLINE:V.Eb,APP_ICON:V.uc}},void 0);var Vd=function(a,b,c,d,e){var f=[];f[0]=[c];f[15]=[b];d&amp;&amp;(f[4]=d);e&amp;&amp;(f[9]=[e]);(b=window.document.getElementById(&quot;button_15click_anchor&quot;))&amp;&amp;f[15].push(b);(b=window.document.getElementById(&quot;abgc&quot;))&amp;&amp;(f[27]=[b]);(b=window.document.getElementById(&quot;cbc&quot;))&amp;&amp;(f[28]=[b]);_.T.call(this,f,c,a);this.J(15);this.J(4);this.J(9)};_.z(Vd,_.T);_.r(&quot;buildImageAd&quot;,function(a,b){if(0&gt;b||b&gt;=_.ka(a.g.g))return null;var c;c=Ia(a.g,b);var d=_.L.getElementById(&quot;google_image_div&quot;),e=_.L.getElementById(&quot;aw0&quot;);if(d&amp;&amp;e){for(var f=_.Fc(&quot;google_image_inside_det_button&quot;),g=[],k=0;k&lt;f.length;k++)g.push(f[k]);f=_.L.getElementById(&quot;google_image_outside_det_button&quot;);c=g.length&amp;&amp;f?new Vd(c,e,d,g,f):new Vd(c,e,d)}else c=null;return c},void 0);var Wd=function(a,b){var c={};c[0]=[b];_.T.call(this,c,b,a);this.J(0)};_.z(Wd,_.T);_.r(&quot;buildRichmediaAd&quot;,function(a,b){if(0&gt;b||b&gt;=_.ka(a.g.g))return null;var c=Ia(a.g,b),d=_.L.getElementById(&quot;google_richmedia_div&quot;);return d?new Wd(c,d):null},void 0);var Yd=function(a,b,c){_.T.call(this,a,b,c);for(a=0;a&lt;Xd.length;a++)this.J(Xd[a])};_.z(Yd,_.T);var Xd=[Q.la,Q.URL,Q.ha,Q.xc,Q.wc,Q.FAVICON,Q.ia,Q.vc,Q.ka,Q.tc,Q.xd],Zd={la:&quot;headline&quot;,ia:&quot;description&quot;,ha:&quot;button&quot;,Me:&quot;logo&quot;,ka:&quot;product&quot;};_.r(&quot;buildTemplateAd&quot;,function(a){var b;a=new _.sa(a);var c={},d=window.document.getElementById(&quot;adContent&quot;);if(d){c[0]=[d];for(b in Zd){var e=Q[b],f=c,g=_.Ec(null,Zd[b],d);f[e]=[];for(var k=0;k&lt;g.length;k++)f[e].push(g[k])}b=new Yd(c,d,a)}else b=null;return b},void 0);var $d=function(a,b){var c=void 0;if(0&gt;c||void 0==c){c=null;try{c=a.cssRules||a.rules}catch(d){if(15==d.code)throw d.styleSheet=a,d;}c=c.length}if(a.insertRule)a.insertRule(b,c);else{var e=/^([^\{]+)\{([^\{]+)\}/.exec(b);if(3==e.length)a.addRule(e[1],e[2],c);else throw Error(&quot;Your CSSRule appears to be ill-formatted.&quot;);}};var be=function(a){var b;a:{var c=a.match(ae);if(c){b=Number(c[1]);var d=Number(c[2]),c=Number(c[3]);if(0&lt;=b&amp;&amp;255&gt;=b&amp;&amp;0&lt;=d&amp;&amp;255&gt;=d&amp;&amp;0&lt;=c&amp;&amp;255&gt;=c){b=[b,d,c];break a}}b=[]}if(!b.length)throw Error(a+&quot; is not a valid RGB color&quot;);return b},ce=function(a){var b=a[0]/255,c=a[1]/255;a=a[2]/255;var d=Math.max(b,c,a),e=Math.min(b,c,a),f=0,g=0,k=.5*(d+e);d!=e&amp;&amp;(d==b?f=60*(c-a)/(d-e):d==c?f=60*(a-b)/(d-e)+120:d==a&amp;&amp;(f=60*(b-c)/(d-e)+240),g=0&lt;k&amp;&amp;.5&gt;=k?(d-e)/(2*k):(d-e)/(2-2*k));return[Math.round(f+360)%360,g,k]},ae=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;var ee,de,he,ie,ge;_.fe=function(a){var b=[];de(new ee,a,b);return b.join(&quot;&quot;)};ee=function(){this.jd=void 0};de=function(a,b,c){if(null==b)c.push(&quot;null&quot;);else{if(&quot;object&quot;==typeof b){if(_.u(b)){var d=b;b=d.length;c.push(&quot;[&quot;);for(var e=&quot;&quot;,f=0;f&lt;b;f++)c.push(e),e=d[f],de(a,a.jd?a.jd.call(d,String(f),e):e,c),e=&quot;,&quot;;c.push(&quot;]&quot;);return}if(b instanceof String||b instanceof Number||b instanceof Boolean)b=b.valueOf();else{c.push(&quot;{&quot;);f=&quot;&quot;;for(d in b)Object.prototype.hasOwnProperty.call(b,d)&amp;&amp;(e=b[d],&quot;function&quot;!=typeof e&amp;&amp;(c.push(f),ge(d,c),c.push(&quot;:&quot;),de(a,a.jd?a.jd.call(b,d,e):e,c),f=&quot;,&quot;));c.push(&quot;}&quot;);return}}switch(typeof b){case &quot;string&quot;:ge(b,c);break;case &quot;number&quot;:c.push((0,window.isFinite)(b)&amp;&amp;!(0,window.isNaN)(b)?b:&quot;null&quot;);break;case &quot;boolean&quot;:c.push(b);break;case &quot;function&quot;:break;default:throw Error(&quot;Unknown type: &quot;+typeof b);}}};he={'&quot;':'\\&quot;',&quot;\\&quot;:&quot;\\\\&quot;,&quot;/&quot;:&quot;\\/&quot;,&quot;\b&quot;:&quot;\\b&quot;,&quot;\f&quot;:&quot;\\f&quot;,&quot;\n&quot;:&quot;\\n&quot;,&quot;\r&quot;:&quot;\\r&quot;,&quot;\t&quot;:&quot;\\t&quot;,&quot;\x0B&quot;:&quot;\\u000b&quot;};ie=/\uffff/.test(&quot;\uffff&quot;)?/[\\\&quot;\x00-\x1f\x7f-\uffff]/g:/[\\\&quot;\x00-\x1f\x7f-\xff]/g;ge=function(a,b){b.push('&quot;',a.replace(ie,function(a){var b=he[a];b||(b=&quot;\\u&quot;+(a.charCodeAt(0)|65536).toString(16).substr(1),he[a]=b);return b}),'&quot;')};var je=function(a){this.pa=a;this.X=[]},ke=function(a,b){try{var c=ce(be(a)),d=ce(be(b)),e,f;e=.5&gt;=c[2]?c[1]*c[2]:c[1]*(1-c[2]);f=.5&gt;=d[2]?d[1]*d[2]:d[1]*(1-d[2]);return.15&lt;=(c[2]-d[2])*(c[2]-d[2])+e*e+f*f-2*e*f*Math.cos(2*(c[0]/360-d[0]/360)*Math.PI)}catch(g){return!1}},le=function(a,b){var c=(0,window.parseFloat)(a),d=(0,window.parseFloat)(b);return 0&lt;d?c/d:1E6},me=function(a,b){a||(a=0);b||(b=0);return Ya(a,b)},ne=function(a,b){for(var c=0;c&lt;a.X.length;++c)if(Ua(a.pa,function(a){return b[a]==this.X[c].style[a]},a))return c;return-1},oe=function(a,b,c){for(var d={},e=0;e&lt;a.pa.length;++e){var f=a.pa[e];d[f]=b[f]}b={style:d,stats:c};d=ne(a,d);0&lt;=d?-1==a.Ze(b,a.X[d])&amp;&amp;(a.X[d].stats=c):a.X.push(b)};je.prototype.log=function(a){for(var b=0;b&lt;this.X.length&amp;&amp;10&gt;b;++b)_.Cd(&quot;auto_css&quot;,{style:_.fe(this.X[b]),rank:b,qid:a},1)};je.prototype.sort=function(){var a=(0,_.w)(this.Ze,this);this.X.sort(a||Ya);for(var a=[],b=0;b&lt;this.X.length;++b){for(var c=&quot;&quot;,d=0;d&lt;this.pa.length;++d)var e=this.pa[d],c=c+(e+&quot;: &quot;+this.X[b].style[e]+&quot; !important; &quot;);a.push(c)}return a};je.prototype.Ze=function(a,b){return this.compare(a.stats,b.stats)};je.prototype.dd=function(a,b){oe(this,a,b)};var pe=function(){je.call(this,&quot;color font-family font-size font-weight line-height letter-spacing display max-width&quot;.split(&quot; &quot;))};_.z(pe,je);pe.prototype.dd=function(a,b,c){if(0!=b[1]){a.display=&quot;inline-block&quot;;a[&quot;font-family&quot;]+=&quot;, &quot;+c[&quot;font-family&quot;];var d=le(a[&quot;font-size&quot;],c[&quot;font-size&quot;]);if(!(.5&gt;d||1&lt;d&amp;&amp;.15&gt;=b[2])){if(1&lt;=d&amp;&amp;0&lt;c.height){var d=(0,window.parseFloat)(c.height),e=c.text,f=(0,window.parseFloat)(a[&quot;font-size&quot;]),g=window.document.createElement(&quot;div&quot;);g.style.width=Math.floor((0,window.parseFloat)(c.width))+&quot;px&quot;;for(var k=window.document.createElement(&quot;span&quot;),m=0;m&lt;this.pa.length;++m){var t=this.pa[m];k.style[t]=a[t]}k.style[&quot;line-height&quot;]=&quot;normal&quot;;k.style.display=&quot;inline-block&quot;;k.insertAdjacentHTML(&quot;afterbegin&quot;,e);g.appendChild(k);for(window.document.body.appendChild(g);0&lt;f;){k.style[&quot;font-size&quot;]=f+&quot;px&quot;;if((0,window.parseFloat)(window.getComputedStyle(k).height)&lt;=d)break;f--}window.document.body.removeChild(g);d=f+&quot;px&quot;;0&lt;(0,window.parseFloat)(d)?(a[&quot;font-size&quot;]=d,a[&quot;line-height&quot;]=&quot;normal&quot;):a[&quot;font-size&quot;]=c[&quot;font-size&quot;]}else 1&lt;d&amp;&amp;(a[&quot;font-size&quot;]=c[&quot;font-size&quot;]);ke(a.color,c.bgcolor)&amp;&amp;0!=(0,window.parseFloat)(a[&quot;line-height&quot;])&amp;&amp;oe(this,a,b)}}};pe.prototype.compare=function(a,b){var c=me(b[1]-b[5],a[1]-a[5]);return 0!=c?c:me(b[1],a[1])};var qe=function(){je.call(this,&quot;color font-family font-size font-weight letter-spacing line-height text-transform text-shadow&quot;.split(&quot; &quot;))};_.z(qe,je);qe.prototype.dd=function(a,b,c){if(0!=b[1]){a[&quot;font-family&quot;]+=&quot;, &quot;+c[&quot;font-family&quot;];var d=le(a[&quot;font-size&quot;],c[&quot;font-size&quot;]);.6&gt;d&amp;&amp;3&lt;b[6]||1.2&lt;d||!ke(a.color,c.bgcolor)||(a[&quot;line-height&quot;]=&quot;normal&quot;,oe(this,a,b))}};qe.prototype.compare=function(a,b){var c=me(a[6],b[6]);return 0!=c?c:me(b[1],a[1])};var re=function(){je.call(this,[&quot;background-color&quot;])};_.z(re,je);re.prototype.dd=function(a,b,c){if(0!=b[1]){var d;if(d=a[&quot;background-color&quot;])d=a[&quot;background-color&quot;],d=!(&quot;rgba(0, 0, 0, 0)&quot;==d||&quot;transparent&quot;==d);d?b[4]=1:a[&quot;background-color&quot;]=a.color;ke(a[&quot;background-color&quot;],c.bgcolor)&amp;&amp;oe(this,a,b)}};re.prototype.compare=function(a,b){if(0&lt;a[1]&amp;&amp;0==b[1]||0&lt;a[1]&amp;&amp;0==b[1])return-1;var c=me(b[4],a[4]);if(0!=c)return c;c=me(b[3],a[3]);return 0!=c?c:me(b[1],a[1])};_.r(&quot;buildAutoCssBodySorter&quot;,function(){return new pe},void 0);_.r(&quot;buildAutoCssTitleSorter&quot;,function(){return new qe},void 0);_.r(&quot;buildAutoCssButtonSorter&quot;,function(){return new re},void 0);var se=function(a,b,c,d){Hd.call(this,a,b,c);(!_.D||_.F(&quot;10&quot;))&amp;&amp;window.getComputedStyle&amp;&amp;window.postMessage&amp;&amp;(this.hide(),this.nc=[],this.Ed={},this.md={},this.le={},a=window.document,b=a.createElement(&quot;STYLE&quot;),b.type=&quot;text/css&quot;,a.getElementsByTagName(&quot;HEAD&quot;)[0].appendChild(b),b.styleSheet?b.styleSheet.cssText=&quot;&quot;:b.appendChild(a.createTextNode(&quot;&quot;)),this.Yf=b.sheet,this.nf={},this.df=this.$f=!1,this.i=d)};_.z(se,Hd);se.prototype.Qf=function(){var a=window,b=(0,_.w)(se.prototype.eh,this);_.J(a,&quot;message&quot;,b,void 0);window.setTimeout((0,_.w)(this.hh,this),3E3);a={};a.auto_css_request=window.name;window.top.postMessage(a,&quot;*&quot;)};se.prototype.hh=function(){this.$f=!0;this.reset()};se.prototype.eh=function(a){if(a&amp;&amp;(!this.$f||this.df)&amp;&amp;(a.data.auto_css_font_css&amp;&amp;$d(this.Yf,a.data.auto_css_font_css),a.data.auto_css_font_sheet&amp;&amp;te(this,a.data.auto_css_font_sheet),a.data.auto_css_styles)){a=a.data.auto_css_styles;for(var b=0;b&lt;this.nc.length;++b){var c=this.nc[b];if(this.has(c)){var d=this.Ed[c],e;e=c;var f={},g=this.getComputedStyle(e);g&amp;&amp;(f.bgcolor=Ed(this,e),f[&quot;font-size&quot;]=g[&quot;font-size&quot;],f[&quot;font-family&quot;]=g[&quot;font-family&quot;],f.text=this.tf(e),this.reset(),e=this.getBoundingClientRect(e),f.height=e.height,f.width=e.width,this.hide());e=f;for(f=0;f&lt;a.length;++f){g=a[f];if(g.style[&quot;font-family&quot;]){var k=g.style[&quot;font-family&quot;].split(&quot;,&quot;)[0];a:for(var m=0;2&gt;m;m++){var t=&quot;'\&quot;&quot;.charAt(m);if(k.charAt(0)==t&amp;&amp;k.charAt(k.length-1)==t){k=k.substring(1,k.length-1);break a}}k=(0,window.encodeURIComponent)(String(k));k=&quot;http://fonts.googleapis.com/css?family=&quot;+k;k+=&quot;|Lora&quot;;te(this,k)}d.dd(g.style,g.stats,e)}e=d.sort();for(f=this.le[c]=0;f&lt;e.length;++f)$d(this.Yf,&quot;.&quot;+ue(c,f)+&quot;{ &quot;+e[f]+&quot; }&quot;),this.le[c]++;this.modifyCssClass(c,ue(c,this.md[c]));d.log(this.i.getEscapedQemQueryId())}}this.reset()}};var te=function(a,b){if(!a.nf[b]){if(&quot;http:&quot;!=_.M.location.protocol&amp;&amp;0==b.indexOf(&quot;http://&quot;))if(-1&lt;b.indexOf(&quot;fonts.googleapis.com&quot;))b=b.replace(&quot;http://&quot;,&quot;https://&quot;);else return;var c=window.document.createElement(&quot;link&quot;);c.href=b;c.rel=&quot;stylesheet&quot;;c.type=&quot;text/css&quot;;window.document.head.appendChild(c);a.nf[b]=!0}},ue=function(a,b){return-1==b?&quot;&quot;:&quot;auto-css-&quot;+a+&quot;-&quot;+b},ve=function(a,b,c,d){c&amp;&amp;(a.nc.push(b),a.Ed[b]=c,a.md[b]=d)};se.prototype.Eg=function(a,b,c){var d=this.md[a];b=d+1;b&gt;=this.le[a]&amp;&amp;(b=-1);this.md[a]=b;this.modifyCssClass(a,ue(a,d),!0);this.modifyCssClass(a,ue(a,b));window.console.log(&quot;Start Style: &quot;,b);d=this.Ed[a];a=this.getComputedStyle(a);for(var e=0;e&lt;d.pa.length;++e){var f=d.pa[e];window.console.log(f,&quot;: &quot;,a[f])}0&lt;=b&amp;&amp;window.console.log(d.X[b].stats);c.stopImmediatePropagation();c.preventDefault();window.console.log(&quot;End Style: &quot;,b)};_.r(&quot;buildTextAd&quot;,function(a,b){var c=a.g;if(!(0&gt;b||b&gt;=_.ka(c.g))){var d=null,d=Ga(c).g[0];if(null!=d&amp;&amp;d){var e=a.g;if(0&gt;b||b&gt;=_.ka(e.g))d=null;else{var d=Ia(a.g,b),f=window.document.getElementById(&quot;taw&quot;+b);if(f)var g=Jd(f),d=new se(g,f,d,a);else d=null;if(d){e=Ga(e);f=e.g[2];ve(d,1,new qe,null!=f?f:0);f=e.g[3];ve(d,2,new pe,null!=f?f:0);f=e.g[4];ve(d,3,new pe,null!=f?f:0);f=e.g[5];ve(d,4,new re,null!=f?f:0);f=e.g[1];if(null!=f&amp;&amp;f)for(f=d,f.df=!0,g=0;g&lt;f.nc.length;g++)f.listen(f.nc[g],&quot;click&quot;,(0,_.w)(f.Eg,f));f=e.g[6];e=d;f=null!=f?f:0;0&lt;f?window.setTimeout((0,_.w)(e.Qf,e),f):e.Qf()}else d=null}}else 0&gt;b||b&gt;=_.ka(a.g.g)?d=null:(d=Ia(a.g,b),(e=window.document.getElementById(&quot;taw&quot;+b))?(f=Jd(e),d=new Hd(f,e,d)):d=null);d&amp;&amp;(window.registerAd&amp;&amp;window.registerAd(d,&quot;taw&quot;+b),a.yc(d),c=Ia(c,b),e=c.g[11],null!=e&amp;&amp;e&amp;&amp;window.registerAdPing&amp;&amp;window.registerAdPing(d),null!=Pa(c).g[2]&amp;&amp;window.init_ctc&amp;&amp;(e=Pa(c),null!=e.g[1]?(f=e.g[1],window.init_ctc_gv(d,e.Jc(),null!=f?f:&quot;&quot;,Qa(e))):window.init_ctc(d,e.Jc(),Qa(e))),c=c.g[10],null!=c&amp;&amp;c&amp;&amp;window.initAppPromo&amp;&amp;window.initAppPromo(d))}},void 0);_.we=function(a){if(a.classList)return a.classList;a=a.className;return _.v(a)&amp;&amp;a.match(/\S+/g)||[]};_.xe=function(a,b){var c;a.classList?c=a.classList.contains(b):(c=_.we(a),c=0&lt;=Ra(c,b));return c};_.ye=function(a,b){a.classList?a.classList.add(b):_.xe(a,b)||(a.className+=0&lt;a.className.length?&quot; &quot;+b:b)};})(window.hydra=window.hydra||{});&lt;/script&gt;&lt;script&gt;buildAdSlot([[[1,0,300,250,null,&quot;http://googleads.g.doubleclick.net/pagead/conversion/?ai=CNT_6LTScVdPLOYrNbdnYvPgJhoiCsweOgPvmkAKY89fmTxABIPzf6Blgu76ug9AKoAH0x_vQA8gBAuACAKgDAcgDmQSqBJQBT9DL-qOfzGnsTUoGNnWzSQ6fARu0WFEA_t9gY4N6fEgdVcyn-8GXtKEkUmpWNcUXJiilGJaN6jbr7QmdhhZRFh9gN-YSYZX2AvrXsdICJxS_cpYIc0PL0PLd6ghGVAwtS_oOc4p-jp0erzdbbTEZC-SpHTLnLiJXai3ckAY1SSJBU1lqRUVMaBDBb85PjyNZTfCBLuAEAYgGAaAGAoAHxpSGMagHpr4b2AcB\u0026sigh=54WMuf0m69A&quot;]],300,250,0,0,null,&quot;CJOWyNnrycYCFYpmGwodWSwPnw&quot;,&quot;&quot;,null,&quot;ca-pub-2049948180079264&quot;,300,250,0,&quot;_top&quot;,null,null,0,&quot;http://pagead2.googlesyndication.com&quot;,null,0,0,1510907900]);&lt;/script&gt;&lt;script&gt;&lt;/script&gt;&lt;script&gt;var ad = buildImageAd(adSlot, 0);adSlot.addAd(ad);adSlot.finalize('google_image_div');&lt;/script&gt;&lt;script&gt;(function(_){var ki=function(){this.mc=[];this.ze={}};ki.prototype.report=function(){for(var a=[],b=0;b&lt;this.mc.length;++b)a.push(li(this.mc[b]));return a};var li=function(a){var b=[a.key,a.value];_.q(a.Vd)&amp;&amp;b.push(a.Vd);return b},mi={};var ni={1:0,2:1,4:8,5:6,8:11,9:2,6:9,3:7,20:12},oi=function(a,b,c){var d=ni[b];&quot;true&quot;===c.getAttribute(b,&quot;data-is-action-button-expanded&quot;)&amp;&amp;(d=12);(0,window.ja)(a,d)},pi=function(a){return function(){a()}},qi=function(a){return a.report()};_.r(&quot;registerAd&quot;,function(a,b){_.q(mi[b])||(mi[b]=new ki);a.registerClickUrlModifier(_.x(qi,mi[b]));for(var c=[1,2,4,8,6,9,5,3,20],d=0;d&lt;c.length;d++)a.listen(c[d],&quot;mousedown&quot;,pi(_.x(window.st,b))),a.listen(c[d],&quot;click&quot;,_.x(oi,b));a.has(9)||(a.listen(15,&quot;click&quot;,_.x(oi,b)),a.listen(15,&quot;mousedown&quot;,pi(_.x(window.st,b))));a.listen(0,&quot;mouseover&quot;,pi(_.x(window.ss,b)));a.listen(0,&quot;focus&quot;,pi(_.x(window.ss,b)));a.listen(1,&quot;focus&quot;,pi(_.x(window.ss,b)));a.listen(1,&quot;mouseover&quot;,pi(_.x(window.ss,b)));return a},void 0);_.r(&quot;css&quot;,function(a,b,c,d,e){a=mi[a];_.q(a)&amp;&amp;(!_.q(a.ze[b])||d?(d=a.mc.length,a.ze[b]=d,a.mc[d]={key:b,value:c,Vd:e}):(b=a.mc[a.ze[b]],b.value=c,b.Vd=e))},void 0);})(window.hydra=window.hydra||{});registerAd(ad, 'aw0');&lt;/script&gt;&lt;iframe scrolling=&quot;no&quot; frameborder=0 height=0 width=0 src=&quot;http://cm.g.doubleclick.net/push?client=ca-pub-2049948180079264&quot; style=&quot;position:absolute&quot;&gt;&lt;/iframe&gt;&lt;script type=&quot;text/javascript&quot;&gt;(function(){var h=this,k=function(a){var c=typeof a;if(&quot;object&quot;==c)if(a){if(a instanceof Array)return&quot;array&quot;;if(a instanceof Object)return c;var b=Object.prototype.toString.call(a);if(&quot;[object Window]&quot;==b)return&quot;object&quot;;if(&quot;[object Array]&quot;==b||&quot;number&quot;==typeof a.length&amp;&amp;&quot;undefined&quot;!=typeof a.splice&amp;&amp;&quot;undefined&quot;!=typeof a.propertyIsEnumerable&amp;&amp;!a.propertyIsEnumerable(&quot;splice&quot;))return&quot;array&quot;;if(&quot;[object Function]&quot;==b||&quot;undefined&quot;!=typeof a.call&amp;&amp;&quot;undefined&quot;!=typeof a.propertyIsEnumerable&amp;&amp;!a.propertyIsEnumerable(&quot;call&quot;))return&quot;function&quot;}else return&quot;null&quot;;else if(&quot;function&quot;==c&amp;&amp;&quot;undefined&quot;==typeof a.call)return&quot;object&quot;;return c},n=function(a){return&quot;string&quot;==typeof a},aa=function(a,c){var b=Array.prototype.slice.call(arguments,1);return function(){var c=b.slice();c.push.apply(c,arguments);return a.apply(this,c)}},ba=Date.now||function(){return+new Date},p=function(a,c){var b=a.split(&quot;.&quot;),d=h;b[0]in d||!d.execScript||d.execScript(&quot;var &quot;+b[0]);for(var e;b.length&amp;&amp;(e=b.shift());)b.length||void 0===c?d=d[e]?d[e]:d[e]={}:d[e]=c};var q=function(a,c,b,d,e){if(e)b=a+(&quot;&amp;&quot;+c+&quot;=&quot;+b);else{var f=&quot;&amp;&quot;+c+&quot;=&quot;,g=a.indexOf(f);0&gt;g?b=a+f+b:(g+=f.length,f=a.indexOf(&quot;&amp;&quot;,g),b=0&lt;=f?a.substring(0,g)+b+a.substring(f):a.substring(0,g)+b)}return 2E3&lt;b.length?void 0!==d?q(a,c,d,void 0,e):a:b};var ca=function(){var a=/[&amp;\?]exk=([^&amp; ]+)/.exec(t.location.href);return a&amp;&amp;2==a.length?a[1]:null};var da=function(a){var c=a.toString();a.name&amp;&amp;-1==c.indexOf(a.name)&amp;&amp;(c+=&quot;: &quot;+a.name);a.message&amp;&amp;-1==c.indexOf(a.message)&amp;&amp;(c+=&quot;: &quot;+a.message);if(a.stack){a=a.stack;var b=c;try{-1==a.indexOf(b)&amp;&amp;(a=b+&quot;\n&quot;+a);for(var d;a!=d;)d=a,a=a.replace(/((https?:\/..*\/)[^\/:]*:\d+(?:.|\n)*)\2/,&quot;$1&quot;);c=a.replace(/\n */g,&quot;\n&quot;)}catch(e){c=b}}return c},u=function(a,c){a.google_image_requests||(a.google_image_requests=[]);var b=a.document.createElement(&quot;img&quot;);b.src=c;a.google_image_requests.push(b)};var v=document,t=window;var ea=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,&quot;&quot;)},fa=function(a,c){return a&lt;c?-1:a&gt;c?1:0};var w=null,ga=function(a,c){for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&amp;&amp;c.call(null,a[b],b,a)};function x(a){return&quot;function&quot;==typeof encodeURIComponent?encodeURIComponent(a):escape(a)}var ha=function(){if(!v.body)return!1;if(!w){var a=v.createElement(&quot;iframe&quot;);a.style.display=&quot;none&quot;;a.id=&quot;anonIframe&quot;;w=a;v.body.appendChild(a)}return!0},ia={};var ja=!0,ka={},na=function(a,c,b,d){var e=la,f,g=ja;try{f=c()}catch(l){try{var r=da(l);c=&quot;&quot;;l.fileName&amp;&amp;(c=l.fileName);var G=-1;l.lineNumber&amp;&amp;(G=l.lineNumber);g=e(a,r,c,G,b)}catch(m){try{var B=da(m);a=&quot;&quot;;m.fileName&amp;&amp;(a=m.fileName);b=-1;m.lineNumber&amp;&amp;(b=m.lineNumber);la(&quot;pAR&quot;,B,a,b,void 0,void 0)}catch(Ja){ma({context:&quot;mRE&quot;,msg:Ja.toString()+&quot;\n&quot;+(Ja.stack||&quot;&quot;)},void 0)}}if(!g)throw l;}finally{if(d)try{d()}catch(Sb){}}return f},la=function(a,c,b,d,e,f){var g={};if(e)try{e(g)}catch(l){}g.context=a;g.msg=c.substring(0,512);b&amp;&amp;(g.file=b);0&lt;d&amp;&amp;(g.line=d.toString());g.url=v.URL.substring(0,512);g.ref=v.referrer.substring(0,512);oa(g);ma(g,f);return ja},ma=function(a,c){try{if(Math.random()&lt;(c||.01)){var b=&quot;/pagead/gen_204?id=jserror&quot;+pa(a),d=&quot;http&quot;+(&quot;http:&quot;==t.location.protocol?&quot;&quot;:&quot;s&quot;)+&quot;://pagead2.googlesyndication.com&quot;+b,d=d.substring(0,2E3);u(t,d)}}catch(e){}},oa=function(a){var c=a||{};ga(ka,function(a,d){c[d]=t[a]})},y=function(a,c,b,d,e){return function(){var f=arguments;return na(a,function(){return c.apply(b,f)},d,e)}},pa=function(a){var c=&quot;&quot;;ga(a,function(a,d){if(0===a||a)c+=&quot;&amp;&quot;+d+&quot;=&quot;+x(a)});return c};var z=Array.prototype,qa=z.indexOf?function(a,c,b){return z.indexOf.call(a,c,b)}:function(a,c,b){b=null==b?0:0&gt;b?Math.max(0,a.length+b):b;if(n(a))return n(c)&amp;&amp;1==c.length?a.indexOf(c,b):-1;for(;b&lt;a.length;b++)if(b in a&amp;&amp;a[b]===c)return b;return-1},ra=z.map?function(a,c,b){return z.map.call(a,c,b)}:function(a,c,b){for(var d=a.length,e=Array(d),f=n(a)?a.split(&quot;&quot;):a,g=0;g&lt;d;g++)g in f&amp;&amp;(e[g]=c.call(b,f[g],g,a));return e};var sa=function(a,c){for(var b in a)c.call(void 0,a[b],b,a)},ta=function(a){var c=arguments.length;if(1==c&amp;&amp;&quot;array&quot;==k(arguments[0]))return ta.apply(null,arguments[0]);for(var b={},d=0;d&lt;c;d++)b[arguments[d]]=!0;return b};var A;a:{var ua=h.navigator;if(ua){var va=ua.userAgent;if(va){A=va;break a}}A=&quot;&quot;}var C=function(a){return-1!=A.indexOf(a)};var D=function(){return C(&quot;Opera&quot;)||C(&quot;OPR&quot;)},wa=function(){return(C(&quot;Chrome&quot;)||C(&quot;CriOS&quot;))&amp;&amp;!D()&amp;&amp;!C(&quot;Edge&quot;)};var xa=function(){return C(&quot;iPhone&quot;)&amp;&amp;!C(&quot;iPod&quot;)&amp;&amp;!C(&quot;iPad&quot;)};var ya=D(),E=C(&quot;Trident&quot;)||C(&quot;MSIE&quot;),za=C(&quot;Edge&quot;),Aa=C(&quot;Gecko&quot;)&amp;&amp;!(-1!=A.toLowerCase().indexOf(&quot;webkit&quot;)&amp;&amp;!C(&quot;Edge&quot;))&amp;&amp;!(C(&quot;Trident&quot;)||C(&quot;MSIE&quot;))&amp;&amp;!C(&quot;Edge&quot;),Ba=-1!=A.toLowerCase().indexOf(&quot;webkit&quot;)&amp;&amp;!C(&quot;Edge&quot;),Ca=function(){var a=A;if(Aa)return/rv\:([^\);]+)(\)|;)/.exec(a);if(za)return/Edge\/([\d\.]+)/.exec(a);if(E)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Ba)return/WebKit\/(\S+)/.exec(a)},Da=function(){var a=h.document;return a?a.documentMode:void 0},Ea=function(){if(ya&amp;&amp;h.opera){var a=h.opera.version;return&quot;function&quot;==k(a)?a():a}var a=&quot;&quot;,c=Ca();c&amp;&amp;(a=c?c[1]:&quot;&quot;);return E&amp;&amp;(c=Da(),c&gt;parseFloat(a))?String(c):a}(),Fa={},Ga=function(a){if(!Fa[a]){for(var c=0,b=ea(String(Ea)).split(&quot;.&quot;),d=ea(String(a)).split(&quot;.&quot;),e=Math.max(b.length,d.length),f=0;0==c&amp;&amp;f&lt;e;f++){var g=b[f]||&quot;&quot;,l=d[f]||&quot;&quot;,r=RegExp(&quot;(\\d*)(\\D*)&quot;,&quot;g&quot;),G=RegExp(&quot;(\\d*)(\\D*)&quot;,&quot;g&quot;);do{var m=r.exec(g)||[&quot;&quot;,&quot;&quot;,&quot;&quot;],B=G.exec(l)||[&quot;&quot;,&quot;&quot;,&quot;&quot;];if(0==m[0].length&amp;&amp;0==B[0].length)break;c=fa(0==m[1].length?0:parseInt(m[1],10),0==B[1].length?0:parseInt(B[1],10))||fa(0==m[2].length,0==B[2].length)||fa(m[2],B[2])}while(0==c)}Fa[a]=0&lt;=c}},Ha=h.document,Ia=Ha&amp;&amp;E?Da()||(&quot;CSS1Compat&quot;==Ha.compatMode?parseInt(Ea,10):5):void 0;var Ka=function(a,c,b){if(&quot;array&quot;==k(c))for(var d=0;d&lt;c.length;d++)Ka(a,String(c[d]),b);else null!=c&amp;&amp;b.push(&quot;&amp;&quot;,a,&quot;&quot;===c?&quot;&quot;:&quot;=&quot;,encodeURIComponent(String(c)))},La=function(a,c,b){for(b=b||0;b&lt;c.length;b+=2)Ka(c[b],c[b+1],a);return a},Ma=function(a,c){var b=2==arguments.length?La([a],arguments[1],0):La([a],arguments,1);if(b[1]){var d=b[0],e=d.indexOf(&quot;#&quot;);0&lt;=e&amp;&amp;(b.push(d.substr(e)),b[0]=d=d.substr(0,e));e=d.indexOf(&quot;?&quot;);0&gt;e?b[1]=&quot;?&quot;:e==d.length-1&amp;&amp;(b[1]=void 0)}return b.join(&quot;&quot;)};var Na={l:947190538,m:947190541,o:947190542,h:79463068,i:79463069},Oa={g:&quot;ud=1&quot;,f:&quot;ts=0&quot;,s:&quot;sc=1&quot;,c:&quot;gz=1&quot;,j:&quot;lp=1&quot;};ta(&quot;area base br col command embed hr img input keygen link meta param source track wbr&quot;.split(&quot; &quot;));if(v&amp;&amp;v.URL)var F=v.URL,ja=!(F&amp;&amp;(0&lt;F.indexOf(&quot;?google_debug&quot;)||0&lt;F.indexOf(&quot;&amp;google_debug&quot;)||0&lt;F.indexOf(&quot;#google_debug&quot;)));var H=function(a,c,b,d){b=y(d||&quot;osd_or_lidar::&quot;+c,b,void 0,void 0,void 0);a.addEventListener?a.addEventListener(c,b,!1):a.attachEvent&amp;&amp;a.attachEvent(&quot;on&quot;+c,b)},Pa=function(a,c,b){if(!(0&gt;=c)){var d=0,e=function(){a();d++;d&lt;c&amp;&amp;t.setTimeout(y(b,e,void 0,void 0,void 0),100)};e()}};var I=function(a,c){this.b=a||0;this.a=c||&quot;&quot;},J=function(a,c){a.b&amp;&amp;(c[4]=a.b);a.a&amp;&amp;(c[12]=a.a)};I.prototype.match=function(a){return(this.b||this.a)&amp;&amp;(a.b||a.a)?this.a||a.a?this.a==a.a:this.b||a.b?this.b==a.b:!1:!1};I.prototype.toString=function(){var a=&quot;&quot;+this.b;this.a&amp;&amp;(a+=&quot;-&quot;+this.a);return a};var Qa=function(){var a=K,c=[];a.b&amp;&amp;c.push(&quot;adk=&quot;+a.b);a.a&amp;&amp;c.push(&quot;exk=&quot;+a.a);return c},L=function(a){var c=[];sa(a,function(a,d){var e=x(d),f=a;n(f)&amp;&amp;(f=x(f));c.push(e+&quot;=&quot;+f)});return c.join(&quot;\n&quot;)},M=0,Ra=0,Sa=function(a){var c=0,b=t;try{if(b&amp;&amp;b.Goog_AdSense_getAdAdapterInstance)return b}catch(d){}try{for(;b&amp;&amp;5&gt;c;){if(b.google_osd_static_frame)return b;if(b.aswift_0&amp;&amp;(!a||b.aswift_0.google_osd_static_frame))return b.aswift_0;c++;b=b!=b.parent?b.parent:null}}catch(e){}return null},Ta=function(a,c,b,d,e){if(10&lt;Ra)t.clearInterval(M);else if(++Ra,t.postMessage&amp;&amp;(c.b||c.a)){var f=Sa(!0);if(f){var g={};J(c,g);g[0]=&quot;goog_request_monitoring&quot;;g[6]=a;g[16]=b;d&amp;&amp;d.length&amp;&amp;(g[17]=d.join(&quot;,&quot;));e&amp;&amp;(g[19]=e);try{var l=L(g);f.postMessage(l,&quot;*&quot;)}catch(r){}}}},Ua=function(a){var c=Sa(!1),b=!c;!c&amp;&amp;t&amp;&amp;(c=t.parent);if(c&amp;&amp;c.postMessage)try{c.postMessage(a,&quot;*&quot;),b&amp;&amp;t.postMessage(a,&quot;*&quot;)}catch(d){}};var N=function(a,c){this.width=a;this.height=c};N.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};var Va;if(!(Va=!Aa&amp;&amp;!E)){var Wa;if(Wa=E)Wa=9&lt;=Ia;Va=Wa}Va||Aa&amp;&amp;Ga(&quot;1.9.1&quot;);E&amp;&amp;Ga(&quot;9&quot;);var O=!1,P=function(a){if(a=a.match(/[\d]+/g))a.length=3};if(navigator.plugins&amp;&amp;navigator.plugins.length){var Xa=navigator.plugins[&quot;Shockwave Flash&quot;];Xa&amp;&amp;(O=!0,Xa.description&amp;&amp;P(Xa.description));navigator.plugins[&quot;Shockwave Flash 2.0&quot;]&amp;&amp;(O=!0)}else if(navigator.mimeTypes&amp;&amp;navigator.mimeTypes.length){var Ya=navigator.mimeTypes[&quot;application/x-shockwave-flash&quot;];(O=Ya&amp;&amp;Ya.enabledPlugin)&amp;&amp;P(Ya.enabledPlugin.description)}else try{var Q=new ActiveXObject(&quot;ShockwaveFlash.ShockwaveFlash.7&quot;),O=!0;P(Q.GetVariable(&quot;$version&quot;))}catch(Za){try{Q=new ActiveXObject(&quot;ShockwaveFlash.ShockwaveFlash.6&quot;),O=!0}catch($a){try{Q=new ActiveXObject(&quot;ShockwaveFlash.ShockwaveFlash&quot;),O=!0,P(Q.GetVariable(&quot;$version&quot;))}catch(ab){}}};var bb=C(&quot;Firefox&quot;),cb=xa()||C(&quot;iPod&quot;),db=C(&quot;iPad&quot;),eb=C(&quot;Android&quot;)&amp;&amp;!(wa()||C(&quot;Firefox&quot;)||D()||C(&quot;Silk&quot;)),fb=wa(),gb=C(&quot;Safari&quot;)&amp;&amp;!(wa()||C(&quot;Coast&quot;)||D()||C(&quot;Edge&quot;)||C(&quot;Silk&quot;)||C(&quot;Android&quot;))&amp;&amp;!(xa()||C(&quot;iPad&quot;)||C(&quot;iPod&quot;));var R=function(a){return(a=a.exec(A))?a[1]:&quot;&quot;};(function(){if(bb)return R(/Firefox\/([0-9.]+)/);if(E||ya)return Ea;if(fb)return R(/Chrome\/([0-9.]+)/);if(gb&amp;&amp;!(xa()||C(&quot;iPad&quot;)||C(&quot;iPod&quot;)))return R(/Version\/([0-9.]+)/);if(cb||db){var a;if(a=/Version\/(\S+).*Mobile\/(\S+)/.exec(A))return a[1]+&quot;.&quot;+a[2]}else if(eb)return(a=R(/Android\s+([0-9.]+)/))?a:R(/Version\/([0-9.]+)/);return&quot;&quot;})();var ib=function(){var a=t.parent&amp;&amp;t.parent!=t,c=a&amp;&amp;0&lt;=&quot;//tpc.googlesyndication.com&quot;.indexOf(t.location.host);if(a&amp;&amp;t.name&amp;&amp;0==t.name.indexOf(&quot;google_ads_iframe&quot;)||c){var b;a=t||t;try{var d;if(a.document&amp;&amp;!a.document.body)d=new N(-1,-1);else{var e=(a||window).document,f=&quot;CSS1Compat&quot;==e.compatMode?e.documentElement:e.body;d=(new N(f.clientWidth,f.clientHeight)).round()}b=d}catch(g){b=new N(-12245933,-12245933)}return hb(b)}b=t.document.getElementsByTagName(&quot;SCRIPT&quot;);return 0&lt;b.length&amp;&amp;(b=b[b.length-1],b.parentElement&amp;&amp;b.parentElement.id&amp;&amp;0&lt;b.parentElement.id.indexOf(&quot;_ad_container&quot;))?hb(void 0,b.parentElement):null},hb=function(a,c){var b=jb(&quot;IMG&quot;,a,c);return b||(b=jb(&quot;IFRAME&quot;,a,c))?b:(b=jb(&quot;OBJECT&quot;,a,c))?b:null},jb=function(a,c,b){var d=document;b=b||d;d=a&amp;&amp;&quot;*&quot;!=a?a.toUpperCase():&quot;&quot;;b=b.querySelectorAll&amp;&amp;b.querySelector&amp;&amp;d?b.querySelectorAll(d+&quot;&quot;):b.getElementsByTagName(d||&quot;*&quot;);for(d=0;d&lt;b.length;d++){var e=b[d];if(&quot;OBJECT&quot;==a)a:{var f=e.getAttribute(&quot;height&quot;);if(null!=f&amp;&amp;0&lt;f&amp;&amp;0==e.clientHeight)for(var f=e.children,g=0;g&lt;f.length;g++){var l=f[g];if(&quot;OBJECT&quot;==l.nodeName||&quot;EMBED&quot;==l.nodeName){e=l;break a}}}f=e.clientHeight;g=e.clientWidth;if(l=c)l=new N(g,f),l=Math.abs(c.width-l.width)&lt;.1*c.width&amp;&amp;Math.abs(c.height-l.height)&lt;.1*c.height;if(l||!c&amp;&amp;10&lt;f&amp;&amp;10&lt;g)return e}return null};var kb,S=0,T=&quot;&quot;,U=!1,V=!1,lb=!1,mb=!0,nb=!1,ob=!1,pb=!1,qb=!1,rb=&quot;&quot;,sb=0,W=0,tb=[],K=null,ub=&quot;&quot;,vb=[],wb=null,xb=[],yb=!1,zb=&quot;&quot;,Ab=&quot;&quot;,Bb=(new Date).getTime(),Cb=!1,Db=&quot;&quot;,Eb=!1,Fb=[&quot;1&quot;,&quot;0&quot;,&quot;3&quot;],X=0,Y=0,Gb=0,Hb=&quot;&quot;,Jb=function(a,c,b){U&amp;&amp;(mb||3!=(b||3)||ob)&amp;&amp;Ib(a,c,!0);(lb||V&amp;&amp;nb)&amp;&amp;Ib(a,c)},Kb=function(){var a=wb;return a?2!=a():!0},Ib=function(a,c,b){(c=c||ub)&amp;&amp;!yb&amp;&amp;(2==Y||b)&amp;&amp;Kb()&amp;&amp;(c=Lb(c,b),u(a,c),qb=!0,b?U=!1:yb=!0)},Lb=function(a,c){var b;b=c?&quot;osdim&quot;:lb?&quot;osd2&quot;:&quot;osdtos&quot;;var d=[&quot;//pagead2.googlesyndication.com/activeview&quot;,&quot;?id=&quot;,b];&quot;osd2&quot;==b&amp;&amp;V&amp;&amp;nb&amp;&amp;d.push(&quot;&amp;ts=1&quot;);T&amp;&amp;d.push(&quot;&amp;avi=&quot;,T);kb&amp;&amp;d.push(&quot;&amp;cid=&quot;,kb);d.push(&quot;&amp;ti=1&quot;);d.push(&quot;&amp;&quot;,a);d.push(&quot;&amp;uc=&quot;+Gb);Cb?d.push(&quot;&amp;tgt=&quot;+Db):d.push(&quot;&amp;tgt=nf&quot;);d.push(&quot;&amp;cl=&quot;+(Eb?1:0));&quot;&quot;!=rb&amp;&amp;d.push(&quot;&amp;lop=1&quot;);b=d.join(&quot;&quot;);for(d=0;d&lt;vb.length;d++){try{var e=vb[d]()}catch(f){}var g=&quot;max_length&quot;;2&lt;=e.length&amp;&amp;(3==e.length&amp;&amp;(g=e[2]),b=q(b,x(e[0]),x(e[1]),g))}2E3&lt;b.length&amp;&amp;(b=b.substring(0,2E3));return b},Z=function(a,c){if(zb){try{var b=q(zb,&quot;vi&quot;,a);ha()&amp;&amp;u(w.contentWindow,b)}catch(d){}0&lt;=qa(Fb,a)&amp;&amp;(zb=&quot;&quot;);var b=c||ub,e;e=q(&quot;//pagead2.googlesyndication.com/pagead/gen_204?id=sldb&quot;,&quot;avi&quot;,T);e=q(e,&quot;vi&quot;,a);b&amp;&amp;(e+=&quot;&amp;&quot;+b);try{u(t,e)}catch(f){}}},Mb=function(){Z(&quot;-1&quot;)},Ob=function(a){if(a&amp;&amp;a.data&amp;&amp;n(a.data)){var c;var b=a.data;if(n(b)){c={};for(var b=b.split(&quot;\n&quot;),d=0;d&lt;b.length;d++){var e=b[d].indexOf(&quot;=&quot;);if(!(0&gt;=e)){var f=Number(b[d].substr(0,e)),e=b[d].substr(e+1);switch(f){case 5:case 8:case 11:case 15:case 16:case 18:e=&quot;true&quot;==e;break;case 4:case 7:case 6:case 14:case 20:case 21:case 22:case 23:e=Number(e);break;case 3:case 19:if(&quot;function&quot;==k(decodeURIComponent))try{e=decodeURIComponent(e)}catch(g){throw Error(&quot;Error: URI malformed: &quot;+e);}break;case 17:e=ra(decodeURIComponent(e).split(&quot;,&quot;),Number)}c[f]=e}}c=c[0]?c:null}else c=null;if(c&amp;&amp;(b=new I(c[4],c[12]),K&amp;&amp;K.match(b))){for(b=0;b&lt;xb.length;b++)xb[b](c);void 0!=c[18]&amp;&amp;(ob=c[18],ob||2!=W||(W=3,Nb()));b=c[0];if(&quot;goog_acknowledge_monitoring&quot;==b)t.clearInterval(M),X=2;else if(&quot;goog_get_mode&quot;==b){X=1;d={};K&amp;&amp;J(K,d);d[0]=&quot;goog_provide_mode&quot;;d[6]=Y;d[19]=Hb;try{var l=L(d);a.source.postMessage(l,a.origin)}catch(r){}t.clearInterval(M);X=2}else&quot;goog_update_data&quot;==b?(ub=c[3],++Gb):&quot;goog_image_request&quot;==b&amp;&amp;(Jb(t,c[3]),c[5]||c[11]||Z(&quot;0&quot;,c[3]));if(&quot;goog_update_data&quot;==b||&quot;goog_image_request&quot;==b)(1==Y||2==Y||U)&amp;&amp;c[5]&amp;&amp;(a=1==c[15]&amp;&amp;&quot;goog_update_data&quot;==b,nb=!0,Z(&quot;1&quot;),Ab&amp;&amp;Kb()&amp;&amp;(l=Ab,ha()&amp;&amp;u(w.contentWindow,l),Ab=&quot;&quot;),U&amp;&amp;!a&amp;&amp;(Ib(t,void 0,!0),pb=!0,sb=ba()),3==W&amp;&amp;(W=4,Nb()),U||1!=Y||(yb=!0)),(1==Y||2==Y||U)&amp;&amp;c[11]&amp;&amp;(V=!1,Z(&quot;3&quot;),U&amp;&amp;(Ib(t,void 0,!0),1==W&amp;&amp;ob&amp;&amp;(W=2)))}}},Nb=function(){var a=t,c=W;0!=c&amp;&amp;1!=c&amp;&amp;Pb(a,&quot;osdim&quot;,&quot;zas=&quot;+c)},Pb=function(a,c,b){c=&quot;//pagead2.googlesyndication.com/pagead/gen_204?id=&quot;+c+&quot;&amp;&quot;;var d=[];d.push(&quot;ovr_value=&quot;+S);d.push(&quot;avi=&quot;+T);K&amp;&amp;(d=d.concat(Qa()));d.push(&quot;tt=&quot;+((new Date).getTime()-Bb));d.push(b);a.document&amp;&amp;a.document.referrer&amp;&amp;d.push(&quot;ref=&quot;+x(a.document.referrer));c+=d.join(&quot;&amp;&quot;);try{u(a,c)}catch(e){}},Qb=function(){Jb(t);Z(&quot;0&quot;);2&gt;X&amp;&amp;!V&amp;&amp;2==Y&amp;&amp;Pb(t,&quot;osd2&quot;,&quot;hs=&quot;+X)},Rb=function(){var a={};J(K,a);a[0]=&quot;goog_dom_content_loaded&quot;;var c=L(a);try{Pa(function(){Ua(c)},10,&quot;osd_listener::ldcl_int&quot;)}catch(b){}},Tb=function(){var a={};J(K,a);a[0]=&quot;goog_creative_loaded&quot;;var c=L(a);Pa(function(){Ua(c)},10,&quot;osd_listener::lcel_int&quot;);Eb=!0},Ub=function(a){if(n(a)){a=a.split(&quot;&amp;&quot;);for(var c=a.length-1;0&lt;=c;c--){var b=a[c],d=Oa;b==d.g?(mb=!1,a.splice(c,1)):b==d.c?(W=1,a.splice(c,1)):b==d.f&amp;&amp;(V=!1,a.splice(c,1))}Hb=a.join(&quot;&amp;&quot;)}},Vb=function(){if(!Cb){var a=ib();a&amp;&amp;(Cb=!0,Db=a.tagName,a.complete||a.naturalWidth?Tb():H(a,&quot;load&quot;,Tb,&quot;osd_listener::creative_load&quot;))}};p(&quot;osdlfm&quot;,y(&quot;osd_listener::init&quot;,function(a,c,b,d,e,f,g,l,r,G){S=a;zb=c;Ab=d;U=f;kb=G;l&amp;&amp;Ub(l);V=f;1!=r&amp;&amp;2!=r&amp;&amp;3!=r||tb.push(Na[&quot;MRC_TEST_&quot;+r]);K=new I(e,ca());H(t,&quot;load&quot;,Mb,&quot;osd_listener::load&quot;);H(t,&quot;message&quot;,Ob,&quot;osd_listener::message&quot;);T=b||&quot;&quot;;H(t,&quot;unload&quot;,Qb,&quot;osd_listener::unload&quot;);var m=t.document;!m.readyState||&quot;complete&quot;!=m.readyState&amp;&amp;&quot;loaded&quot;!=m.readyState?(&quot;msie&quot;in ia?ia.msie:ia.msie=-1!=navigator.userAgent.toLowerCase().indexOf(&quot;msie&quot;))&amp;&amp;!window.opera?H(m,&quot;readystatechange&quot;,function(){&quot;complete&quot;!=m.readyState&amp;&amp;&quot;loaded&quot;!=m.readyState||Rb()},&quot;osd_listener::rsc&quot;):H(m,&quot;DOMContentLoaded&quot;,Rb,&quot;osd_listener::dcl&quot;):Rb();-1==S?Y=f?3:1:-2==S?Y=3:0&lt;S&amp;&amp;(Y=2,lb=!0);V&amp;&amp;!lb&amp;&amp;-1==S&amp;&amp;(Y=2);K&amp;&amp;(K.b||K.a)&amp;&amp;(X=1,M=t.setInterval(y(&quot;osd_proto::reqm_int&quot;,aa(Ta,Y,K,V,tb,Hb),void 0,void 0,void 0),500));Pa(Vb,5,&quot;osd_listener:sfc&quot;)}));p(&quot;osdlac&quot;,y(&quot;osd_listener::lac_ex&quot;,function(a){vb.push(a)}));p(&quot;osdlamrc&quot;,y(&quot;osd_listener::lamrc_ex&quot;,function(a){xb.push(a)}));p(&quot;osdsir&quot;,y(&quot;osd_listener::sir_ex&quot;,Jb));p(&quot;osdacrc&quot;,y(&quot;osd_listener::acrc_ex&quot;,function(a){wb=a}));p(&quot;osdpcls&quot;,y(&quot;osd_listener::acrc_ex&quot;,function(a){if(&quot;&quot;==a||t==t.top||yb||qb&amp;&amp;!pb)return!1;rb=a;if(pb){var c=T;T=a;var b=Lb(ub,!0);T=c;c=ba()-sb;b=Ma(b,&quot;tsvp&quot;,c);u(t,b)}T=&quot;&quot;==T?a:T+&quot;,&quot;+a;return!0}));})();osdlfm(-1,'','BICXkLTScVdPLOYrNbdnYvPgJAI6A--aQAgAAEAE4AcgBAuACAMgDmQTgBAGgBgLCEwkQgAEY9Mf70AM','',1510907900,true,true,'ud\x3d1\x26la\x3d0\x26',3,'5Gi1ZxlOaMy8RlYskMTmGdAKaGs');&lt;/script&gt; &lt;style&gt;.feedback_container {width: 100%;height: 100%;position: absolute;top:0;left:0;display: none;z-index: 9020;background-color: white;}.feedback_page {font-family: &quot;Arial&quot;;font-size: 13px;margin: 16px 16px 16px 16px;}.feedback_title {font-weight: bold;color: #000000;}.feedback_page a {font-weight: normal;color: #3366cc;}.feedback_description {color: #666666;line-height: 16px;margin: 12px 0 12px 0;}.feedback_closing {color: #0367ff;line-height: 16px;margin: 12px 0 12px 0;}.feedback_logo {position: absolute;right: 0;bottom: 0;margin: 0 12px 9px 0;}.feedback_logo img {height: 15px;}.survey_description {color: #666666;line-height: 17px;margin: 12px 0 10px 0;}.survey {color: #666666;line-height: 20px;}.survey_option input {margin: 0;vertical-align: middle;}.survey_option_text {margin: 0 0 0 5px;line-height: 17px;vertical-align: bottom;}.survey_option:hover {background-color: lightblue;cursor: default;}&lt;/style&gt;&lt;div id=&quot;cbtf&quot; class=&quot;feedback_container&quot;&gt;&lt;div class=&quot;feedback_page&quot;&gt;&lt;div id=&quot;mtadmas&quot;&gt;&lt;div class=&quot;feedback_title&quot;&gt;It&amp;#39;s gone. &lt;a id=&quot;mtadmaundo&quot; href=&quot;javascript:void(0)&quot;&gt;Undo&lt;/a&gt;&lt;/div&gt;&lt;div class=&quot;survey_description&quot;&gt;What was wrong with this ad?&lt;/div&gt;&lt;div class=&quot;survey&quot;&gt;&lt;label&gt;&lt;div class=&quot;survey_option&quot;&gt;&lt;input type=&quot;radio&quot; name=&quot;surveyOptions&quot; value=&quot;8&quot;&gt;&lt;span class=&quot;survey_option_text&quot;&gt;Inappropriate&lt;/span&gt;&lt;/div&gt;&lt;/label&gt;&lt;label&gt;&lt;div class=&quot;survey_option&quot;&gt;&lt;input type=&quot;radio&quot; name=&quot;surveyOptions&quot; value=&quot;7&quot;&gt;&lt;span class=&quot;survey_option_text&quot;&gt;Irrelevant&lt;/span&gt;&lt;/div&gt;&lt;/label&gt;&lt;label&gt;&lt;div class=&quot;survey_option&quot;&gt;&lt;input type=&quot;radio&quot; name=&quot;surveyOptions&quot; value=&quot;2&quot;&gt;&lt;span class=&quot;survey_option_text&quot;&gt;Repetitive&lt;/span&gt;&lt;/div&gt;&lt;/label&gt;&lt;/div&gt;&lt;/div&gt;&lt;div id=&quot;mtadmac&quot; style=&quot;display:none&quot;&gt;&lt;div class=&quot;feedback_title&quot;&gt;Thanks for the feedback! &lt;a id=&quot;mtadmback&quot; href=&quot;javascript:void(0)&quot;&gt;Back&lt;/a&gt;&lt;/div&gt;&lt;div class=&quot;feedback_description&quot;&gt;We’ll review this ad to improve your experience in the future.&lt;/div&gt;&lt;div class=&quot;feedback_description&quot;&gt;Help us show you better ads by updating your &lt;a href=&quot;http://www.google.com/settings/ads?hl=en&quot; target=&quot;_blank&quot;&gt;ads settings&lt;/a&gt;.&lt;/div&gt;&lt;div id=&quot;ad-feedback-closing&quot; style=&quot;display:none&quot; class=&quot;feedback_closing&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;div id=&quot;mtadmpc&quot; style=&quot;display:none&quot;&gt;&lt;div class=&quot;feedback_title&quot;&gt;Thanks for the feedback! &lt;a id=&quot;mtadmpundo&quot; href=&quot;javascript:void(0)&quot;&gt;Undo&lt;/a&gt;&lt;/div&gt;&lt;div class=&quot;feedback_description&quot;&gt;We’ll use your feedback to review ads on this site.&lt;/div&gt;&lt;div class=&quot;feedback_description&quot;&gt;Help us show you better ads by updating your &lt;a href=&quot;http://www.google.com/settings/ads?hl=en&quot; target=&quot;_blank&quot;&gt;ads settings&lt;/a&gt;.&lt;/div&gt;&lt;div id=&quot;pub-feedback-closing&quot; style=&quot;display:none&quot; class=&quot;feedback_closing&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;span id=&quot;feedback-closing-template&quot; style=&quot;display:none&quot;&gt;Closing ad: %1$d&lt;/span&gt;&lt;div class=&quot;feedback_logo&quot;&gt;&lt;img src=&quot;http://pagead2.googlesyndication.com/pagead/images/google-logo.png&quot;/&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;script&gt;(function(){var k=this,aa=function(a,b){var c=a.split(&quot;.&quot;),d=k;c[0]in d||!d.execScript||d.execScript(&quot;var &quot;+c[0]);for(var e;c.length&amp;&amp;(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b},l=function(a){var b=typeof a;if(&quot;object&quot;==b)if(a){if(a instanceof Array)return&quot;array&quot;;if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if(&quot;[object Window]&quot;==c)return&quot;object&quot;;if(&quot;[object Array]&quot;==c||&quot;number&quot;==typeof a.length&amp;&amp;&quot;undefined&quot;!=typeof a.splice&amp;&amp;&quot;undefined&quot;!=typeof a.propertyIsEnumerable&amp;&amp;!a.propertyIsEnumerable(&quot;splice&quot;))return&quot;array&quot;;if(&quot;[object Function]&quot;==c||&quot;undefined&quot;!=typeof a.call&amp;&amp;&quot;undefined&quot;!=typeof a.propertyIsEnumerable&amp;&amp;!a.propertyIsEnumerable(&quot;call&quot;))return&quot;function&quot;}else return&quot;null&quot;;else if(&quot;function&quot;==b&amp;&amp;&quot;undefined&quot;==typeof a.call)return&quot;object&quot;;return b},m=function(a){return&quot;string&quot;==typeof a},ba=function(a,b,c){return a.call.apply(a.bind,arguments)},ca=function(a,b,c){if(!a)throw Error();if(2&lt;arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}},n=function(a,b,c){n=Function.prototype.bind&amp;&amp;-1!=Function.prototype.bind.toString().indexOf(&quot;native code&quot;)?ba:ca;return n.apply(null,arguments)},p=Date.now||function(){return+new Date},q=function(a,b){function c(){}c.prototype=b.prototype;a.la=b.prototype;a.prototype=new c;a.qa=function(a,c,f){for(var g=Array(arguments.length-2),h=2;h&lt;arguments.length;h++)g[h-2]=arguments[h];return b.prototype[c].apply(a,g)}};var da=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,&quot;&quot;)},r=function(a,b){return a&lt;b?-1:a&gt;b?1:0};var u=function(a){u[&quot; &quot;](a);return a};u[&quot; &quot;]=function(){};var ea=function(a,b){try{return u(a[b]),!0}catch(c){}return!1};var v=function(a){try{return!!a&amp;&amp;null!=a.location.href&amp;&amp;ea(a,&quot;foo&quot;)}catch(b){return!1}};var fa=function(a){var b=window;b.google_image_requests||(b.google_image_requests=[]);var c=b.document.createElement(&quot;img&quot;);c.src=a;b.google_image_requests.push(c)};var ga=document;var w=function(a,b,c){b=n(c,b);a.addEventListener?a.addEventListener(&quot;click&quot;,b,!1):a.attachEvent&amp;&amp;a.attachEvent(&quot;onclick&quot;,b)};var ha=&quot;constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf&quot;.split(&quot; &quot;),ia=function(a,b){for(var c,d,e=1;e&lt;arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f&lt;ha.length;f++)c=ha[f],Object.prototype.hasOwnProperty.call(d,c)&amp;&amp;(a[c]=d[c])}},ka=function(a){var b=arguments.length;if(1==b&amp;&amp;&quot;array&quot;==l(arguments[0]))return ka.apply(null,arguments[0]);for(var c={},d=0;d&lt;b;d++)c[arguments[d]]=!0;return c};var la=function(a){var b={};if(a&amp;&amp;a.key_value){a=a.key_value;for(var c=0;c&lt;a.length;c++){var d=a[c];if(&quot;key&quot;in d&amp;&amp;&quot;value&quot;in d){var e=d.value;b[d.key]=null==e?null:String(e)}}}return b};var y=function(a,b){var c=parseInt(a,10);return isNaN(c)?b:c};var ma=!!window.google_async_iframe_id,z=ma&amp;&amp;window.parent||window;var A=Array.prototype,na=A.indexOf?function(a,b,c){return A.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0&gt;c?Math.max(0,a.length+c):c;if(m(a))return m(b)&amp;&amp;1==b.length?a.indexOf(b,c):-1;for(;c&lt;a.length;c++)if(c in a&amp;&amp;a[c]===b)return c;return-1};ka(&quot;area base br col command embed hr img input keygen link meta param source track wbr&quot;.split(&quot; &quot;));var B;a:{var oa=k.navigator;if(oa){var pa=oa.userAgent;if(pa){B=pa;break a}}B=&quot;&quot;};var qa=-1!=B.indexOf(&quot;Opera&quot;)||-1!=B.indexOf(&quot;OPR&quot;),D=-1!=B.indexOf(&quot;Trident&quot;)||-1!=B.indexOf(&quot;MSIE&quot;),ra=-1!=B.indexOf(&quot;Edge&quot;),E=-1!=B.indexOf(&quot;Gecko&quot;)&amp;&amp;!(-1!=B.toLowerCase().indexOf(&quot;webkit&quot;)&amp;&amp;-1==B.indexOf(&quot;Edge&quot;))&amp;&amp;!(-1!=B.indexOf(&quot;Trident&quot;)||-1!=B.indexOf(&quot;MSIE&quot;))&amp;&amp;-1==B.indexOf(&quot;Edge&quot;),F=-1!=B.toLowerCase().indexOf(&quot;webkit&quot;)&amp;&amp;-1==B.indexOf(&quot;Edge&quot;),sa=function(){var a=B;if(E)return/rv\:([^\);]+)(\)|;)/.exec(a);if(ra)return/Edge\/([\d\.]+)/.exec(a);if(D)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(F)return/WebKit\/(\S+)/.exec(a)},ta=function(){var a=k.document;return a?a.documentMode:void 0},ua=function(){if(qa&amp;&amp;k.opera){var a=k.opera.version;return&quot;function&quot;==l(a)?a():a}var a=&quot;&quot;,b=sa();b&amp;&amp;(a=b?b[1]:&quot;&quot;);return D&amp;&amp;(b=ta(),b&gt;parseFloat(a))?String(b):a}(),va={},G=function(a){var b;if(!(b=va[a])){b=0;for(var c=da(String(ua)).split(&quot;.&quot;),d=da(String(a)).split(&quot;.&quot;),e=Math.max(c.length,d.length),f=0;0==b&amp;&amp;f&lt;e;f++){var g=c[f]||&quot;&quot;,h=d[f]||&quot;&quot;,t=RegExp(&quot;(\\d*)(\\D*)&quot;,&quot;g&quot;),Oa=RegExp(&quot;(\\d*)(\\D*)&quot;,&quot;g&quot;);do{var x=t.exec(g)||[&quot;&quot;,&quot;&quot;,&quot;&quot;],C=Oa.exec(h)||[&quot;&quot;,&quot;&quot;,&quot;&quot;];if(0==x[0].length&amp;&amp;0==C[0].length)break;b=r(0==x[1].length?0:parseInt(x[1],10),0==C[1].length?0:parseInt(C[1],10))||r(0==x[2].length,0==C[2].length)||r(x[2],C[2])}while(0==b)}b=va[a]=0&lt;=b}return b},wa=k.document,xa=wa&amp;&amp;D?ta()||(&quot;CSS1Compat&quot;==wa.compatMode?parseInt(ua,10):5):void 0;!E&amp;&amp;!D||D&amp;&amp;9&lt;=xa||E&amp;&amp;G(&quot;1.9.1&quot;);var ya=D&amp;&amp;!G(&quot;9&quot;);var za=function(a){var b=document;return m(a)?b.getElementById(a):a},Aa={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},Ba={IMG:&quot; &quot;,BR:&quot;\n&quot;},Da=function(){var a=document.getElementById(&quot;feedback-closing-template&quot;);if(ya&amp;&amp;&quot;innerText&quot;in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,&quot;\n&quot;);else{var b=[];Ca(a,b,!0);a=b.join(&quot;&quot;)}a=a.replace(/ \xAD /g,&quot; &quot;).replace(/\xAD/g,&quot;&quot;);a=a.replace(/\u200B/g,&quot;&quot;);ya||(a=a.replace(/ +/g,&quot; &quot;));&quot; &quot;!=a&amp;&amp;(a=a.replace(/^\s*/,&quot;&quot;));return a},Ca=function(a,b,c){if(!(a.nodeName in Aa))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,&quot;&quot;)):b.push(a.nodeValue);else if(a.nodeName in Ba)b.push(Ba[a.nodeName]);else for(a=a.firstChild;a;)Ca(a,b,c),a=a.nextSibling};var Ea=function(){var a=document.body,b;if(ma&amp;&amp;!v(z)){for(var c=&quot;.&quot;+ga.domain;2&lt;c.split(&quot;.&quot;).length&amp;&amp;!v(z);)ga.domain=c=c.substr(c.indexOf(&quot;.&quot;)+1),z=window.parent;v(z)||(z=window)}b=z;var d;d=v(b.top)?b.top:null;this.ba=!!d&amp;&amp;!!a;this.ca=(c=a?a.getBoundingClientRect():null)?c.top:0;d=d||b;this.oa=(&quot;CSS1Compat&quot;==d.document.compatMode?d.document.documentElement:d.document.body).clientHeight;b=b.document;b={visible:1,hidden:2,prerender:3,preview:4}[b.webkitVisibilityState||b.mozVisibilityState||b.visibilityState||&quot;&quot;]||0;this.pa=!!a&amp;&amp;!(2==b||3==b)&amp;&amp;!(0==c.top&amp;&amp;0==c.bottom)},Fa=function(){var a=new Ea;return a.ba&amp;&amp;(!a.pa||a.ca&gt;=a.oa)};var Ga=function(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\[&quot;\\\/bfnrtu]/g,&quot;@&quot;).replace(/&quot;[^&quot;\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*&quot;|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,&quot;]&quot;).replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,&quot;&quot;)))try{return eval(&quot;(&quot;+a+&quot;)&quot;)}catch(b){}throw Error(&quot;Invalid JSON string: &quot;+a);};var H=function(){this.R=this.R;this.ia=this.ia};H.prototype.R=!1;var I=function(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.m=!1;this.V=!0};I.prototype.preventDefault=function(){this.defaultPrevented=!0;this.V=!1};var Ha=!D||9&lt;=xa,Ia=D&amp;&amp;!G(&quot;9&quot;);!F||G(&quot;528&quot;);E&amp;&amp;G(&quot;1.9b&quot;)||D&amp;&amp;G(&quot;8&quot;)||qa&amp;&amp;G(&quot;9.5&quot;)||F&amp;&amp;G(&quot;528&quot;);E&amp;&amp;!G(&quot;8&quot;)||D&amp;&amp;G(&quot;9&quot;);var J=function(a,b){I.call(this,a?a.type:&quot;&quot;);this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.S=this.state=null;if(a){var c=this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;d?E&amp;&amp;(ea(d,&quot;nodeName&quot;)||(d=null)):&quot;mouseover&quot;==c?d=a.fromElement:&quot;mouseout&quot;==c&amp;&amp;(d=a.toElement);this.relatedTarget=d;this.offsetX=F||void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=F||void 0!==a.offsetY?a.offsetY:a.layerY;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;this.screenX=a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(&quot;keypress&quot;==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.S=a;a.defaultPrevented&amp;&amp;this.preventDefault()}};q(J,I);J.prototype.preventDefault=function(){J.la.preventDefault.call(this);var a=this.S;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Ia)try{if(a.ctrlKey||112&lt;=a.keyCode&amp;&amp;123&gt;=a.keyCode)a.keyCode=-1}catch(b){}};var K=&quot;closure_listenable_&quot;+(1E6*Math.random()|0),Ja=0;var Ka=function(a,b,c,d,e){this.listener=a;this.F=null;this.src=b;this.type=c;this.w=!!d;this.A=e;this.key=++Ja;this.o=this.v=!1},L=function(a){a.o=!0;a.listener=null;a.F=null;a.src=null;a.A=null};var M=function(a){this.src=a;this.g={};this.G=0};M.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.g[f];a||(a=this.g[f]=[],this.G++);var g=N(a,b,d,e);-1&lt;g?(b=a[g],c||(b.v=!1)):(b=new Ka(b,this.src,f,!!d,e),b.v=c,a.push(b));return b};M.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.g))return!1;var e=this.g[a];b=N(e,b,c,d);return-1&lt;b?(L(e[b]),A.splice.call(e,b,1),0==e.length&amp;&amp;(delete this.g[a],this.G--),!0):!1};var O=function(a,b){var c=b.type;if(c in a.g){var d=a.g[c],e=na(d,b),f;(f=0&lt;=e)&amp;&amp;A.splice.call(d,e,1);f&amp;&amp;(L(b),0==a.g[c].length&amp;&amp;(delete a.g[c],a.G--))}};M.prototype.K=function(a,b,c,d){a=this.g[a.toString()];var e=-1;a&amp;&amp;(e=N(a,b,c,d));return-1&lt;e?a[e]:null};var N=function(a,b,c,d){for(var e=0;e&lt;a.length;++e){var f=a[e];if(!f.o&amp;&amp;f.listener==b&amp;&amp;f.w==!!c&amp;&amp;f.A==d)return e}return-1};var P=&quot;closure_lm_&quot;+(1E6*Math.random()|0),Q={},La=0,R=function(a,b,c,d,e){if(&quot;array&quot;==l(b))for(var f=0;f&lt;b.length;f++)R(a,b[f],c,d,e);else if(c=Ma(c),a&amp;&amp;a[K])a.listen(b,c,d,e);else{if(!b)throw Error(&quot;Invalid event type&quot;);var f=!!d,g=S(a);g||(a[P]=g=new M(a));c=g.add(b,c,!1,d,e);if(!c.F){d=Na();c.F=d;d.src=a;d.listener=c;if(a.addEventListener)a.addEventListener(b.toString(),d,f);else if(a.attachEvent)a.attachEvent(Pa(b.toString()),d);else throw Error(&quot;addEventListener and attachEvent are unavailable.&quot;);La++}}},Na=function(){var a=Qa,b=Ha?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b},Ra=function(a,b,c,d,e){if(&quot;array&quot;==l(b))for(var f=0;f&lt;b.length;f++)Ra(a,b[f],c,d,e);else c=Ma(c),a&amp;&amp;a[K]?a.unlisten(b,c,d,e):a&amp;&amp;(a=S(a))&amp;&amp;(b=a.K(b,c,!!d,e))&amp;&amp;Sa(b)},Sa=function(a){if(&quot;number&quot;!=typeof a&amp;&amp;a&amp;&amp;!a.o){var b=a.src;if(b&amp;&amp;b[K])O(b.l,a);else{var c=a.type,d=a.F;b.removeEventListener?b.removeEventListener(c,d,a.w):b.detachEvent&amp;&amp;b.detachEvent(Pa(c),d);La--;(c=S(b))?(O(c,a),0==c.G&amp;&amp;(c.src=null,b[P]=null)):L(a)}}},Pa=function(a){return a in Q?Q[a]:Q[a]=&quot;on&quot;+a},Ua=function(a,b,c,d){var e=!0;if(a=S(a))if(b=a.g[b.toString()])for(b=b.concat(),a=0;a&lt;b.length;a++){var f=b[a];f&amp;&amp;f.w==c&amp;&amp;!f.o&amp;&amp;(f=Ta(f,d),e=e&amp;&amp;!1!==f)}return e},Ta=function(a,b){var c=a.listener,d=a.A||a.src;a.v&amp;&amp;Sa(a);return c.call(d,b)},Qa=function(a,b){if(a.o)return!0;if(!Ha){var c;if(!(c=b))a:{c=[&quot;window&quot;,&quot;event&quot;];for(var d=k,e;e=c.shift();)if(null!=d[e])d=d[e];else{c=null;break a}c=d}e=c;c=new J(e,this);d=!0;if(!(0&gt;e.keyCode||void 0!=e.returnValue)){a:{var f=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(g){f=!0}if(f||void 0==e.returnValue)e.returnValue=!0}e=[];for(f=c.currentTarget;f;f=f.parentNode)e.push(f);for(var f=a.type,h=e.length-1;!c.m&amp;&amp;0&lt;=h;h--){c.currentTarget=e[h];var t=Ua(e[h],f,!0,c),d=d&amp;&amp;t}for(h=0;!c.m&amp;&amp;h&lt;e.length;h++)c.currentTarget=e[h],t=Ua(e[h],f,!1,c),d=d&amp;&amp;t}return d}return Ta(a,new J(b,this))},S=function(a){a=a[P];return a instanceof M?a:null},T=&quot;__closure_events_fn_&quot;+(1E9*Math.random()&gt;&gt;&gt;0),Ma=function(a){if(&quot;function&quot;==l(a))return a;a[T]||(a[T]=function(b){return a.handleEvent(b)});return a[T]};var U=function(){H.call(this);this.l=new M(this);this.$=this;this.T=null};q(U,H);U.prototype[K]=!0;U.prototype.addEventListener=function(a,b,c,d){R(this,a,b,c,d)};U.prototype.removeEventListener=function(a,b,c,d){Ra(this,a,b,c,d)};U.prototype.dispatchEvent=function(a){var b,c=this.T;if(c)for(b=[];c;c=c.T)b.push(c);var c=this.$,d=a.type||a;if(m(a))a=new I(a,c);else if(a instanceof I)a.target=a.target||c;else{var e=a;a=new I(d,c);ia(a,e)}var e=!0,f;if(b)for(var g=b.length-1;!a.m&amp;&amp;0&lt;=g;g--)f=a.currentTarget=b[g],e=V(f,d,!0,a)&amp;&amp;e;a.m||(f=a.currentTarget=c,e=V(f,d,!0,a)&amp;&amp;e,a.m||(e=V(f,d,!1,a)&amp;&amp;e));if(b)for(g=0;!a.m&amp;&amp;g&lt;b.length;g++)f=a.currentTarget=b[g],e=V(f,d,!1,a)&amp;&amp;e;return e};U.prototype.listen=function(a,b,c,d){return this.l.add(String(a),b,!1,c,d)};U.prototype.unlisten=function(a,b,c,d){return this.l.remove(String(a),b,c,d)};var V=function(a,b,c,d){b=a.l.g[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f&lt;b.length;++f){var g=b[f];if(g&amp;&amp;!g.o&amp;&amp;g.w==c){var h=g.listener,t=g.A||g.src;g.v&amp;&amp;O(a.l,g);e=!1!==h.call(t,d)&amp;&amp;e}}return e&amp;&amp;0!=d.V};U.prototype.K=function(a,b,c,d){return this.l.K(String(a),b,c,d)};var W=function(a,b){U.call(this);this.B=a||1;this.s=b||k;this.I=n(this.ma,this);this.L=p()};q(W,U);W.prototype.enabled=!1;W.prototype.h=null;W.prototype.ma=function(){if(this.enabled){var a=p()-this.L;0&lt;a&amp;&amp;a&lt;.8*this.B?this.h=this.s.setTimeout(this.I,this.B-a):(this.h&amp;&amp;(this.s.clearTimeout(this.h),this.h=null),this.dispatchEvent(&quot;tick&quot;),this.enabled&amp;&amp;(this.h=this.s.setTimeout(this.I,this.B),this.L=p()))}};W.prototype.start=function(){this.enabled=!0;this.h||(this.h=this.s.setTimeout(this.I,this.B),this.L=p())};W.prototype.stop=function(){this.enabled=!1;this.h&amp;&amp;(this.s.clearTimeout(this.h),this.h=null)};var X=function(a,b,c,d){this.O=a;this.da=b;this.ea=c;this.D=0;this.u=document.getElementById(&quot;mtadmas&quot;);this.na=document.getElementById(&quot;mtadmaundo&quot;);this.M=document.getElementById(&quot;mtadmac&quot;);this.aa=document.getElementById(&quot;mtadmback&quot;);this.U=document.getElementById(&quot;mtadmpc&quot;);this.Z=document.getElementById(&quot;mtadmpundo&quot;);this.j=this.Y=this.J=this.P=this.N=null;this.C=!1;this.H=null;this.ha=d?d.getAdsLength():1;(this.i=d)&amp;&amp;this.i.registerWidget(this,0)},Va=function(a){for(var b=document.getElementsByName(&quot;surveyOptions&quot;),c=0;c&lt;b.length;c++)w(b[c],a,n(a.ka,a,b[c].value));w(a.na,a,n(a.X,a,&quot;1&quot;));a.Z&amp;&amp;w(a.Z,a,n(a.X,a,&quot;3&quot;));w(a.aa,a,a.back);a.i&amp;&amp;(a.i.listenOnObject(&quot;mute_option_selected&quot;,n(a.W,a)),a.i.forEachAd(n(function(a){a.listenOnObject(&quot;multislot_mute_collapse&quot;,n(this.ga,this));a.listenOnObject(&quot;multislot_mute_collapse_undo&quot;,n(this.fa,this))},a)))};X.prototype.W=function(a){this.N=a.close_button_token;this.P=a.creative_conversion_url;this.J=a.ablation_config;this.Y=a.undo_callback;this.i&amp;&amp;(this.H=this.i.getAd(a.creative_index));if(1===a.type){a=document.getElementsByName(&quot;surveyOptions&quot;);for(var b=0;b&lt;a.length;b++)a[b].checked=!1;this.u.style.display=&quot;block&quot;;Y(this);Z(this)}else 0===a.type&amp;&amp;(this.U.style.display=&quot;block&quot;,this.u.style.display=&quot;none&quot;,Y(this),Wa(this,document.getElementById(&quot;pub-feedback-closing&quot;),this.J))};var Xa=function(a){a.j&amp;&amp;(a.j.stop(),a.j=null,a.C=!1);za(&quot;pub-feedback-closing&quot;).style.display=&quot;none&quot;;za(&quot;ad-feedback-closing&quot;).style.display=&quot;none&quot;};X.prototype.X=function(a){this.C||(Xa(this),fa(Ya(this,&quot;user_feedback_undo&quot;,a)),this.Y())};X.prototype.back=function(){this.C||(Xa(this),this.u.style.display=&quot;block&quot;,Y(this),Z(this))};X.prototype.ka=function(a){this.M.style.display=&quot;block&quot;;this.u.style.display=&quot;none&quot;;Z(this);fa(Ya(this,&quot;mute_survey_option&quot;,a));a=document.getElementById(&quot;ad-feedback-closing&quot;);this.D&lt;this.ha-1&amp;&amp;this.i&amp;&amp;this.da?Za(this,a):Wa(this,a,this.J)};var Ya=function(a,b,c){return a.P+&quot;&amp;label=&quot;+b+&quot;&amp;cbt=&quot;+a.N+&quot;&amp;label_instance=&quot;+c},Y=function(a){a.M.style.display=&quot;none&quot;},Z=function(a){a.U.style.display=&quot;none&quot;},$a=function(a,b,c,d,e,f){var g=Da(),h=c+d;0&gt;e||e&gt;h||(a.j||(a.j=new W(1E3),R(a.j,&quot;tick&quot;,n(function(){var a=&quot;&quot;;h&lt;=d&amp;&amp;0&lt;h&amp;&amp;(a=g.replace(&quot;%1$d&quot;,String(h)));b.style.display=a?&quot;inline&quot;:&quot;none&quot;;if(&quot;textContent&quot;in b)b.textContent=a;else if(3==b.nodeType)b.data=a;else if(b.firstChild&amp;&amp;3==b.firstChild.nodeType){for(;b.lastChild!=b.firstChild;)b.removeChild(b.lastChild);b.firstChild.data=a}else{for(var c;c=b.firstChild;)b.removeChild(c);b.appendChild((9==b.nodeType?b:b.ownerDocument||b.document).createTextNode(String(a)))}if(h==e)try{this.C=!0,f&amp;&amp;f()}catch(x){}0&gt;=h&amp;&amp;Xa(this);h--},a))),a.j.dispatchEvent(&quot;tick&quot;),0&lt;=h&amp;&amp;a.j.start())},Wa=function(a,b,c){if(c&amp;&amp;window.top&amp;&amp;window.top.postMessage){var d=Ga(c),e=la(d),f=&quot;resize-me&quot;==d.msg_type&amp;&amp;&quot;animate&quot;==e.r_str;(&quot;ablate-me&quot;==d.msg_type&amp;&amp;e[&quot;collapse-after-close&quot;]||f&amp;&amp;!Fa())&amp;&amp;$a(a,b,y(e[&quot;secs-to-countdown&quot;],1),y(e.countdown,0),y(e[&quot;message-tick&quot;],1),function(){window.top.postMessage(c,&quot;*&quot;)})}},Za=function(a,b){$a(a,b,1,a.ea,0,n(function(){var a={creative_index:this.H.getIndex(),undo_pingback_url:Ya(this,&quot;user_feedback_undo&quot;,&quot;1&quot;)};this.H.fireOnObject(&quot;multislot_mute_collapse&quot;,a)},a))};X.prototype.ga=function(){this.D++;this.i.resetAll()};X.prototype.fa=function(){0&lt;this.D&amp;&amp;this.D--};X.prototype.show=function(){this.O.style.display=&quot;block&quot;};X.prototype.hide=function(){this.O.style.display=&quot;none&quot;};X.prototype.reset=function(){this.hide()};X.prototype.show=X.prototype.show;X.prototype.hide=X.prototype.hide;X.prototype.reset=X.prototype.reset;X.prototype.setupSurveyPage=X.prototype.W;aa(&quot;cmtads&quot;,function(a,b){var c=null,d=document.getElementById(&quot;cbtf&quot;);d&amp;&amp;(c=new X(d,!!a,b||0,window.adSlot),Va(c));c&amp;&amp;aa(&quot;muteSurvey&quot;,c);return c});})();cmtads(false,0);&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;{&quot;uid&quot;:1,&quot;hostPeerName&quot;:&quot;http://www.androidhive.info&quot;,&quot;initialGeometry&quot;:&quot;{\&quot;windowCoords_t\&quot;:-7,\&quot;windowCoords_r\&quot;:1557,\&quot;windowCoords_b\&quot;:847,\&quot;windowCoords_l\&quot;:-7,\&quot;frameCoords_t\&quot;:417,\&quot;frameCoords_r\&quot;:938.7999877929688,\&quot;frameCoords_b\&quot;:667,\&quot;frameCoords_l\&quot;:638.7999877929688,\&quot;styleZIndex\&quot;:\&quot;auto\&quot;,\&quot;allowedExpansion_t\&quot;:417,\&quot;allowedExpansion_r\&quot;:580.2000122070312,\&quot;allowedExpansion_b\&quot;:64,\&quot;allowedExpansion_l\&quot;:638.7999877929688,\&quot;xInView\&quot;:1,\&quot;yInView\&quot;:1}&quot;,&quot;permissions&quot;:&quot;{\&quot;expandByOverlay\&quot;:true,\&quot;expandByPush\&quot;:false,\&quot;readCookie\&quot;:false,\&quot;writeCookie\&quot;:false}&quot;,&quot;metadata&quot;:&quot;{\&quot;shared\&quot;:{\&quot;sf_ver\&quot;:\&quot;1-0-2\&quot;,\&quot;ck_on\&quot;:1,\&quot;flash_ver\&quot;:\&quot;18.0.0\&quot;}}&quot;,&quot;reportCreativeGeometry&quot;:false}" id="google_ads_iframe_/8691100/androidhiveinfo_med_rec_Sidebar_MPU_300x250_BSAT_bsazone_1289784_0" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/container.htm" style="border: 0px none; vertical-align: bottom;" frameborder="0" height="250" width="300"></iframe></div><iframe src="javascript:&quot;<html><body style='background:transparent'></body></html>&quot;" style="border: 0px none; vertical-align: bottom; visibility: hidden; display: none;" marginheight="0" marginwidth="0" scrolling="no" name="google_ads_iframe_/8691100/androidhiveinfo_med_rec_Sidebar_MPU_300x250_BSAT_bsazone_1289784_0__hidden__" id="google_ads_iframe_/8691100/androidhiveinfo_med_rec_Sidebar_MPU_300x250_BSAT_bsazone_1289784_0__hidden__" frameborder="0" height="0" width="0"></iframe></div>

<script class="ignoreme" id="auto_5" type="text/javascript"> if (typeof(_bsap_serving_callback) !== 'undefined') _bsap_serving_callback(20297, 'CWADLKE', ''); </script>

<div class="bsap_adhere">

<a href="http://buysellads.com/buy/detail/111048/zone/1289784?utm_source=site_111048&amp;utm_medium=website&amp;utm_campaign=imagetext&amp;utm_content=zone_1289784" class="">Advertise Here</a>

</div>


<script class="ignoreme" id="auto_6" type="text/javascript"> if (typeof(BSACallback) !== 'undefined') BSACallback(); </script></div>
                <!-- End BuySellAds Zone Code -->
            </div>
            <p>As per google’s documentation “Google Cloud Messaging for
 Android (GCM) is a service that helps developers send data from servers
 to their Android applications on Android devices”. Using this service 
you can send data to your application whenever new data is available 
instead of making requests to server in timely fashion. Integrating GCM 
in your android application enhances user experience and saves lot of 
battery power.</p>
<div class="downloadsection"><a href="http://download.androidhive.info/download?code=iS5bX74qeLC9BJzKIwhYnSHv0vziNeO5we85USk3IGtj6%2Faczubg6fCH0vmiw9zHaMdsR5SffC%2Fre3MUd93rM%2Blp8F6fqJjFS%2B%2FniItFlnA551qjzzUItsLnCQCb%2Fzs0N8P%2FUOajn7DlOMPdl89grMIWwlyHPNtyzcfvHOlovZ8nAeR51mOro7aUYBA51MKIvxruyT" target="_blank"><img src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/download_btn.png" alt="Download Code" title="Download Code" class="alignnone size-full wp-image-423" height="41" width="173"></a></div>
<div class="downloadsection">
<iframe style="width: 679.2px; height: 402.264px;" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/4DLPlpVqtWk.htm" allowfullscreen="" frameborder="0"></iframe>
</div>
<p><br></p>
<h3>Overview of Google Cloud Messaging, PHP and MySQL</h3>
<p>In this tutorial i used <em>PHP</em> as server side programming language and <em>MySQL</em>
 as server side database. I installed WAMP server to install php, mysql,
 apache for me. If you are new to connecting PHP, MySQL to android 
application, i suggest you go through this tutorial<br>
<a href="http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/" target="_blank" class="ref-link">How to connect Android with PHP, MySQL</a></p>
<p>You can go through the <a href="http://developer.android.com/guide/google/gcm/index.html" target="_blank" class="ref-link">official documentation</a> if you want to know more about GCM.</p>
<p>The following diagram is illustrating the overview of the tutorial and the purpose of each entity involved in this tutorial.</p>
<div class="image">
<img src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/gcm-a-modr.png" alt="android google cloud messaging gcm architecture" title="android google cloud messaging gcm architecture" class="alignnone size-full wp-image-2458" height="auto" width="720px">
</div>
<p><br></p>
<h3>Registering with Google Cloud Messaging</h3>
<p><strong>1</strong>. Goto <a href="https://code.google.com/apis/console" class="ref-link" target="_blank">Google APIs Console page</a> and create a new project. (If you haven’t created already otherwise it will take you to dashboard)</p>
<div class="image">
<img src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/gcm_create_project.png" alt="android gcm registering in google api console" title="android gcm registering in google api console" class="alignnone size-full wp-image-2291" height="auto" width="720px">
</div>
<p><strong>2</strong>. After creating project you can see the <strong>project id in the url</strong>. Note down the project id which will be used as <em>SENDER ID</em> in android project. (Example: in #project:460866929976 after semicolon 460866929976 is the sender id)</p>
<div><div id="highlighter_312847" class="syntaxhighlighter nogutter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain"><a href="https://code.google.com/apis/console/#project:460866929976">https://code.google.com/apis/console/#project:460866929976</a></code></div></div></td></tr></tbody></table></div></div>
<div class="image">
<img src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/gcm_sender_id.png" alt="android gcm sender id" title="android gcm sender id" class="alignnone size-full wp-image-2300" height="auto" width="720px">
</div>
<p><strong>3</strong>. After that click on <em>Services</em> on the left panel and turn on <em>Google Cloud Messaging for Android</em>.</p>
<div class="image">
<img src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/gcm_enable_service.png" alt="android gcm google api console" title="android gcm google api console" class="alignnone size-full wp-image-2306" height="auto" width="720px">
</div>
<p><strong>4</strong>. Once you are done, click on API Access and note down the <em>API Key</em>. This API key will be used when sending requests to GCM server.</p>
<div class="image">
<img src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/gcm_api_key.png" alt="android google api key" title="android google api key" class="alignnone size-full wp-image-2310" height="auto" width="720px">
</div>
<p><br></p>
<h3>Creating MySQL Database</h3>
<p><strong>1</strong>. Open phpmyadmin panel by going to <em>http://localhost/phpmyadmin</em> and create a database called <em>gcm</em>. (if your localhost is running on port number add port number to url)<br>
<strong>2</strong>. After creating the database, select the database and execute following query in SQL tab to create <strong>gcm_users</strong> table.</p>
<div><div id="highlighter_271732" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql keyword">CREATE</code> <code class="sql keyword">TABLE</code> <code class="sql plain">IF </code><code class="sql color1">NOT</code> <code class="sql plain">EXISTS `gcm_users` (</code></div><div class="line number2 index1 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`id` </code><code class="sql keyword">int</code><code class="sql plain">(11) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code> <code class="sql plain">AUTO_INCREMENT,</code></div><div class="line number3 index2 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`gcm_regid` text,</code></div><div class="line number4 index3 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`</code><code class="sql keyword">name</code><code class="sql plain">` </code><code class="sql keyword">varchar</code><code class="sql plain">(50) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code><code class="sql plain">,</code></div><div class="line number5 index4 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`email` </code><code class="sql keyword">varchar</code><code class="sql plain">(255) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code><code class="sql plain">,</code></div><div class="line number6 index5 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`created_at` </code><code class="sql keyword">timestamp</code> <code class="sql color1">NOT</code> <code class="sql color1">NULL</code> <code class="sql keyword">DEFAULT</code> <code class="sql color2">CURRENT_TIMESTAMP</code><code class="sql plain">,</code></div><div class="line number7 index6 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql keyword">PRIMARY</code> <code class="sql keyword">KEY</code> <code class="sql plain">(`id`)</code></div><div class="line number8 index7 alt1"><code class="sql plain">) ENGINE=InnoDB </code><code class="sql keyword">DEFAULT</code> <code class="sql plain">CHARSET=latin1 AUTO_INCREMENT=1 ;</code></div></div></td></tr></tbody></table></div></div>
<p>Check the following video to know about creating database and php project.<br>
<br></p>
<h3>Creating &amp; Running the PHP Project</h3>
<p>When we are making request to GCM server using PHP i used curl to 
make post request. Before creating php project enable curl module in 
your php extensions.<br>
Left Click on the WAMP icon the system try -&gt; <em>PHP</em> -&gt; <em>PHP Extensions</em> -&gt; Enable <em>php_curl</em></p>
<p><strong>1</strong>. Goto your <strong>WAMP</strong> folder and inside <em>www</em> folder create a folder called <strong>gcm_server_php</strong>. (In my case i installed wamp in C:\WAMP)<br>
<strong>2</strong>. Create a filed called <em>config.php</em> This fill holds the database configuration and google api key.</p>
<div><div id="highlighter_36660" class="syntaxhighlighter nogutter  php"><table border="0" cellpadding="0" cellspacing="0"><caption>config.php</caption><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">&lt;?php</code></div><div class="line number2 index1 alt1"><code class="php comments">/**</code></div><div class="line number3 index2 alt2"><code class="php spaces">&nbsp;</code><code class="php comments">* Database config variables</code></div><div class="line number4 index3 alt1"><code class="php spaces">&nbsp;</code><code class="php comments">*/</code></div><div class="line number5 index4 alt2"><code class="php plain">define(</code><code class="php string">"DB_HOST"</code><code class="php plain">, </code><code class="php string">"localhost"</code><code class="php plain">);</code></div><div class="line number6 index5 alt1"><code class="php plain">define(</code><code class="php string">"DB_USER"</code><code class="php plain">, </code><code class="php string">"root"</code><code class="php plain">);</code></div><div class="line number7 index6 alt2"><code class="php plain">define(</code><code class="php string">"DB_PASSWORD"</code><code class="php plain">, </code><code class="php string">"root"</code><code class="php plain">);</code></div><div class="line number8 index7 alt1"><code class="php plain">define(</code><code class="php string">"DB_DATABASE"</code><code class="php plain">, </code><code class="php string">"gcm"</code><code class="php plain">);</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="php comments">/*</code></div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;</code><code class="php comments">* Google API Key</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;</code><code class="php comments">*/</code></div><div class="line number13 index12 alt2"><code class="php plain">define(</code><code class="php string">"GOOGLE_API_KEY"</code><code class="php plain">, </code><code class="php string">"BIzaSyCRLa4LQZWNQBcRCYcIVYA45i9i8zfClqc"</code><code class="php plain">); </code><code class="php comments">// Place your Google API Key</code></div><div class="line number14 index13 alt1"><code class="php plain">?&gt;</code></div></div></td></tr></tbody></table></div></div>
<p><strong>3</strong>. Create another file called <em>db_connect.php</em> This file handles database connections, mainly opens and closes connection.</p>
<div><div id="highlighter_830257" class="syntaxhighlighter nogutter  php"><table border="0" cellpadding="0" cellspacing="0"><caption>db_connect.php</caption><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">&lt;?php</code></div><div class="line number2 index1 alt1"><code class="php spaces">&nbsp;</code>&nbsp;</div><div class="line number3 index2 alt2"><code class="php keyword">class</code> <code class="php plain">DB_Connect {</code></div><div class="line number4 index3 alt1"><code class="php spaces">&nbsp;</code>&nbsp;</div><div class="line number5 index4 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// constructor</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">function</code> <code class="php plain">__construct() {</code></div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;</code>&nbsp;</div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;</code>&nbsp;</div><div class="line number10 index9 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// destructor</code></div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">function</code> <code class="php plain">__destruct() {</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// $this-&gt;close();</code></div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;</code>&nbsp;</div><div class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// Connecting to database</code></div><div class="line number16 index15 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">connect() {</code></div><div class="line number17 index16 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">require_once</code> <code class="php string">'config.php'</code><code class="php plain">;</code></div><div class="line number18 index17 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// connecting to mysql</code></div><div class="line number19 index18 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$con</code> <code class="php plain">= mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);</code></div><div class="line number20 index19 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// selecting database</code></div><div class="line number21 index20 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">mysql_select_db(DB_DATABASE);</code></div><div class="line number22 index21 alt1"><code class="php spaces">&nbsp;</code>&nbsp;</div><div class="line number23 index22 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// return database handler</code></div><div class="line number24 index23 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$con</code><code class="php plain">;</code></div><div class="line number25 index24 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number26 index25 alt1"><code class="php spaces">&nbsp;</code>&nbsp;</div><div class="line number27 index26 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// Closing database connection</code></div><div class="line number28 index27 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">close() {</code></div><div class="line number29 index28 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">mysql_close();</code></div><div class="line number30 index29 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number31 index30 alt2"><code class="php spaces">&nbsp;</code>&nbsp;</div><div class="line number32 index31 alt1"><code class="php plain">} </code></div><div class="line number33 index32 alt2"><code class="php plain">?&gt;</code></div></div></td></tr></tbody></table></div></div>
<p><strong>4</strong>. Create a new file named <em>db_functions.php</em> This file contains function to perform database CRUD operations. But i wrote function for creating user only.</p>
<div><div id="highlighter_717393" class="syntaxhighlighter nogutter  php"><table border="0" cellpadding="0" cellspacing="0"><caption>db_functions.php</caption><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">&lt;?php</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="php keyword">class</code> <code class="php plain">DB_Functions {</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">private</code> <code class="php variable">$db</code><code class="php plain">;</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">//put your code here</code></div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// constructor</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">function</code> <code class="php plain">__construct() {</code></div><div class="line number10 index9 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">include_once</code> <code class="php string">'./db_connect.php'</code><code class="php plain">;</code></div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// connecting to database</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;db = </code><code class="php keyword">new</code> <code class="php plain">DB_Connect();</code></div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;db-&gt;connect();</code></div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// destructor</code></div><div class="line number17 index16 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">function</code> <code class="php plain">__destruct() {</code></div><div class="line number18 index17 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number19 index18 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">/**</code></div><div class="line number22 index21 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">* Storing new user</code></div><div class="line number23 index22 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">* returns user details</code></div><div class="line number24 index23 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">*/</code></div><div class="line number25 index24 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">storeUser(</code><code class="php variable">$name</code><code class="php plain">, </code><code class="php variable">$email</code><code class="php plain">, </code><code class="php variable">$gcm_regid</code><code class="php plain">) {</code></div><div class="line number26 index25 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// insert user into database</code></div><div class="line number27 index26 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$result</code> <code class="php plain">= mysql_query(</code><code class="php string">"INSERT INTO gcm_users(name, email, gcm_regid, created_at) VALUES('$name', '$email', '$gcm_regid', NOW())"</code><code class="php plain">);</code></div><div class="line number28 index27 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// check for successful store</code></div><div class="line number29 index28 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$result</code><code class="php plain">) {</code></div><div class="line number30 index29 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// get user details</code></div><div class="line number31 index30 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$id</code> <code class="php plain">= mysql_insert_id(); </code><code class="php comments">// last inserted id</code></div><div class="line number32 index31 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$result</code> <code class="php plain">= mysql_query(</code><code class="php string">"SELECT * FROM gcm_users WHERE id = $id"</code><code class="php plain">) </code><code class="php keyword">or</code> <code class="php keyword">die</code><code class="php plain">(mysql_error());</code></div><div class="line number33 index32 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// return user details</code></div><div class="line number34 index33 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(mysql_num_rows(</code><code class="php variable">$result</code><code class="php plain">) &gt; 0) {</code></div><div class="line number35 index34 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php plain">mysql_fetch_array(</code><code class="php variable">$result</code><code class="php plain">);</code></div><div class="line number36 index35 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">} </code><code class="php keyword">else</code> <code class="php plain">{</code></div><div class="line number37 index36 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php plain">false;</code></div><div class="line number38 index37 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number39 index38 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">} </code><code class="php keyword">else</code> <code class="php plain">{</code></div><div class="line number40 index39 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php plain">false;</code></div><div class="line number41 index40 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number42 index41 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number43 index42 alt2">&nbsp;</div><div class="line number44 index43 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">/**</code></div><div class="line number45 index44 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">* Getting all users</code></div><div class="line number46 index45 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">*/</code></div><div class="line number47 index46 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">getAllUsers() {</code></div><div class="line number48 index47 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$result</code> <code class="php plain">= mysql_query(</code><code class="php string">"select * FROM gcm_users"</code><code class="php plain">);</code></div><div class="line number49 index48 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$result</code><code class="php plain">;</code></div><div class="line number50 index49 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number51 index50 alt2">&nbsp;</div><div class="line number52 index51 alt1"><code class="php plain">}</code></div><div class="line number53 index52 alt2">&nbsp;</div><div class="line number54 index53 alt1"><code class="php plain">?&gt;</code></div></div></td></tr></tbody></table></div></div>
<p><strong>5</strong>. Create another file named <em>GCM.php</em> This file used to <strong>send push notification requests</strong> to GCM server.</p>
<div><div id="highlighter_315801" class="syntaxhighlighter nogutter  php"><table border="0" cellpadding="0" cellspacing="0"><caption>GCM.php</caption><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">&lt;?php</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="php keyword">class</code> <code class="php plain">GCM {</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">//put your code here</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// constructor</code></div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">function</code> <code class="php plain">__construct() {</code></div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">/**</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">* Sending Push Notification</code></div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">*/</code></div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">send_notification(</code><code class="php variable">$registatoin_ids</code><code class="php plain">, </code><code class="php variable">$message</code><code class="php plain">) {</code></div><div class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// include config</code></div><div class="line number16 index15 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">include_once</code> <code class="php string">'./config.php'</code><code class="php plain">;</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// Set POST variables</code></div><div class="line number19 index18 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$url</code> <code class="php plain">= </code><code class="php string">'<a href="https://android.googleapis.com/gcm/send">https://android.googleapis.com/gcm/send</a>'</code><code class="php plain">;</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$fields</code> <code class="php plain">= </code><code class="php keyword">array</code><code class="php plain">(</code></div><div class="line number22 index21 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'registration_ids'</code> <code class="php plain">=&gt; </code><code class="php variable">$registatoin_ids</code><code class="php plain">,</code></div><div class="line number23 index22 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'data'</code> <code class="php plain">=&gt; </code><code class="php variable">$message</code><code class="php plain">,</code></div><div class="line number24 index23 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">);</code></div><div class="line number25 index24 alt2">&nbsp;</div><div class="line number26 index25 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$headers</code> <code class="php plain">= </code><code class="php keyword">array</code><code class="php plain">(</code></div><div class="line number27 index26 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'Authorization: key='</code> <code class="php plain">. GOOGLE_API_KEY,</code></div><div class="line number28 index27 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'Content-Type: application/json'</code></div><div class="line number29 index28 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">);</code></div><div class="line number30 index29 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// Open connection</code></div><div class="line number31 index30 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$ch</code> <code class="php plain">= curl_init();</code></div><div class="line number32 index31 alt1">&nbsp;</div><div class="line number33 index32 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// Set the url, number of POST vars, POST data</code></div><div class="line number34 index33 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">curl_setopt(</code><code class="php variable">$ch</code><code class="php plain">, CURLOPT_URL, </code><code class="php variable">$url</code><code class="php plain">);</code></div><div class="line number35 index34 alt2">&nbsp;</div><div class="line number36 index35 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">curl_setopt(</code><code class="php variable">$ch</code><code class="php plain">, CURLOPT_POST, true);</code></div><div class="line number37 index36 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">curl_setopt(</code><code class="php variable">$ch</code><code class="php plain">, CURLOPT_HTTPHEADER, </code><code class="php variable">$headers</code><code class="php plain">);</code></div><div class="line number38 index37 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">curl_setopt(</code><code class="php variable">$ch</code><code class="php plain">, CURLOPT_RETURNTRANSFER, true);</code></div><div class="line number39 index38 alt2">&nbsp;</div><div class="line number40 index39 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// Disabling SSL Certificate support temporarly</code></div><div class="line number41 index40 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">curl_setopt(</code><code class="php variable">$ch</code><code class="php plain">, CURLOPT_SSL_VERIFYPEER, false);</code></div><div class="line number42 index41 alt1">&nbsp;</div><div class="line number43 index42 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">curl_setopt(</code><code class="php variable">$ch</code><code class="php plain">, CURLOPT_POSTFIELDS, json_encode(</code><code class="php variable">$fields</code><code class="php plain">));</code></div><div class="line number44 index43 alt1">&nbsp;</div><div class="line number45 index44 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// Execute post</code></div><div class="line number46 index45 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$result</code> <code class="php plain">= curl_exec(</code><code class="php variable">$ch</code><code class="php plain">);</code></div><div class="line number47 index46 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$result</code> <code class="php plain">=== FALSE) {</code></div><div class="line number48 index47 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">die</code><code class="php plain">(</code><code class="php string">'Curl failed: '</code> <code class="php plain">. curl_error(</code><code class="php variable">$ch</code><code class="php plain">));</code></div><div class="line number49 index48 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number50 index49 alt1">&nbsp;</div><div class="line number51 index50 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// Close connection</code></div><div class="line number52 index51 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">curl_close(</code><code class="php variable">$ch</code><code class="php plain">);</code></div><div class="line number53 index52 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php functions">echo</code> <code class="php variable">$result</code><code class="php plain">;</code></div><div class="line number54 index53 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number55 index54 alt2">&nbsp;</div><div class="line number56 index55 alt1"><code class="php plain">}</code></div><div class="line number57 index56 alt2">&nbsp;</div><div class="line number58 index57 alt1"><code class="php plain">?&gt;</code></div></div></td></tr></tbody></table></div></div>
<p><strong>6</strong>. Create a new file called <em>register.php</em> This file receives requests from android device and stores the user in the database.</p>
<div><div id="highlighter_314840" class="syntaxhighlighter nogutter  php"><table border="0" cellpadding="0" cellspacing="0"><caption>register.php</caption><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">&lt;?php</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="php comments">// response json</code></div><div class="line number4 index3 alt1"><code class="php variable">$json</code> <code class="php plain">= </code><code class="php keyword">array</code><code class="php plain">();</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="php comments">/**</code></div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;</code><code class="php comments">* Registering a user device</code></div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;</code><code class="php comments">* Store reg id in users table</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;</code><code class="php comments">*/</code></div><div class="line number10 index9 alt1"><code class="php keyword">if</code> <code class="php plain">(isset(</code><code class="php variable">$_POST</code><code class="php plain">[</code><code class="php string">"name"</code><code class="php plain">]) &amp;&amp; isset(</code><code class="php variable">$_POST</code><code class="php plain">[</code><code class="php string">"email"</code><code class="php plain">]) &amp;&amp; isset(</code><code class="php variable">$_POST</code><code class="php plain">[</code><code class="php string">"regId"</code><code class="php plain">])) {</code></div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$name</code> <code class="php plain">= </code><code class="php variable">$_POST</code><code class="php plain">[</code><code class="php string">"name"</code><code class="php plain">];</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$email</code> <code class="php plain">= </code><code class="php variable">$_POST</code><code class="php plain">[</code><code class="php string">"email"</code><code class="php plain">];</code></div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$gcm_regid</code> <code class="php plain">= </code><code class="php variable">$_POST</code><code class="php plain">[</code><code class="php string">"regId"</code><code class="php plain">]; </code><code class="php comments">// GCM Registration ID</code></div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// Store user details in db</code></div><div class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">include_once</code> <code class="php string">'./db_functions.php'</code><code class="php plain">;</code></div><div class="line number16 index15 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">include_once</code> <code class="php string">'./GCM.php'</code><code class="php plain">;</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$db</code> <code class="php plain">= </code><code class="php keyword">new</code> <code class="php plain">DB_Functions();</code></div><div class="line number19 index18 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$gcm</code> <code class="php plain">= </code><code class="php keyword">new</code> <code class="php plain">GCM();</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$res</code> <code class="php plain">= </code><code class="php variable">$db</code><code class="php plain">-&gt;storeUser(</code><code class="php variable">$name</code><code class="php plain">, </code><code class="php variable">$email</code><code class="php plain">, </code><code class="php variable">$gcm_regid</code><code class="php plain">);</code></div><div class="line number22 index21 alt1">&nbsp;</div><div class="line number23 index22 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$registatoin_ids</code> <code class="php plain">= </code><code class="php keyword">array</code><code class="php plain">(</code><code class="php variable">$gcm_regid</code><code class="php plain">);</code></div><div class="line number24 index23 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$message</code> <code class="php plain">= </code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">"product"</code> <code class="php plain">=&gt; </code><code class="php string">"shirt"</code><code class="php plain">);</code></div><div class="line number25 index24 alt2">&nbsp;</div><div class="line number26 index25 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$result</code> <code class="php plain">= </code><code class="php variable">$gcm</code><code class="php plain">-&gt;send_notification(</code><code class="php variable">$registatoin_ids</code><code class="php plain">, </code><code class="php variable">$message</code><code class="php plain">);</code></div><div class="line number27 index26 alt2">&nbsp;</div><div class="line number28 index27 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php functions">echo</code> <code class="php variable">$result</code><code class="php plain">;</code></div><div class="line number29 index28 alt2"><code class="php plain">} </code><code class="php keyword">else</code> <code class="php plain">{</code></div><div class="line number30 index29 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// user details missing</code></div><div class="line number31 index30 alt2"><code class="php plain">}</code></div><div class="line number32 index31 alt1"><code class="php plain">?&gt;</code></div></div></td></tr></tbody></table></div></div>
<p><strong>7</strong>. Create another file called <em>send_message.php</em> This file used to send pushnotification to android device by making a request to GCM server.</p>
<div><div id="highlighter_82163" class="syntaxhighlighter nogutter  php"><table border="0" cellpadding="0" cellspacing="0"><caption>send_message.php</caption><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">&lt;?php</code></div><div class="line number2 index1 alt1"><code class="php keyword">if</code> <code class="php plain">(isset(</code><code class="php variable">$_GET</code><code class="php plain">[</code><code class="php string">"regId"</code><code class="php plain">]) &amp;&amp; isset(</code><code class="php variable">$_GET</code><code class="php plain">[</code><code class="php string">"message"</code><code class="php plain">])) {</code></div><div class="line number3 index2 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$regId</code> <code class="php plain">= </code><code class="php variable">$_GET</code><code class="php plain">[</code><code class="php string">"regId"</code><code class="php plain">];</code></div><div class="line number4 index3 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$message</code> <code class="php plain">= </code><code class="php variable">$_GET</code><code class="php plain">[</code><code class="php string">"message"</code><code class="php plain">];</code></div><div class="line number5 index4 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">include_once</code> <code class="php string">'./GCM.php'</code><code class="php plain">;</code></div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$gcm</code> <code class="php plain">= </code><code class="php keyword">new</code> <code class="php plain">GCM();</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$registatoin_ids</code> <code class="php plain">= </code><code class="php keyword">array</code><code class="php plain">(</code><code class="php variable">$regId</code><code class="php plain">);</code></div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$message</code> <code class="php plain">= </code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">"price"</code> <code class="php plain">=&gt; </code><code class="php variable">$message</code><code class="php plain">);</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$result</code> <code class="php plain">= </code><code class="php variable">$gcm</code><code class="php plain">-&gt;send_notification(</code><code class="php variable">$registatoin_ids</code><code class="php plain">, </code><code class="php variable">$message</code><code class="php plain">);</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php functions">echo</code> <code class="php variable">$result</code><code class="php plain">;</code></div><div class="line number16 index15 alt1"><code class="php plain">}</code></div><div class="line number17 index16 alt2"><code class="php plain">?&gt;</code></div></div></td></tr></tbody></table></div></div>
<p><strong>8</strong>. Finally create a file called <em>index.php</em> 
and paste the following code. The following code will create a simple 
admin panel to list all the user devices and provides a panel to send 
push notification to individual devices.</p>
<div><div id="highlighter_487436" class="syntaxhighlighter nogutter  php"><table border="0" cellpadding="0" cellspacing="0"><caption>index.php</caption><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">&lt;!DOCTYPE html&gt;</code></div><div class="line number2 index1 alt1"><code class="php plain">&lt;html&gt;</code></div><div class="line number3 index2 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;head&gt;</code></div><div class="line number4 index3 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;title&gt;&lt;/title&gt;</code></div><div class="line number5 index4 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;meta http-equiv=</code><code class="php string">"Content-Type"</code> <code class="php plain">content=</code><code class="php string">"text/html; charset=UTF-8"</code><code class="php plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;script src=</code><code class="php string">"<a href="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js">http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js</a>"</code><code class="php plain">&gt;&lt;/script&gt;</code></div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;script type=</code><code class="php string">"text/javascript"</code><code class="php plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">$(document).ready(</code><code class="php keyword">function</code><code class="php plain">(){</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number10 index9 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">});</code></div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">function</code> <code class="php plain">sendPushNotification(id){</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">var</code> <code class="php plain">data = $(</code><code class="php string">'form#'</code><code class="php plain">+id).serialize();</code></div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">$(</code><code class="php string">'form#'</code><code class="php plain">+id).unbind(</code><code class="php string">'submit'</code><code class="php plain">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">$.ajax({</code></div><div class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">url: </code><code class="php string">"send_message.php"</code><code class="php plain">,</code></div><div class="line number16 index15 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">type: </code><code class="php string">'GET'</code><code class="php plain">,</code></div><div class="line number17 index16 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">data: data,</code></div><div class="line number18 index17 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">beforeSend: </code><code class="php keyword">function</code><code class="php plain">() {</code></div><div class="line number19 index18 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number20 index19 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">},</code></div><div class="line number21 index20 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">success: </code><code class="php keyword">function</code><code class="php plain">(data, textStatus, xhr) {</code></div><div class="line number22 index21 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">$(</code><code class="php string">'.txt_message'</code><code class="php plain">).val(</code><code class="php string">""</code><code class="php plain">);</code></div><div class="line number23 index22 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">},</code></div><div class="line number24 index23 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">error: </code><code class="php keyword">function</code><code class="php plain">(xhr, textStatus, errorThrown) {</code></div><div class="line number25 index24 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number26 index25 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number27 index26 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">});</code></div><div class="line number28 index27 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php plain">false;</code></div><div class="line number29 index28 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number30 index29 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/script&gt;</code></div><div class="line number31 index30 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;style type=</code><code class="php string">"text/css"</code><code class="php plain">&gt;</code></div><div class="line number32 index31 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">.container{</code></div><div class="line number33 index32 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">width: 950px;</code></div><div class="line number34 index33 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">margin: 0 auto;</code></div><div class="line number35 index34 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">padding: 0;</code></div><div class="line number36 index35 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number37 index36 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">h1{</code></div><div class="line number38 index37 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">font-family: </code><code class="php string">'Helvetica Neue'</code><code class="php plain">, Helvetica, Arial, sans-serif;</code></div><div class="line number39 index38 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">font-size: 24px;</code></div><div class="line number40 index39 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">color: #777;</code></div><div class="line number41 index40 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number42 index41 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">div.clear{</code></div><div class="line number43 index42 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">clear: both;</code></div><div class="line number44 index43 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number45 index44 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">ul.devices{</code></div><div class="line number46 index45 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">margin: 0;</code></div><div class="line number47 index46 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">padding: 0;</code></div><div class="line number48 index47 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number49 index48 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">ul.devices li{</code></div><div class="line number50 index49 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">float: left;</code></div><div class="line number51 index50 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">list-style: none;</code></div><div class="line number52 index51 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">border: 1px solid #dedede;</code></div><div class="line number53 index52 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">padding: 10px;</code></div><div class="line number54 index53 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">margin: 0 15px 25px 0;</code></div><div class="line number55 index54 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">border-radius: 3px;</code></div><div class="line number56 index55 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">-webkit-box-shadow: 0 1px 5px rgba(0, 0, 0, 0.35);</code></div><div class="line number57 index56 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">-moz-box-shadow: 0 1px 5px rgba(0, 0, 0, 0.35);</code></div><div class="line number58 index57 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">box-shadow: 0 1px 5px rgba(0, 0, 0, 0.35);</code></div><div class="line number59 index58 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">font-family: </code><code class="php string">'Helvetica Neue'</code><code class="php plain">, Helvetica, Arial, sans-serif;</code></div><div class="line number60 index59 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">color: #555;</code></div><div class="line number61 index60 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number62 index61 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">ul.devices li label, ul.devices li span{</code></div><div class="line number63 index62 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">font-family: </code><code class="php string">'Helvetica Neue'</code><code class="php plain">, Helvetica, Arial, sans-serif;</code></div><div class="line number64 index63 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">font-size: 12px;</code></div><div class="line number65 index64 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">font-style: normal;</code></div><div class="line number66 index65 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">font-variant: normal;</code></div><div class="line number67 index66 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">font-weight: bold;</code></div><div class="line number68 index67 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">color: #393939;</code></div><div class="line number69 index68 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">display: block;</code></div><div class="line number70 index69 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">float: left;</code></div><div class="line number71 index70 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number72 index71 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">ul.devices li label{</code></div><div class="line number73 index72 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">height: 25px;</code></div><div class="line number74 index73 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">width: 50px;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number75 index74 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number76 index75 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">ul.devices li textarea{</code></div><div class="line number77 index76 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">float: left;</code></div><div class="line number78 index77 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">resize: none;</code></div><div class="line number79 index78 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number80 index79 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">ul.devices li .send_btn{</code></div><div class="line number81 index80 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#0096FF), to(#005DFF));</code></div><div class="line number82 index81 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">background: -webkit-linear-gradient(0% 0%, 0% 100%, from(#0096FF), to(#005DFF));</code></div><div class="line number83 index82 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">background: -moz-linear-gradient(center top, #0096FF, #005DFF);</code></div><div class="line number84 index83 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">background: linear-gradient(#0096FF, #005DFF);</code></div><div class="line number85 index84 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">text-shadow: 0 1px 0 rgba(0, 0, 0, 0.3);</code></div><div class="line number86 index85 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">border-radius: 3px;</code></div><div class="line number87 index86 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">color: #fff;</code></div><div class="line number88 index87 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number89 index88 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/style&gt;</code></div><div class="line number90 index89 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/head&gt;</code></div><div class="line number91 index90 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;body&gt;</code></div><div class="line number92 index91 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php</code></div><div class="line number93 index92 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">include_once</code> <code class="php string">'db_functions.php'</code><code class="php plain">;</code></div><div class="line number94 index93 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$db</code> <code class="php plain">= </code><code class="php keyword">new</code> <code class="php plain">DB_Functions();</code></div><div class="line number95 index94 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$users</code> <code class="php plain">= </code><code class="php variable">$db</code><code class="php plain">-&gt;getAllUsers();</code></div><div class="line number96 index95 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$users</code> <code class="php plain">!= false)</code></div><div class="line number97 index96 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$no_of_users</code> <code class="php plain">= mysql_num_rows(</code><code class="php variable">$users</code><code class="php plain">);</code></div><div class="line number98 index97 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">else</code></div><div class="line number99 index98 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$no_of_users</code> <code class="php plain">= 0;</code></div><div class="line number100 index99 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">?&gt;</code></div><div class="line number101 index100 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;div </code><code class="php keyword">class</code><code class="php plain">=</code><code class="php string">"container"</code><code class="php plain">&gt;</code></div><div class="line number102 index101 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;h1&gt;No of Devices Registered: &lt;?php </code><code class="php functions">echo</code> <code class="php variable">$no_of_users</code><code class="php plain">; ?&gt;&lt;/h1&gt;</code></div><div class="line number103 index102 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;hr/&gt;</code></div><div class="line number104 index103 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;ul </code><code class="php keyword">class</code><code class="php plain">=</code><code class="php string">"devices"</code><code class="php plain">&gt;</code></div><div class="line number105 index104 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php</code></div><div class="line number106 index105 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$no_of_users</code> <code class="php plain">&gt; 0) {</code></div><div class="line number107 index106 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">?&gt;</code></div><div class="line number108 index107 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php</code></div><div class="line number109 index108 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">while</code> <code class="php plain">(</code><code class="php variable">$row</code> <code class="php plain">= mysql_fetch_array(</code><code class="php variable">$users</code><code class="php plain">)) {</code></div><div class="line number110 index109 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">?&gt;</code></div><div class="line number111 index110 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;li&gt;</code></div><div class="line number112 index111 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;form id=</code><code class="php string">"&lt;?php echo $row["</code><code class="php plain">id</code><code class="php string">"] ?&gt;"</code> <code class="php plain">name=</code><code class="php string">""</code> <code class="php plain">method=</code><code class="php string">"post"</code> <code class="php plain">onsubmit=</code><code class="php string">"return sendPushNotification('&lt;?php echo $row["</code><code class="php plain">id</code><code class="php string">"] ?&gt;')"</code><code class="php plain">&gt;</code></div><div class="line number113 index112 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;label&gt;Name: &lt;/label&gt; &lt;span&gt;&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$row</code><code class="php plain">[</code><code class="php string">"name"</code><code class="php plain">] ?&gt;&lt;/span&gt;</code></div><div class="line number114 index113 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;div </code><code class="php keyword">class</code><code class="php plain">=</code><code class="php string">"clear"</code><code class="php plain">&gt;&lt;/div&gt;</code></div><div class="line number115 index114 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;label&gt;Email:&lt;/label&gt; &lt;span&gt;&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$row</code><code class="php plain">[</code><code class="php string">"email"</code><code class="php plain">] ?&gt;&lt;/span&gt;</code></div><div class="line number116 index115 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;div </code><code class="php keyword">class</code><code class="php plain">=</code><code class="php string">"clear"</code><code class="php plain">&gt;&lt;/div&gt;</code></div><div class="line number117 index116 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;div </code><code class="php keyword">class</code><code class="php plain">=</code><code class="php string">"send_container"</code><code class="php plain">&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 </code></div><div class="line number118 index117 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;textarea rows=</code><code class="php string">"3"</code> <code class="php plain">name=</code><code class="php string">"message"</code> <code class="php plain">cols=</code><code class="php string">"25"</code> <code class="php keyword">class</code><code class="php plain">=</code><code class="php string">"txt_message"</code> <code class="php plain">placeholder=</code><code class="php string">"Type message here"</code><code class="php plain">&gt;&lt;/textarea&gt;</code></div><div class="line number119 index118 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;input type=</code><code class="php string">"hidden"</code> <code class="php plain">name=</code><code class="php string">"regId"</code> <code class="php plain">value=</code><code class="php string">"&lt;?php echo $row["</code><code class="php plain">gcm_regid</code><code class="php string">"] ?&gt;"</code><code class="php plain">/&gt;</code></div><div class="line number120 index119 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;input type=</code><code class="php string">"submit"</code> <code class="php keyword">class</code><code class="php plain">=</code><code class="php string">"send_btn"</code> <code class="php plain">value=</code><code class="php string">"Send"</code> <code class="php plain">onclick=</code><code class="php string">""</code><code class="php plain">/&gt;</code></div><div class="line number121 index120 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/div&gt;</code></div><div class="line number122 index121 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/form&gt;</code></div><div class="line number123 index122 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/li&gt;</code></div><div class="line number124 index123 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php }</code></div><div class="line number125 index124 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">} </code><code class="php keyword">else</code> <code class="php plain">{ ?&gt; </code></div><div class="line number126 index125 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;li&gt;</code></div><div class="line number127 index126 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">No Users Registered Yet!</code></div><div class="line number128 index127 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/li&gt;</code></div><div class="line number129 index128 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php } ?&gt;</code></div><div class="line number130 index129 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/ul&gt;</code></div><div class="line number131 index130 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/div&gt;</code></div><div class="line number132 index131 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/body&gt;</code></div><div class="line number133 index132 alt2"><code class="php plain">&lt;/html&gt;</code></div></div></td></tr></tbody></table></div></div>
<p>Following is a screenshot of the admin panel generated by above code (with users registered)</p>
<div class="image">
<img src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/android_gcm_php_admin.png" alt="android gcm php admin panel" title="android gcm php admin panel" class="alignnone size-full wp-image-2335" height="auto" width="720px">
</div>
<div class="downloadsection">
<iframe style="width: 679.2px; height: 402.264px;" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/cR45sih7T_M.htm" allowfullscreen="" frameborder="0"></iframe>
</div>
<p>Until now we are done with setting up server side part. Now we can start writing android code.<br>
<br></p>
<h3>Installing helper libraries and setting up the Emulator</h3>
<p>Before start writing android code we need to install the helper libraries and make required changes to the emulator. </p>
<p><strong>1</strong>. Goto your android SDK folder and open <em>SDK Manager</em> and install <em>Google Cloud Messaging for Android Library</em> under <em>Extras</em> section. (If you don’t see Google Cloud Messaging for Android Library update your SDK manager to latest version)</p>
<p><strong>2</strong>. After installing the library it will create <em>gcm.jar</em> file in your <strong>Andoird_SDK_Folder\extras\google\gcm\gcm-client\dist</strong>. Later you need to add this .jar file to your android project.</p>
<div class="image">
<img src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/gcm_downloading_sdk.png" alt="android downloading gcm library" title="android downloading gcm library" class="alignnone size-full wp-image-2345" height="auto" width="720px">
</div>
<p><strong>3</strong>. Now open your <em>AVD Manager</em> and create a new Google API emulator and start the emulator. (<strong>Note</strong>: To test gcm application in emulator you need to test it on Google API device only)<br>
<strong>4</strong>. After launching emulator press <em>Menu</em> button goto <em>Settings</em>. Select <em>Accounts &amp; Sync</em>. And then press Add Account button and add a <em>Google account</em>.</p>
<div class="image">
<img src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/android_gcm_adding_google_account1.png" alt="android gcm adding google account" title="android gcm adding google account" class="alignnone size-full wp-image-2362" height="auto" width="720px">
</div>
<p>Check the following video to know about adding google account in the emulator</p>
<div class="downloadsection">
<iframe style="width: 679.2px; height: 402.264px;" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/ZqQugUEOMrc.htm" allowfullscreen="" frameborder="0"></iframe>
</div>
<p>Once you are done adding google account you are good to start android project.<br>
<br></p>
<h3>Creating Android Project</h3>
<p><strong>1</strong>. Create a new android project and fill the 
required details. While creating project select minimum SDK version API 8
 to support wider range of devices.<br>
<strong>2</strong>. After creating new project open <em>AndroidManifest.xml</em> file and do the following changes.<br>
The following permission are required to make your project support gcm.</p>
<p><em>INTERNET</em> – To make your app use internet services<br>
<em>ACCESS_NETWORK_STATE</em> – To access network state (used to detect internet status)<br>
<em>GET_ACCOUNTS</em> – Required as GCM needs google account<br>
<em>WAKE_LOCK</em> – Needed if your app need to wake your device when it sleeps<br>
<em>VIBRATE</em> – Needed if your support vibration when receiving notification<br>
Also add some broadcast receivers as mentioned below.</p>
<p>In the following code replace all <em>com.androidhive.pushnotifications</em> with your android package name.</p>
<div><div id="highlighter_409833" class="syntaxhighlighter nogutter  xml"><table border="0" cellpadding="0" cellspacing="0"><caption>AndroidManifest.xml</caption><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">&lt;?</code><code class="xml keyword">xml</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0"</code> <code class="xml color1">encoding</code><code class="xml plain">=</code><code class="xml string">"utf-8"</code><code class="xml plain">?&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">manifest</code> <code class="xml color1">xmlns:android</code><code class="xml plain">=</code><code class="xml string">"<a href="http://schemas.android.com/apk/res/android">http://schemas.android.com/apk/res/android</a>"</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">package</code><code class="xml plain">=</code><code class="xml string">"com.androidhive.pushnotifications"</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:versionCode</code><code class="xml plain">=</code><code class="xml string">"1"</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:versionName</code><code class="xml plain">=</code><code class="xml string">"1.0"</code> <code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- GCM requires Android SDK version 2.2 (API level 8) or above. --&gt;</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">uses-sdk</code></div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:minSdkVersion</code><code class="xml plain">=</code><code class="xml string">"8"</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:targetSdkVersion</code><code class="xml plain">=</code><code class="xml string">"16"</code> <code class="xml plain">/&gt;</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- GCM connects to Internet Services. --&gt;</code></div><div class="line number13 index12 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">uses-permission</code> <code class="xml color1">android:name</code><code class="xml plain">=</code><code class="xml string">"android.permission.INTERNET"</code> <code class="xml plain">/&gt;</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- GCM requires a Google account. --&gt;</code></div><div class="line number16 index15 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">uses-permission</code> <code class="xml color1">android:name</code><code class="xml plain">=</code><code class="xml string">"android.permission.GET_ACCOUNTS"</code> <code class="xml plain">/&gt;</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- Keeps the processor from sleeping when a message is received. --&gt;</code></div><div class="line number19 index18 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">uses-permission</code> <code class="xml color1">android:name</code><code class="xml plain">=</code><code class="xml string">"android.permission.WAKE_LOCK"</code> <code class="xml plain">/&gt;</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- Creates a custom permission so only this app can receive its messages. --&gt;</code></div><div class="line number22 index21 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">permission</code></div><div class="line number23 index22 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:name</code><code class="xml plain">=</code><code class="xml string">"com.androidhive.pushnotifications.permission.C2D_MESSAGE"</code></div><div class="line number24 index23 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:protectionLevel</code><code class="xml plain">=</code><code class="xml string">"signature"</code> <code class="xml plain">/&gt;</code></div><div class="line number25 index24 alt2">&nbsp;</div><div class="line number26 index25 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">uses-permission</code> <code class="xml color1">android:name</code><code class="xml plain">=</code><code class="xml string">"com.androidhive.pushnotifications.permission.C2D_MESSAGE"</code> <code class="xml plain">/&gt;</code></div><div class="line number27 index26 alt2">&nbsp;</div><div class="line number28 index27 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- This app has permission to register and receive data message. --&gt;</code></div><div class="line number29 index28 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">uses-permission</code> <code class="xml color1">android:name</code><code class="xml plain">=</code><code class="xml string">"com.google.android.c2dm.permission.RECEIVE"</code> <code class="xml plain">/&gt;</code></div><div class="line number30 index29 alt1">&nbsp;</div><div class="line number31 index30 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- Network State Permissions to detect Internet status --&gt;</code></div><div class="line number32 index31 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">uses-permission</code> <code class="xml color1">android:name</code><code class="xml plain">=</code><code class="xml string">"android.permission.ACCESS_NETWORK_STATE"</code> <code class="xml plain">/&gt;</code></div><div class="line number33 index32 alt2">&nbsp;</div><div class="line number34 index33 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- Permission to vibrate --&gt;</code></div><div class="line number35 index34 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">uses-permission</code> <code class="xml color1">android:name</code><code class="xml plain">=</code><code class="xml string">"android.permission.VIBRATE"</code> <code class="xml plain">/&gt;</code></div><div class="line number36 index35 alt1">&nbsp;</div><div class="line number37 index36 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- Main activity. --&gt;</code></div><div class="line number38 index37 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">application</code></div><div class="line number39 index38 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:icon</code><code class="xml plain">=</code><code class="xml string">"@drawable/ic_launcher"</code></div><div class="line number40 index39 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:label</code><code class="xml plain">=</code><code class="xml string">"@string/app_name"</code> <code class="xml plain">&gt;</code></div><div class="line number41 index40 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- Register Activity --&gt;</code></div><div class="line number42 index41 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">activity</code></div><div class="line number43 index42 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:name</code><code class="xml plain">=</code><code class="xml string">".RegisterActivity"</code></div><div class="line number44 index43 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:label</code><code class="xml plain">=</code><code class="xml string">"@string/app_name"</code> <code class="xml plain">&gt;</code></div><div class="line number45 index44 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">intent-filter</code><code class="xml plain">&gt;</code></div><div class="line number46 index45 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">action</code> <code class="xml color1">android:name</code><code class="xml plain">=</code><code class="xml string">"android.intent.action.MAIN"</code> <code class="xml plain">/&gt;</code></div><div class="line number47 index46 alt2">&nbsp;</div><div class="line number48 index47 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">category</code> <code class="xml color1">android:name</code><code class="xml plain">=</code><code class="xml string">"android.intent.category.LAUNCHER"</code> <code class="xml plain">/&gt;</code></div><div class="line number49 index48 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">intent-filter</code><code class="xml plain">&gt;</code></div><div class="line number50 index49 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">activity</code><code class="xml plain">&gt;</code></div><div class="line number51 index50 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number52 index51 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- Main Activity --&gt;</code></div><div class="line number53 index52 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">activity</code></div><div class="line number54 index53 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:name</code><code class="xml plain">=</code><code class="xml string">".MainActivity"</code></div><div class="line number55 index54 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:configChanges</code><code class="xml plain">=</code><code class="xml string">"orientation|keyboardHidden"</code></div><div class="line number56 index55 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:label</code><code class="xml plain">=</code><code class="xml string">"@string/app_name"</code> <code class="xml plain">&gt;</code></div><div class="line number57 index56 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">activity</code><code class="xml plain">&gt;</code></div><div class="line number58 index57 alt1">&nbsp;</div><div class="line number59 index58 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">receiver</code></div><div class="line number60 index59 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:name</code><code class="xml plain">=</code><code class="xml string">"com.google.android.gcm.GCMBroadcastReceiver"</code></div><div class="line number61 index60 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:permission</code><code class="xml plain">=</code><code class="xml string">"com.google.android.c2dm.permission.SEND"</code> <code class="xml plain">&gt;</code></div><div class="line number62 index61 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">intent-filter</code><code class="xml plain">&gt;</code></div><div class="line number63 index62 alt2">&nbsp;</div><div class="line number64 index63 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- Receives the actual messages. --&gt;</code></div><div class="line number65 index64 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">action</code> <code class="xml color1">android:name</code><code class="xml plain">=</code><code class="xml string">"com.google.android.c2dm.intent.RECEIVE"</code> <code class="xml plain">/&gt;</code></div><div class="line number66 index65 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- Receives the registration id. --&gt;</code></div><div class="line number67 index66 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">action</code> <code class="xml color1">android:name</code><code class="xml plain">=</code><code class="xml string">"com.google.android.c2dm.intent.REGISTRATION"</code> <code class="xml plain">/&gt;</code></div><div class="line number68 index67 alt1">&nbsp;</div><div class="line number69 index68 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">category</code> <code class="xml color1">android:name</code><code class="xml plain">=</code><code class="xml string">"com.androidhive.pushnotifications"</code> <code class="xml plain">/&gt;</code></div><div class="line number70 index69 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">intent-filter</code><code class="xml plain">&gt;</code></div><div class="line number71 index70 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">receiver</code><code class="xml plain">&gt;</code></div><div class="line number72 index71 alt1">&nbsp;</div><div class="line number73 index72 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">service</code> <code class="xml color1">android:name</code><code class="xml plain">=</code><code class="xml string">".GCMIntentService"</code> <code class="xml plain">/&gt;</code></div><div class="line number74 index73 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">application</code><code class="xml plain">&gt;</code></div><div class="line number75 index74 alt2">&nbsp;</div><div class="line number76 index75 alt1"><code class="xml plain">&lt;/</code><code class="xml keyword">manifest</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
<p><strong>3</strong>. Open your <em>strings.xml</em> file under <em>res -&gt; values</em> folder and paste following strings. (If you don’t have strings.xml file, create a new one)</p>
<div><div id="highlighter_820961" class="syntaxhighlighter nogutter  xml"><table border="0" cellpadding="0" cellspacing="0"><caption>strings.xml</caption><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">resources</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">string</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"app_name"</code><code class="xml plain">&gt;AndroidHive GCM&lt;/</code><code class="xml keyword">string</code><code class="xml plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">string</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"hello_world"</code><code class="xml plain">&gt;Hello world!&lt;/</code><code class="xml keyword">string</code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">string</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"menu_settings"</code><code class="xml plain">&gt;Settings&lt;/</code><code class="xml keyword">string</code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">string</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"title_activity_main"</code><code class="xml plain">&gt;Push Notifications&lt;/</code><code class="xml keyword">string</code><code class="xml plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">string</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"error_config"</code><code class="xml plain">&gt;Please set the %1$s constant and recompile the app.&lt;/</code><code class="xml keyword">string</code><code class="xml plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">string</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"already_registered"</code><code class="xml plain">&gt;Device is already registered on server.&lt;/</code><code class="xml keyword">string</code><code class="xml plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">string</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"gcm_registered"</code><code class="xml plain">&gt;From GCM: device successfully registered!&lt;/</code><code class="xml keyword">string</code><code class="xml plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">string</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"gcm_unregistered"</code><code class="xml plain">&gt;From GCM: device successfully unregistered!&lt;/</code><code class="xml keyword">string</code><code class="xml plain">&gt;</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">string</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"gcm_message"</code><code class="xml plain">&gt;From GCM: you got message!&lt;/</code><code class="xml keyword">string</code><code class="xml plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">string</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"gcm_error"</code><code class="xml plain">&gt;From GCM: error (%1$s).&lt;/</code><code class="xml keyword">string</code><code class="xml plain">&gt;</code></div><div class="line number13 index12 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">string</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"gcm_recoverable_error"</code><code class="xml plain">&gt;From GCM: recoverable error (%1$s).&lt;/</code><code class="xml keyword">string</code><code class="xml plain">&gt;</code></div><div class="line number14 index13 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">string</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"gcm_deleted"</code><code class="xml plain">&gt;From GCM: server deleted %1$d pending messages!&lt;/</code><code class="xml keyword">string</code><code class="xml plain">&gt;</code></div><div class="line number15 index14 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">string</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"server_registering"</code><code class="xml plain">&gt;Trying (attempt %1$d/%2$d) to register device on Demo Server.&lt;/</code><code class="xml keyword">string</code><code class="xml plain">&gt;</code></div><div class="line number16 index15 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">string</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"server_registered"</code><code class="xml plain">&gt;From Demo Server: successfully added device!&lt;/</code><code class="xml keyword">string</code><code class="xml plain">&gt;</code></div><div class="line number17 index16 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">string</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"server_unregistered"</code><code class="xml plain">&gt;From Demo Server: successfully removed device!&lt;/</code><code class="xml keyword">string</code><code class="xml plain">&gt;</code></div><div class="line number18 index17 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">string</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"server_register_error"</code><code class="xml plain">&gt;Could not register device on Demo Server after %1$d attempts.&lt;/</code><code class="xml keyword">string</code><code class="xml plain">&gt;</code></div><div class="line number19 index18 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">string</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"server_unregister_error"</code><code class="xml plain">&gt;Could not unregister device on Demo Server (%1$s).&lt;/</code><code class="xml keyword">string</code><code class="xml plain">&gt;</code></div><div class="line number20 index19 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">string</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"options_register"</code><code class="xml plain">&gt;Register&lt;/</code><code class="xml keyword">string</code><code class="xml plain">&gt;</code></div><div class="line number21 index20 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">string</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"options_unregister"</code><code class="xml plain">&gt;Unregister&lt;/</code><code class="xml keyword">string</code><code class="xml plain">&gt;</code></div><div class="line number22 index21 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">string</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"options_clear"</code><code class="xml plain">&gt;Clear&lt;/</code><code class="xml keyword">string</code><code class="xml plain">&gt;</code></div><div class="line number23 index22 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">string</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"options_exit"</code><code class="xml plain">&gt;Exit&lt;/</code><code class="xml keyword">string</code><code class="xml plain">&gt;</code></div><div class="line number24 index23 alt1">&nbsp;</div><div class="line number25 index24 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">resources</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
<p><strong>4</strong>. Create a new class named <em>AlertDialogManager.java</em> and paste the following code. This class used to show alert dialog in your application.</p>
<div><div id="highlighter_897124" class="syntaxhighlighter nogutter  java"><table border="0" cellpadding="0" cellspacing="0"><caption>AlertDialogManager.java</caption><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">com.androidhive.pushnotifications;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">android.app.AlertDialog;</code></div><div class="line number4 index3 alt1"><code class="java keyword">import</code> <code class="java plain">android.content.Context;</code></div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">android.content.DialogInterface;</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">AlertDialogManager {</code></div><div class="line number8 index7 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">/**</code></div><div class="line number9 index8 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* Function to display simple Alert Dialog</code></div><div class="line number10 index9 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* @param context - application context</code></div><div class="line number11 index10 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* @param title - alert dialog title</code></div><div class="line number12 index11 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* @param message - alert message</code></div><div class="line number13 index12 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* @param status - success/failure (used to set icon)</code></div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - pass null if you don't want icon</code></div><div class="line number15 index14 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* */</code></div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">showAlertDialog(Context context, String title, String message,</code></div><div class="line number17 index16 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Boolean status) {</code></div><div class="line number18 index17 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">AlertDialog alertDialog = </code><code class="java keyword">new</code> <code class="java plain">AlertDialog.Builder(context).create();</code></div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Setting Dialog Title</code></div><div class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">alertDialog.setTitle(title);</code></div><div class="line number22 index21 alt1">&nbsp;</div><div class="line number23 index22 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Setting Dialog Message</code></div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">alertDialog.setMessage(message);</code></div><div class="line number25 index24 alt2">&nbsp;</div><div class="line number26 index25 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">if</code><code class="java plain">(status != </code><code class="java keyword">null</code><code class="java plain">)</code></div><div class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Setting alert dialog icon</code></div><div class="line number28 index27 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">alertDialog.setIcon((status) ? R.drawable.success : R.drawable.fail);</code></div><div class="line number29 index28 alt2">&nbsp;</div><div class="line number30 index29 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Setting OK Button</code></div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">alertDialog.setButton(</code><code class="java string">"OK"</code><code class="java plain">, </code><code class="java keyword">new</code> <code class="java plain">DialogInterface.OnClickListener() {</code></div><div class="line number32 index31 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">onClick(DialogInterface dialog, </code><code class="java keyword">int</code> <code class="java plain">which) {</code></div><div class="line number33 index32 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number34 index33 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">});</code></div><div class="line number35 index34 alt2">&nbsp;</div><div class="line number36 index35 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Showing Alert Message</code></div><div class="line number37 index36 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">alertDialog.show();</code></div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number39 index38 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
<p><strong>5</strong>. Create another class named <em>ConnectionDetector.java</em> This class used to detect internet connection status.</p>
<div><div id="highlighter_327685" class="syntaxhighlighter nogutter  java"><table border="0" cellpadding="0" cellspacing="0"><caption>ConnectionDetector.java</caption><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">com.androidhive.pushnotifications;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">android.content.Context;</code></div><div class="line number4 index3 alt1"><code class="java keyword">import</code> <code class="java plain">android.net.ConnectivityManager;</code></div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">android.net.NetworkInfo;</code></div><div class="line number6 index5 alt1"><code class="java spaces">&nbsp;</code>&nbsp;</div><div class="line number7 index6 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">ConnectionDetector {</code></div><div class="line number8 index7 alt1"><code class="java spaces">&nbsp;</code>&nbsp;</div><div class="line number9 index8 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java plain">Context _context;</code></div><div class="line number10 index9 alt1"><code class="java spaces">&nbsp;</code>&nbsp;</div><div class="line number11 index10 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java plain">ConnectionDetector(Context context){</code></div><div class="line number12 index11 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">._context = context;</code></div><div class="line number13 index12 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;</code>&nbsp;</div><div class="line number15 index14 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">/**</code></div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* Checking for all possible internet providers</code></div><div class="line number17 index16 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* **/</code></div><div class="line number18 index17 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">boolean</code> <code class="java plain">isConnectingToInternet(){</code></div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">ConnectivityManager connectivity = (ConnectivityManager) _context.getSystemService(Context.CONNECTIVITY_SERVICE);</code></div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">if</code> <code class="java plain">(connectivity != </code><code class="java keyword">null</code><code class="java plain">)</code></div><div class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{</code></div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">NetworkInfo[] info = connectivity.getAllNetworkInfo();</code></div><div class="line number23 index22 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">if</code> <code class="java plain">(info != </code><code class="java keyword">null</code><code class="java plain">)</code></div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">for</code> <code class="java plain">(</code><code class="java keyword">int</code> <code class="java plain">i = </code><code class="java value">0</code><code class="java plain">; i &lt; info.length; i++)</code></div><div class="line number25 index24 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">if</code> <code class="java plain">(info[i].getState() == NetworkInfo.State.CONNECTED)</code></div><div class="line number26 index25 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{</code></div><div class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java keyword">true</code><code class="java plain">;</code></div><div class="line number28 index27 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number29 index28 alt2"><code class="java spaces">&nbsp;</code>&nbsp;</div><div class="line number30 index29 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java keyword">false</code><code class="java plain">;</code></div><div class="line number32 index31 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number33 index32 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
<p><strong>6</strong>. Create class file called <em>CommonUtilities.java</em> and type the following code. This class   contains the GCM configuration and our server registration url.</p>
<p><em>SERVER_URL</em> – Your server user registration url<br>
<em>SENDER_ID</em> – Google project id</p>
<div><div id="highlighter_417015" class="syntaxhighlighter nogutter  java"><table border="0" cellpadding="0" cellspacing="0"><caption>CommonUtilities.java</caption><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">com.androidhive.pushnotifications;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">android.content.Context;</code></div><div class="line number4 index3 alt1"><code class="java keyword">import</code> <code class="java plain">android.content.Intent;</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="java keyword">public</code> <code class="java keyword">final</code> <code class="java keyword">class</code> <code class="java plain">CommonUtilities {</code></div><div class="line number7 index6 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number8 index7 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// give your server registration url here</code></div><div class="line number9 index8 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">static</code> <code class="java keyword">final</code> <code class="java plain">String SERVER_URL = </code><code class="java string">"<a href="http://10.0.2.2/gcm_server_php/register.php">http://10.0.2.2/gcm_server_php/register.php</a>"</code><code class="java plain">; </code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Google project id</code></div><div class="line number12 index11 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">static</code> <code class="java keyword">final</code> <code class="java plain">String SENDER_ID = </code><code class="java string">"903913289319"</code><code class="java plain">; </code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">/**</code></div><div class="line number15 index14 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* Tag used on log messages.</code></div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">*/</code></div><div class="line number17 index16 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">static</code> <code class="java keyword">final</code> <code class="java plain">String TAG = </code><code class="java string">"AndroidHive GCM"</code><code class="java plain">;</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">static</code> <code class="java keyword">final</code> <code class="java plain">String DISPLAY_MESSAGE_ACTION =</code></div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java string">"com.androidhive.pushnotifications.DISPLAY_MESSAGE"</code><code class="java plain">;</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">static</code> <code class="java keyword">final</code> <code class="java plain">String EXTRA_MESSAGE = </code><code class="java string">"message"</code><code class="java plain">;</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">/**</code></div><div class="line number25 index24 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* Notifies UI to display a message.</code></div><div class="line number26 index25 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* &lt;p&gt;</code></div><div class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* This method is defined in the common helper because it's used both by</code></div><div class="line number28 index27 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* the UI and the background service.</code></div><div class="line number29 index28 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">*</code></div><div class="line number30 index29 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* @param context application's context.</code></div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* @param message message to be displayed.</code></div><div class="line number32 index31 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">*/</code></div><div class="line number33 index32 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">displayMessage(Context context, String message) {</code></div><div class="line number34 index33 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Intent intent = </code><code class="java keyword">new</code> <code class="java plain">Intent(DISPLAY_MESSAGE_ACTION);</code></div><div class="line number35 index34 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">intent.putExtra(EXTRA_MESSAGE, message);</code></div><div class="line number36 index35 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">context.sendBroadcast(intent);</code></div><div class="line number37 index36 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number38 index37 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
<p><strong>7</strong>. Create a new class called <em>ServerUtilities.java</em> with following content. This class has following funtions</p>
<div><div id="highlighter_149640" class="syntaxhighlighter nogutter  java"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java comments">// function to register a user on our server(name, email, gcm reg id)</code></div><div class="line number2 index1 alt1"><code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">register()</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="java comments">// function to unregister the device</code></div><div class="line number5 index4 alt2"><code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">unregister()</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="java comments">// method to POST data to server</code></div><div class="line number8 index7 alt1"><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">post()</code></div></div></td></tr></tbody></table></div></div>
<div><div id="highlighter_426910" class="syntaxhighlighter nogutter  java"><table border="0" cellpadding="0" cellspacing="0"><caption>ServerUtilities.java</caption><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">com.androidhive.pushnotifications;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java keyword">static</code> <code class="java plain">com.androidhive.pushnotifications.CommonUtilities.SERVER_URL;</code></div><div class="line number4 index3 alt1"><code class="java keyword">import</code> <code class="java keyword">static</code> <code class="java plain">com.androidhive.pushnotifications.CommonUtilities.TAG;</code></div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java keyword">static</code> <code class="java plain">com.androidhive.pushnotifications.CommonUtilities.displayMessage;</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="java keyword">import</code> <code class="java plain">java.io.IOException;</code></div><div class="line number8 index7 alt1"><code class="java keyword">import</code> <code class="java plain">java.io.OutputStream;</code></div><div class="line number9 index8 alt2"><code class="java keyword">import</code> <code class="java plain">java.net.HttpURLConnection;</code></div><div class="line number10 index9 alt1"><code class="java keyword">import</code> <code class="java plain">java.net.MalformedURLException;</code></div><div class="line number11 index10 alt2"><code class="java keyword">import</code> <code class="java plain">java.net.URL;</code></div><div class="line number12 index11 alt1"><code class="java keyword">import</code> <code class="java plain">java.util.HashMap;</code></div><div class="line number13 index12 alt2"><code class="java keyword">import</code> <code class="java plain">java.util.Iterator;</code></div><div class="line number14 index13 alt1"><code class="java keyword">import</code> <code class="java plain">java.util.Map;</code></div><div class="line number15 index14 alt2"><code class="java keyword">import</code> <code class="java plain">java.util.Map.Entry;</code></div><div class="line number16 index15 alt1"><code class="java keyword">import</code> <code class="java plain">java.util.Random;</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="java keyword">import</code> <code class="java plain">android.content.Context;</code></div><div class="line number19 index18 alt2"><code class="java keyword">import</code> <code class="java plain">android.util.Log;</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="java keyword">import</code> <code class="java plain">com.google.android.gcm.GCMRegistrar;</code></div><div class="line number22 index21 alt1">&nbsp;</div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="java keyword">public</code> <code class="java keyword">final</code> <code class="java keyword">class</code> <code class="java plain">ServerUtilities {</code></div><div class="line number25 index24 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java keyword">final</code> <code class="java keyword">int</code> <code class="java plain">MAX_ATTEMPTS = </code><code class="java value">5</code><code class="java plain">;</code></div><div class="line number26 index25 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java keyword">final</code> <code class="java keyword">int</code> <code class="java plain">BACKOFF_MILLI_SECONDS = </code><code class="java value">2000</code><code class="java plain">;</code></div><div class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java keyword">final</code> <code class="java plain">Random random = </code><code class="java keyword">new</code> <code class="java plain">Random();</code></div><div class="line number28 index27 alt1">&nbsp;</div><div class="line number29 index28 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">/**</code></div><div class="line number30 index29 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* Register this account/device pair within the server.</code></div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">*</code></div><div class="line number32 index31 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">*/</code></div><div class="line number33 index32 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">register(</code><code class="java keyword">final</code> <code class="java plain">Context context, String name, String email, </code><code class="java keyword">final</code> <code class="java plain">String regId) {</code></div><div class="line number34 index33 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Log.i(TAG, </code><code class="java string">"registering device (regId = "</code> <code class="java plain">+ regId + </code><code class="java string">")"</code><code class="java plain">);</code></div><div class="line number35 index34 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String serverUrl = SERVER_URL;</code></div><div class="line number36 index35 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Map&lt;String, String&gt; params = </code><code class="java keyword">new</code> <code class="java plain">HashMap&lt;String, String&gt;();</code></div><div class="line number37 index36 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">params.put(</code><code class="java string">"regId"</code><code class="java plain">, regId);</code></div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">params.put(</code><code class="java string">"name"</code><code class="java plain">, name);</code></div><div class="line number39 index38 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">params.put(</code><code class="java string">"email"</code><code class="java plain">, email);</code></div><div class="line number40 index39 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number41 index40 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">long</code> <code class="java plain">backoff = BACKOFF_MILLI_SECONDS + random.nextInt(</code><code class="java value">1000</code><code class="java plain">);</code></div><div class="line number42 index41 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Once GCM returns a registration id, we need to register on our server</code></div><div class="line number43 index42 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// As the server might be down, we will retry it a couple</code></div><div class="line number44 index43 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// times.</code></div><div class="line number45 index44 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">for</code> <code class="java plain">(</code><code class="java keyword">int</code> <code class="java plain">i = </code><code class="java value">1</code><code class="java plain">; i &lt;= MAX_ATTEMPTS; i++) {</code></div><div class="line number46 index45 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Log.d(TAG, </code><code class="java string">"Attempt #"</code> <code class="java plain">+ i + </code><code class="java string">" to register"</code><code class="java plain">);</code></div><div class="line number47 index46 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number48 index47 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">displayMessage(context, context.getString(</code></div><div class="line number49 index48 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">R.string.server_registering, i, MAX_ATTEMPTS));</code></div><div class="line number50 index49 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">post(serverUrl, params);</code></div><div class="line number51 index50 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">GCMRegistrar.setRegisteredOnServer(context, </code><code class="java keyword">true</code><code class="java plain">);</code></div><div class="line number52 index51 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String message = context.getString(R.string.server_registered);</code></div><div class="line number53 index52 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">CommonUtilities.displayMessage(context, message);</code></div><div class="line number54 index53 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code><code class="java plain">;</code></div><div class="line number55 index54 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(IOException e) {</code></div><div class="line number56 index55 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Here we are simplifying and retrying on any error; in a real</code></div><div class="line number57 index56 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// application, it should retry only on unrecoverable errors</code></div><div class="line number58 index57 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// (like HTTP error code 503).</code></div><div class="line number59 index58 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Log.e(TAG, </code><code class="java string">"Failed to register on attempt "</code> <code class="java plain">+ i + </code><code class="java string">":"</code> <code class="java plain">+ e);</code></div><div class="line number60 index59 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">if</code> <code class="java plain">(i == MAX_ATTEMPTS) {</code></div><div class="line number61 index60 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">break</code><code class="java plain">;</code></div><div class="line number62 index61 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number63 index62 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number64 index63 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Log.d(TAG, </code><code class="java string">"Sleeping for "</code> <code class="java plain">+ backoff + </code><code class="java string">" ms before retry"</code><code class="java plain">);</code></div><div class="line number65 index64 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Thread.sleep(backoff);</code></div><div class="line number66 index65 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(InterruptedException e1) {</code></div><div class="line number67 index66 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Activity finished before we complete - exit.</code></div><div class="line number68 index67 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Log.d(TAG, </code><code class="java string">"Thread interrupted: abort remaining retries!"</code><code class="java plain">);</code></div><div class="line number69 index68 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Thread.currentThread().interrupt();</code></div><div class="line number70 index69 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code><code class="java plain">;</code></div><div class="line number71 index70 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number72 index71 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// increase backoff exponentially</code></div><div class="line number73 index72 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">backoff *= </code><code class="java value">2</code><code class="java plain">;</code></div><div class="line number74 index73 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number75 index74 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number76 index75 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String message = context.getString(R.string.server_register_error,</code></div><div class="line number77 index76 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">MAX_ATTEMPTS);</code></div><div class="line number78 index77 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">CommonUtilities.displayMessage(context, message);</code></div><div class="line number79 index78 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number80 index79 alt1">&nbsp;</div><div class="line number81 index80 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">/**</code></div><div class="line number82 index81 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* Unregister this account/device pair within the server.</code></div><div class="line number83 index82 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">*/</code></div><div class="line number84 index83 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">unregister(</code><code class="java keyword">final</code> <code class="java plain">Context context, </code><code class="java keyword">final</code> <code class="java plain">String regId) {</code></div><div class="line number85 index84 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Log.i(TAG, </code><code class="java string">"unregistering device (regId = "</code> <code class="java plain">+ regId + </code><code class="java string">")"</code><code class="java plain">);</code></div><div class="line number86 index85 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String serverUrl = SERVER_URL + </code><code class="java string">"/unregister"</code><code class="java plain">;</code></div><div class="line number87 index86 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Map&lt;String, String&gt; params = </code><code class="java keyword">new</code> <code class="java plain">HashMap&lt;String, String&gt;();</code></div><div class="line number88 index87 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">params.put(</code><code class="java string">"regId"</code><code class="java plain">, regId);</code></div><div class="line number89 index88 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number90 index89 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">post(serverUrl, params);</code></div><div class="line number91 index90 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">GCMRegistrar.setRegisteredOnServer(context, </code><code class="java keyword">false</code><code class="java plain">);</code></div><div class="line number92 index91 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String message = context.getString(R.string.server_unregistered);</code></div><div class="line number93 index92 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">CommonUtilities.displayMessage(context, message);</code></div><div class="line number94 index93 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(IOException e) {</code></div><div class="line number95 index94 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// At this point the device is unregistered from GCM, but still</code></div><div class="line number96 index95 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// registered in the server.</code></div><div class="line number97 index96 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// We could try to unregister again, but it is not necessary:</code></div><div class="line number98 index97 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// if the server tries to send a message to the device, it will get</code></div><div class="line number99 index98 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// a "NotRegistered" error message and should unregister the device.</code></div><div class="line number100 index99 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String message = context.getString(R.string.server_unregister_error,</code></div><div class="line number101 index100 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">e.getMessage());</code></div><div class="line number102 index101 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">CommonUtilities.displayMessage(context, message);</code></div><div class="line number103 index102 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number104 index103 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number105 index104 alt2">&nbsp;</div><div class="line number106 index105 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">/**</code></div><div class="line number107 index106 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* Issue a POST request to the server.</code></div><div class="line number108 index107 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">*</code></div><div class="line number109 index108 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* @param endpoint POST address.</code></div><div class="line number110 index109 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* @param params request parameters.</code></div><div class="line number111 index110 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">*</code></div><div class="line number112 index111 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* @throws IOException propagated from POST.</code></div><div class="line number113 index112 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">*/</code></div><div class="line number114 index113 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">post(String endpoint, Map&lt;String, String&gt; params)</code></div><div class="line number115 index114 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">throws</code> <code class="java plain">IOException {&nbsp;&nbsp;&nbsp; </code></div><div class="line number116 index115 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number117 index116 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">URL url;</code></div><div class="line number118 index117 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number119 index118 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">url = </code><code class="java keyword">new</code> <code class="java plain">URL(endpoint);</code></div><div class="line number120 index119 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(MalformedURLException e) {</code></div><div class="line number121 index120 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">throw</code> <code class="java keyword">new</code> <code class="java plain">IllegalArgumentException(</code><code class="java string">"invalid url: "</code> <code class="java plain">+ endpoint);</code></div><div class="line number122 index121 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number123 index122 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">StringBuilder bodyBuilder = </code><code class="java keyword">new</code> <code class="java plain">StringBuilder();</code></div><div class="line number124 index123 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Iterator&lt;Entry&lt;String, String&gt;&gt; iterator = params.entrySet().iterator();</code></div><div class="line number125 index124 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// constructs the POST body using the parameters</code></div><div class="line number126 index125 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">while</code> <code class="java plain">(iterator.hasNext()) {</code></div><div class="line number127 index126 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Entry&lt;String, String&gt; param = iterator.next();</code></div><div class="line number128 index127 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">bodyBuilder.append(param.getKey()).append(</code><code class="java string">'='</code><code class="java plain">)</code></div><div class="line number129 index128 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">.append(param.getValue());</code></div><div class="line number130 index129 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">if</code> <code class="java plain">(iterator.hasNext()) {</code></div><div class="line number131 index130 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">bodyBuilder.append(</code><code class="java string">'&amp;'</code><code class="java plain">);</code></div><div class="line number132 index131 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number133 index132 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number134 index133 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String body = bodyBuilder.toString();</code></div><div class="line number135 index134 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Log.v(TAG, </code><code class="java string">"Posting '"</code> <code class="java plain">+ body + </code><code class="java string">"' to "</code> <code class="java plain">+ url);</code></div><div class="line number136 index135 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">byte</code><code class="java plain">[] bytes = body.getBytes();</code></div><div class="line number137 index136 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">HttpURLConnection conn = </code><code class="java keyword">null</code><code class="java plain">;</code></div><div class="line number138 index137 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number139 index138 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Log.e(</code><code class="java string">"URL"</code><code class="java plain">, </code><code class="java string">"&gt; "</code> <code class="java plain">+ url);</code></div><div class="line number140 index139 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">conn = (HttpURLConnection) url.openConnection();</code></div><div class="line number141 index140 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">conn.setDoOutput(</code><code class="java keyword">true</code><code class="java plain">);</code></div><div class="line number142 index141 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">conn.setUseCaches(</code><code class="java keyword">false</code><code class="java plain">);</code></div><div class="line number143 index142 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">conn.setFixedLengthStreamingMode(bytes.length);</code></div><div class="line number144 index143 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">conn.setRequestMethod(</code><code class="java string">"POST"</code><code class="java plain">);</code></div><div class="line number145 index144 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">conn.setRequestProperty(</code><code class="java string">"Content-Type"</code><code class="java plain">,</code></div><div class="line number146 index145 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java string">"application/x-www-form-urlencoded;charset=UTF-8"</code><code class="java plain">);</code></div><div class="line number147 index146 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// post the request</code></div><div class="line number148 index147 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">OutputStream out = conn.getOutputStream();</code></div><div class="line number149 index148 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">out.write(bytes);</code></div><div class="line number150 index149 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">out.close();</code></div><div class="line number151 index150 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// handle the response</code></div><div class="line number152 index151 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">int</code> <code class="java plain">status = conn.getResponseCode();</code></div><div class="line number153 index152 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">if</code> <code class="java plain">(status != </code><code class="java value">200</code><code class="java plain">) {</code></div><div class="line number154 index153 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">throw</code> <code class="java keyword">new</code> <code class="java plain">IOException(</code><code class="java string">"Post failed with error code "</code> <code class="java plain">+ status);</code></div><div class="line number155 index154 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number156 index155 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">finally</code> <code class="java plain">{</code></div><div class="line number157 index156 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">if</code> <code class="java plain">(conn != </code><code class="java keyword">null</code><code class="java plain">) {</code></div><div class="line number158 index157 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">conn.disconnect();</code></div><div class="line number159 index158 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number160 index159 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number161 index160 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number162 index161 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
<p><strong>8</strong>. Add a new class file called <em>GCMIntentService.java</em> This class handles all GCM related services.</p>
<div><div id="highlighter_897796" class="syntaxhighlighter nogutter  java"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java comments">// method called once the device successfully registered with GCM</code></div><div class="line number2 index1 alt1"><code class="java keyword">protected</code> <code class="java keyword">void</code> <code class="java plain">onRegistered()</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="java comments">// called when a new message arrived to device</code></div><div class="line number5 index4 alt2"><code class="java keyword">protected</code> <code class="java keyword">void</code> <code class="java plain">onMessage()</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="java comments">// called when device is unregistered with GCM services</code></div><div class="line number8 index7 alt1"><code class="java keyword">protected</code> <code class="java keyword">void</code> <code class="java plain">onUnregistered()</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="java comments">// On receiving an error</code></div><div class="line number11 index10 alt2"><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">onError()</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="java comments">// method to generate a notification</code></div><div class="line number14 index13 alt1"><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">generateNotification()</code></div></div></td></tr></tbody></table></div></div>
<div><div id="highlighter_804964" class="syntaxhighlighter nogutter  java"><table border="0" cellpadding="0" cellspacing="0"><caption>GCMIntentService.java</caption><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">com.androidhive.pushnotifications;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">android.app.Notification;</code></div><div class="line number4 index3 alt1"><code class="java keyword">import</code> <code class="java plain">android.app.NotificationManager;</code></div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">android.app.PendingIntent;</code></div><div class="line number6 index5 alt1"><code class="java keyword">import</code> <code class="java plain">android.content.Context;</code></div><div class="line number7 index6 alt2"><code class="java keyword">import</code> <code class="java plain">android.content.Intent;</code></div><div class="line number8 index7 alt1"><code class="java keyword">import</code> <code class="java plain">android.util.Log;</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="java keyword">import</code> <code class="java plain">com.google.android.gcm.GCMBaseIntentService;</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="java keyword">import</code> <code class="java keyword">static</code> <code class="java plain">com.androidhive.pushnotifications.CommonUtilities.SENDER_ID;</code></div><div class="line number13 index12 alt2"><code class="java keyword">import</code> <code class="java keyword">static</code> <code class="java plain">com.androidhive.pushnotifications.CommonUtilities.displayMessage;</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">GCMIntentService </code><code class="java keyword">extends</code> <code class="java plain">GCMBaseIntentService {</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java keyword">final</code> <code class="java plain">String TAG = </code><code class="java string">"GCMIntentService"</code><code class="java plain">;</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java plain">GCMIntentService() {</code></div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">super</code><code class="java plain">(SENDER_ID);</code></div><div class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number22 index21 alt1">&nbsp;</div><div class="line number23 index22 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">/**</code></div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* Method called on device registered</code></div><div class="line number25 index24 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">**/</code></div><div class="line number26 index25 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java color1">@Override</code></div><div class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">protected</code> <code class="java keyword">void</code> <code class="java plain">onRegistered(Context context, String registrationId) {</code></div><div class="line number28 index27 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Log.i(TAG, </code><code class="java string">"Device registered: regId = "</code> <code class="java plain">+ registrationId);</code></div><div class="line number29 index28 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">displayMessage(context, </code><code class="java string">"Your device registred with GCM"</code><code class="java plain">);</code></div><div class="line number30 index29 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Log.d(</code><code class="java string">"NAME"</code><code class="java plain">, MainActivity.name);</code></div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">ServerUtilities.register(context, MainActivity.name, MainActivity.email, registrationId);</code></div><div class="line number32 index31 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number33 index32 alt2">&nbsp;</div><div class="line number34 index33 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">/**</code></div><div class="line number35 index34 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* Method called on device un registred</code></div><div class="line number36 index35 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* */</code></div><div class="line number37 index36 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java color1">@Override</code></div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">protected</code> <code class="java keyword">void</code> <code class="java plain">onUnregistered(Context context, String registrationId) {</code></div><div class="line number39 index38 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Log.i(TAG, </code><code class="java string">"Device unregistered"</code><code class="java plain">);</code></div><div class="line number40 index39 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">displayMessage(context, getString(R.string.gcm_unregistered));</code></div><div class="line number41 index40 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">ServerUtilities.unregister(context, registrationId);</code></div><div class="line number42 index41 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number43 index42 alt2">&nbsp;</div><div class="line number44 index43 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">/**</code></div><div class="line number45 index44 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* Method called on Receiving a new message</code></div><div class="line number46 index45 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* */</code></div><div class="line number47 index46 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java color1">@Override</code></div><div class="line number48 index47 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">protected</code> <code class="java keyword">void</code> <code class="java plain">onMessage(Context context, Intent intent) {</code></div><div class="line number49 index48 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Log.i(TAG, </code><code class="java string">"Received message"</code><code class="java plain">);</code></div><div class="line number50 index49 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String message = intent.getExtras().getString(</code><code class="java string">"price"</code><code class="java plain">);</code></div><div class="line number51 index50 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number52 index51 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">displayMessage(context, message);</code></div><div class="line number53 index52 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// notifies user</code></div><div class="line number54 index53 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">generateNotification(context, message);</code></div><div class="line number55 index54 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number56 index55 alt1">&nbsp;</div><div class="line number57 index56 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">/**</code></div><div class="line number58 index57 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* Method called on receiving a deleted message</code></div><div class="line number59 index58 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* */</code></div><div class="line number60 index59 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java color1">@Override</code></div><div class="line number61 index60 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">protected</code> <code class="java keyword">void</code> <code class="java plain">onDeletedMessages(Context context, </code><code class="java keyword">int</code> <code class="java plain">total) {</code></div><div class="line number62 index61 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Log.i(TAG, </code><code class="java string">"Received deleted messages notification"</code><code class="java plain">);</code></div><div class="line number63 index62 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String message = getString(R.string.gcm_deleted, total);</code></div><div class="line number64 index63 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">displayMessage(context, message);</code></div><div class="line number65 index64 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// notifies user</code></div><div class="line number66 index65 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">generateNotification(context, message);</code></div><div class="line number67 index66 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number68 index67 alt1">&nbsp;</div><div class="line number69 index68 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">/**</code></div><div class="line number70 index69 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* Method called on Error</code></div><div class="line number71 index70 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* */</code></div><div class="line number72 index71 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java color1">@Override</code></div><div class="line number73 index72 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">onError(Context context, String errorId) {</code></div><div class="line number74 index73 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Log.i(TAG, </code><code class="java string">"Received error: "</code> <code class="java plain">+ errorId);</code></div><div class="line number75 index74 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">displayMessage(context, getString(R.string.gcm_error, errorId));</code></div><div class="line number76 index75 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number77 index76 alt2">&nbsp;</div><div class="line number78 index77 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java color1">@Override</code></div><div class="line number79 index78 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">protected</code> <code class="java keyword">boolean</code> <code class="java plain">onRecoverableError(Context context, String errorId) {</code></div><div class="line number80 index79 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// log message</code></div><div class="line number81 index80 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Log.i(TAG, </code><code class="java string">"Received recoverable error: "</code> <code class="java plain">+ errorId);</code></div><div class="line number82 index81 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">displayMessage(context, getString(R.string.gcm_recoverable_error,</code></div><div class="line number83 index82 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">errorId));</code></div><div class="line number84 index83 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java keyword">super</code><code class="java plain">.onRecoverableError(context, errorId);</code></div><div class="line number85 index84 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number86 index85 alt1">&nbsp;</div><div class="line number87 index86 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">/**</code></div><div class="line number88 index87 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* Issues a notification to inform the user that server has sent a message.</code></div><div class="line number89 index88 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">*/</code></div><div class="line number90 index89 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">generateNotification(Context context, String message) {</code></div><div class="line number91 index90 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">int</code> <code class="java plain">icon = R.drawable.ic_launcher;</code></div><div class="line number92 index91 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">long</code> <code class="java plain">when = System.currentTimeMillis();</code></div><div class="line number93 index92 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">NotificationManager notificationManager = (NotificationManager)</code></div><div class="line number94 index93 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">context.getSystemService(Context.NOTIFICATION_SERVICE);</code></div><div class="line number95 index94 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Notification notification = </code><code class="java keyword">new</code> <code class="java plain">Notification(icon, message, when);</code></div><div class="line number96 index95 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number97 index96 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String title = context.getString(R.string.app_name);</code></div><div class="line number98 index97 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number99 index98 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Intent notificationIntent = </code><code class="java keyword">new</code> <code class="java plain">Intent(context, MainActivity.</code><code class="java keyword">class</code><code class="java plain">);</code></div><div class="line number100 index99 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// set intent so it does not start a new activity</code></div><div class="line number101 index100 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |</code></div><div class="line number102 index101 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Intent.FLAG_ACTIVITY_SINGLE_TOP);</code></div><div class="line number103 index102 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">PendingIntent intent =</code></div><div class="line number104 index103 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">PendingIntent.getActivity(context, </code><code class="java value">0</code><code class="java plain">, notificationIntent, </code><code class="java value">0</code><code class="java plain">);</code></div><div class="line number105 index104 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">notification.setLatestEventInfo(context, title, message, intent);</code></div><div class="line number106 index105 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">notification.flags |= Notification.FLAG_AUTO_CANCEL;</code></div><div class="line number107 index106 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number108 index107 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Play default notification sound</code></div><div class="line number109 index108 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">notification.defaults |= Notification.DEFAULT_SOUND;</code></div><div class="line number110 index109 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number111 index110 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Vibrate if vibrate is enabled</code></div><div class="line number112 index111 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">notification.defaults |= Notification.DEFAULT_VIBRATE;</code></div><div class="line number113 index112 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">notificationManager.notify(</code><code class="java value">0</code><code class="java plain">, notification);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number114 index113 alt1">&nbsp;</div><div class="line number115 index114 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number116 index115 alt1">&nbsp;</div><div class="line number117 index116 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
<p><strong>9</strong>. Here i am adding a registration screen where user
 can register using their details. To make this tutorial simple i am 
asking only name and email only. Once user registration is done the user
 details will be sent to our server where the user details will be 
stored in mysql database. </p>
<p>Create a new xml file called <em>activity_register.xml</em> under <em>res -&gt; layout</em> folder and paste the following code.</p>
<div><div id="highlighter_861263" class="syntaxhighlighter nogutter  xml"><table border="0" cellpadding="0" cellspacing="0"><caption>activity_register.xml</caption><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">LinearLayout</code> <code class="xml color1">xmlns:android</code><code class="xml plain">=</code><code class="xml string">"<a href="http://schemas.android.com/apk/res/android">http://schemas.android.com/apk/res/android</a>"</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:tools</code><code class="xml plain">=</code><code class="xml string">"<a href="http://schemas.android.com/tools">http://schemas.android.com/tools</a>"</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:layout_width</code><code class="xml plain">=</code><code class="xml string">"match_parent"</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:layout_height</code><code class="xml plain">=</code><code class="xml string">"match_parent"</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:orientation</code><code class="xml plain">=</code><code class="xml string">"vertical"</code> <code class="xml plain">&gt;&nbsp;&nbsp;&nbsp; </code></div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">TextView</code> <code class="xml color1">android:layout_width</code><code class="xml plain">=</code><code class="xml string">"fill_parent"</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:layout_height</code><code class="xml plain">=</code><code class="xml string">"wrap_content"</code></div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:text</code><code class="xml plain">=</code><code class="xml string">"Full Name:"</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:layout_marginLeft</code><code class="xml plain">=</code><code class="xml string">"10dip"</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:layout_marginRight</code><code class="xml plain">=</code><code class="xml string">"10dip"</code></div><div class="line number12 index11 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:layout_marginTop</code><code class="xml plain">=</code><code class="xml string">"20dip"</code><code class="xml plain">/&gt;</code></div><div class="line number13 index12 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number14 index13 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">EditText</code> <code class="xml color1">android:id</code><code class="xml plain">=</code><code class="xml string">"@+id/txtName"</code></div><div class="line number15 index14 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:layout_width</code><code class="xml plain">=</code><code class="xml string">"fill_parent"</code></div><div class="line number16 index15 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:layout_height</code><code class="xml plain">=</code><code class="xml string">"wrap_content"</code></div><div class="line number17 index16 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:layout_margin</code><code class="xml plain">=</code><code class="xml string">"10dip"</code></div><div class="line number18 index17 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:layout_marginBottom</code><code class="xml plain">=</code><code class="xml string">"20dip"</code><code class="xml plain">/&gt;</code></div><div class="line number19 index18 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number20 index19 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">TextView</code> <code class="xml color1">android:layout_width</code><code class="xml plain">=</code><code class="xml string">"fill_parent"</code></div><div class="line number21 index20 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:layout_height</code><code class="xml plain">=</code><code class="xml string">"wrap_content"</code></div><div class="line number22 index21 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:text</code><code class="xml plain">=</code><code class="xml string">"Email:"</code></div><div class="line number23 index22 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:layout_marginLeft</code><code class="xml plain">=</code><code class="xml string">"10dip"</code></div><div class="line number24 index23 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:layout_marginRight</code><code class="xml plain">=</code><code class="xml string">"10dip"</code><code class="xml plain">/&gt;</code></div><div class="line number25 index24 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number26 index25 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">EditText</code> <code class="xml color1">android:id</code><code class="xml plain">=</code><code class="xml string">"@+id/txtEmail"</code></div><div class="line number27 index26 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:layout_width</code><code class="xml plain">=</code><code class="xml string">"fill_parent"</code></div><div class="line number28 index27 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:layout_height</code><code class="xml plain">=</code><code class="xml string">"wrap_content"</code></div><div class="line number29 index28 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:layout_margin</code><code class="xml plain">=</code><code class="xml string">"10dip"</code></div><div class="line number30 index29 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:layout_marginBottom</code><code class="xml plain">=</code><code class="xml string">"20dip"</code><code class="xml plain">/&gt;</code></div><div class="line number31 index30 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number32 index31 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Button</code> <code class="xml color1">android:id</code><code class="xml plain">=</code><code class="xml string">"@+id/btnRegister"</code></div><div class="line number33 index32 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:layout_width</code><code class="xml plain">=</code><code class="xml string">"fill_parent"</code></div><div class="line number34 index33 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:layout_height</code><code class="xml plain">=</code><code class="xml string">"wrap_content"</code></div><div class="line number35 index34 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:text</code><code class="xml plain">=</code><code class="xml string">"Register"</code></div><div class="line number36 index35 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">android:layout_margin</code><code class="xml plain">=</code><code class="xml string">"10dip"</code><code class="xml plain">/&gt;</code></div><div class="line number37 index36 alt2">&nbsp;</div><div class="line number38 index37 alt1"><code class="xml plain">&lt;/</code><code class="xml keyword">LinearLayout</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
<p><strong>10</strong>. Create a new class called <em>RegisterActivity.java</em> This class will be used to handler user registration.</p>
<p>In the following code first internet status and gcm configuration is 
checked and once user presses the registration button user details will 
be send to <em>MainActivity.java</em> from there they will send to our server.</p>
<div><div id="highlighter_626588" class="syntaxhighlighter nogutter  java"><table border="0" cellpadding="0" cellspacing="0"><caption>RegisterActivity.java</caption><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">com.androidhive.pushnotifications;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java keyword">static</code> <code class="java plain">com.androidhive.pushnotifications.CommonUtilities.SENDER_ID;</code></div><div class="line number4 index3 alt1"><code class="java keyword">import</code> <code class="java keyword">static</code> <code class="java plain">com.androidhive.pushnotifications.CommonUtilities.SERVER_URL;</code></div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">android.app.Activity;</code></div><div class="line number6 index5 alt1"><code class="java keyword">import</code> <code class="java plain">android.content.Intent;</code></div><div class="line number7 index6 alt2"><code class="java keyword">import</code> <code class="java plain">android.os.Bundle;</code></div><div class="line number8 index7 alt1"><code class="java keyword">import</code> <code class="java plain">android.view.View;</code></div><div class="line number9 index8 alt2"><code class="java keyword">import</code> <code class="java plain">android.widget.Button;</code></div><div class="line number10 index9 alt1"><code class="java keyword">import</code> <code class="java plain">android.widget.EditText;</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">RegisterActivity </code><code class="java keyword">extends</code> <code class="java plain">Activity {</code></div><div class="line number13 index12 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// alert dialog manager</code></div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">AlertDialogManager alert = </code><code class="java keyword">new</code> <code class="java plain">AlertDialogManager();</code></div><div class="line number15 index14 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Internet detector</code></div><div class="line number17 index16 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">ConnectionDetector cd;</code></div><div class="line number18 index17 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// UI elements</code></div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">EditText txtName;</code></div><div class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">EditText txtEmail;</code></div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number23 index22 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Register button</code></div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Button btnRegister;</code></div><div class="line number25 index24 alt2">&nbsp;</div><div class="line number26 index25 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java color1">@Override</code></div><div class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">onCreate(Bundle savedInstanceState) {</code></div><div class="line number28 index27 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">super</code><code class="java plain">.onCreate(savedInstanceState);</code></div><div class="line number29 index28 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">setContentView(R.layout.activity_register);</code></div><div class="line number30 index29 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">cd = </code><code class="java keyword">new</code> <code class="java plain">ConnectionDetector(getApplicationContext());</code></div><div class="line number32 index31 alt1">&nbsp;</div><div class="line number33 index32 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Check if Internet present</code></div><div class="line number34 index33 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">if</code> <code class="java plain">(!cd.isConnectingToInternet()) {</code></div><div class="line number35 index34 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Internet Connection is not present</code></div><div class="line number36 index35 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">alert.showAlertDialog(RegisterActivity.</code><code class="java keyword">this</code><code class="java plain">,</code></div><div class="line number37 index36 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java string">"Internet Connection Error"</code><code class="java plain">,</code></div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java string">"Please connect to working Internet connection"</code><code class="java plain">, </code><code class="java keyword">false</code><code class="java plain">);</code></div><div class="line number39 index38 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// stop executing code by return</code></div><div class="line number40 index39 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code><code class="java plain">;</code></div><div class="line number41 index40 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number42 index41 alt1">&nbsp;</div><div class="line number43 index42 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Check if GCM configuration is set</code></div><div class="line number44 index43 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">if</code> <code class="java plain">(SERVER_URL == </code><code class="java keyword">null</code> <code class="java plain">|| SENDER_ID == </code><code class="java keyword">null</code> <code class="java plain">|| SERVER_URL.length() == </code><code class="java value">0</code></div><div class="line number45 index44 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">|| SENDER_ID.length() == </code><code class="java value">0</code><code class="java plain">) {</code></div><div class="line number46 index45 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// GCM sernder id / server url is missing</code></div><div class="line number47 index46 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">alert.showAlertDialog(RegisterActivity.</code><code class="java keyword">this</code><code class="java plain">, </code><code class="java string">"Configuration Error!"</code><code class="java plain">,</code></div><div class="line number48 index47 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java string">"Please set your Server URL and GCM Sender ID"</code><code class="java plain">, </code><code class="java keyword">false</code><code class="java plain">);</code></div><div class="line number49 index48 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// stop executing code by return</code></div><div class="line number50 index49 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code><code class="java plain">;</code></div><div class="line number51 index50 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number52 index51 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number53 index52 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">txtName = (EditText) findViewById(R.id.txtName);</code></div><div class="line number54 index53 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">txtEmail = (EditText) findViewById(R.id.txtEmail);</code></div><div class="line number55 index54 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">btnRegister = (Button) findViewById(R.id.btnRegister);</code></div><div class="line number56 index55 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number57 index56 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">/*</code></div><div class="line number58 index57 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">* Click event on Register button</code></div><div class="line number59 index58 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">* */</code></div><div class="line number60 index59 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">btnRegister.setOnClickListener(</code><code class="java keyword">new</code> <code class="java plain">View.OnClickListener() {</code></div><div class="line number61 index60 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number62 index61 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java color1">@Override</code></div><div class="line number63 index62 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">onClick(View arg0) {</code></div><div class="line number64 index63 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Read EditText dat</code></div><div class="line number65 index64 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String name = txtName.getText().toString();</code></div><div class="line number66 index65 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String email = txtEmail.getText().toString();</code></div><div class="line number67 index66 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number68 index67 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Check if user filled the form</code></div><div class="line number69 index68 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">if</code><code class="java plain">(name.trim().length() &gt; </code><code class="java value">0</code> <code class="java plain">&amp;&amp; email.trim().length() &gt; </code><code class="java value">0</code><code class="java plain">){</code></div><div class="line number70 index69 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Launch Main Activity</code></div><div class="line number71 index70 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Intent i = </code><code class="java keyword">new</code> <code class="java plain">Intent(getApplicationContext(), MainActivity.</code><code class="java keyword">class</code><code class="java plain">);</code></div><div class="line number72 index71 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number73 index72 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">//
 Registering user on our 
server&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 </code></div><div class="line number74 index73 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Sending registraiton details to MainActivity</code></div><div class="line number75 index74 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">i.putExtra(</code><code class="java string">"name"</code><code class="java plain">, name);</code></div><div class="line number76 index75 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">i.putExtra(</code><code class="java string">"email"</code><code class="java plain">, email);</code></div><div class="line number77 index76 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">startActivity(i);</code></div><div class="line number78 index77 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">finish();</code></div><div class="line number79 index78 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code><code class="java keyword">else</code><code class="java plain">{</code></div><div class="line number80 index79 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// user doen't filled that data</code></div><div class="line number81 index80 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// ask him to fill the form</code></div><div class="line number82 index81 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">alert.showAlertDialog(RegisterActivity.</code><code class="java keyword">this</code><code class="java plain">, </code><code class="java string">"Registration Error!"</code><code class="java plain">, </code><code class="java string">"Please enter your details"</code><code class="java plain">, </code><code class="java keyword">false</code><code class="java plain">);</code></div><div class="line number83 index82 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number84 index83 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number85 index84 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">});</code></div><div class="line number86 index85 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number87 index86 alt2">&nbsp;</div><div class="line number88 index87 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
<div class="image">
<img src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/android_gcm_device_registration.png" alt="android device gcm registration" title="android device gcm registration" class="alignnone size-full wp-image-2371" height="auto" width="720px">
</div>
<p><strong>11</strong>. Now open your main activity file (In my case <em>MainActivity.java</em>) and type the following code.<br>
In the following code<br>
I am receiving name, email sent from RegisterActivity and storing them in static variables.</p>
<p>Then i am checking whether this device has gcm registration id, if not i am registering it on gcm by calling <em>GCMRegistrar.register(this, SENDER_ID)</em> method</p>
<p><em>private final BroadcastReceiver mHandleMessageReceiver = new BroadcastReceiver()</em>
 method will be called when device gets a new push notification message.
 For now i am displaying the message on the screen. You might need to 
take appropriate action on the message depending upon your app 
requirement. (Example: Storing it in SQLite database)</p>
<div><div id="highlighter_904748" class="syntaxhighlighter nogutter  java"><table border="0" cellpadding="0" cellspacing="0"><caption>MainActivity.java</caption><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">com.androidhive.pushnotifications;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java keyword">static</code> <code class="java plain">com.androidhive.pushnotifications.CommonUtilities.DISPLAY_MESSAGE_ACTION;</code></div><div class="line number4 index3 alt1"><code class="java keyword">import</code> <code class="java keyword">static</code> <code class="java plain">com.androidhive.pushnotifications.CommonUtilities.EXTRA_MESSAGE;</code></div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java keyword">static</code> <code class="java plain">com.androidhive.pushnotifications.CommonUtilities.SENDER_ID;</code></div><div class="line number6 index5 alt1"><code class="java keyword">import</code> <code class="java plain">android.app.Activity;</code></div><div class="line number7 index6 alt2"><code class="java keyword">import</code> <code class="java plain">android.content.BroadcastReceiver;</code></div><div class="line number8 index7 alt1"><code class="java keyword">import</code> <code class="java plain">android.content.Context;</code></div><div class="line number9 index8 alt2"><code class="java keyword">import</code> <code class="java plain">android.content.Intent;</code></div><div class="line number10 index9 alt1"><code class="java keyword">import</code> <code class="java plain">android.content.IntentFilter;</code></div><div class="line number11 index10 alt2"><code class="java keyword">import</code> <code class="java plain">android.os.AsyncTask;</code></div><div class="line number12 index11 alt1"><code class="java keyword">import</code> <code class="java plain">android.os.Bundle;</code></div><div class="line number13 index12 alt2"><code class="java keyword">import</code> <code class="java plain">android.util.Log;</code></div><div class="line number14 index13 alt1"><code class="java keyword">import</code> <code class="java plain">android.widget.TextView;</code></div><div class="line number15 index14 alt2"><code class="java keyword">import</code> <code class="java plain">android.widget.Toast;</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="java keyword">import</code> <code class="java plain">com.google.android.gcm.GCMRegistrar;</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">MainActivity </code><code class="java keyword">extends</code> <code class="java plain">Activity {</code></div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// label to display gcm messages</code></div><div class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">TextView lblMessage;</code></div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number23 index22 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Asyntask</code></div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">AsyncTask&lt;Void, Void, Void&gt; mRegisterTask;</code></div><div class="line number25 index24 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number26 index25 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Alert dialog manager</code></div><div class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">AlertDialogManager alert = </code><code class="java keyword">new</code> <code class="java plain">AlertDialogManager();</code></div><div class="line number28 index27 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number29 index28 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Connection detector</code></div><div class="line number30 index29 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">ConnectionDetector cd;</code></div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number32 index31 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java plain">String name;</code></div><div class="line number33 index32 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java plain">String email;</code></div><div class="line number34 index33 alt1">&nbsp;</div><div class="line number35 index34 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java color1">@Override</code></div><div class="line number36 index35 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">onCreate(Bundle savedInstanceState) {</code></div><div class="line number37 index36 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">super</code><code class="java plain">.onCreate(savedInstanceState);</code></div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">setContentView(R.layout.activity_main);</code></div><div class="line number39 index38 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number40 index39 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">cd = </code><code class="java keyword">new</code> <code class="java plain">ConnectionDetector(getApplicationContext());</code></div><div class="line number41 index40 alt2">&nbsp;</div><div class="line number42 index41 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Check if Internet present</code></div><div class="line number43 index42 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">if</code> <code class="java plain">(!cd.isConnectingToInternet()) {</code></div><div class="line number44 index43 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Internet Connection is not present</code></div><div class="line number45 index44 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">alert.showAlertDialog(MainActivity.</code><code class="java keyword">this</code><code class="java plain">,</code></div><div class="line number46 index45 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java string">"Internet Connection Error"</code><code class="java plain">,</code></div><div class="line number47 index46 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java string">"Please connect to working Internet connection"</code><code class="java plain">, </code><code class="java keyword">false</code><code class="java plain">);</code></div><div class="line number48 index47 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// stop executing code by return</code></div><div class="line number49 index48 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code><code class="java plain">;</code></div><div class="line number50 index49 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number51 index50 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number52 index51 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Getting name, email from intent</code></div><div class="line number53 index52 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Intent i = getIntent();</code></div><div class="line number54 index53 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number55 index54 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">name = i.getStringExtra(</code><code class="java string">"name"</code><code class="java plain">);</code></div><div class="line number56 index55 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">email = i.getStringExtra(</code><code class="java string">"email"</code><code class="java plain">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number57 index56 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number58 index57 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Make sure the device has the proper dependencies.</code></div><div class="line number59 index58 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">GCMRegistrar.checkDevice(</code><code class="java keyword">this</code><code class="java plain">);</code></div><div class="line number60 index59 alt1">&nbsp;</div><div class="line number61 index60 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Make sure the manifest was properly set - comment out this line</code></div><div class="line number62 index61 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// while developing the app, then uncomment it when it's ready.</code></div><div class="line number63 index62 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">GCMRegistrar.checkManifest(</code><code class="java keyword">this</code><code class="java plain">);</code></div><div class="line number64 index63 alt1">&nbsp;</div><div class="line number65 index64 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">lblMessage = (TextView) findViewById(R.id.lblMessage);</code></div><div class="line number66 index65 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number67 index66 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">registerReceiver(mHandleMessageReceiver, </code><code class="java keyword">new</code> <code class="java plain">IntentFilter(</code></div><div class="line number68 index67 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">DISPLAY_MESSAGE_ACTION));</code></div><div class="line number69 index68 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number70 index69 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Get GCM registration id</code></div><div class="line number71 index70 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">final</code> <code class="java plain">String regId = GCMRegistrar.getRegistrationId(</code><code class="java keyword">this</code><code class="java plain">);</code></div><div class="line number72 index71 alt1">&nbsp;</div><div class="line number73 index72 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Check if regid already presents</code></div><div class="line number74 index73 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">if</code> <code class="java plain">(regId.equals(</code><code class="java string">""</code><code class="java plain">)) {</code></div><div class="line number75 index74 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Registration is not present, register now with GCM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number76 index75 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">GCMRegistrar.register(</code><code class="java keyword">this</code><code class="java plain">, SENDER_ID);</code></div><div class="line number77 index76 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">else</code> <code class="java plain">{</code></div><div class="line number78 index77 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Device is already registered on GCM</code></div><div class="line number79 index78 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">if</code> <code class="java plain">(GCMRegistrar.isRegisteredOnServer(</code><code class="java keyword">this</code><code class="java plain">)) {</code></div><div class="line number80 index79 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Skips registration.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number81 index80 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Toast.makeText(getApplicationContext(), </code><code class="java string">"Already registered with GCM"</code><code class="java plain">, Toast.LENGTH_LONG).show();</code></div><div class="line number82 index81 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">else</code> <code class="java plain">{</code></div><div class="line number83 index82 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Try to register again, but not in the UI thread.</code></div><div class="line number84 index83 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// It's also necessary to cancel the thread onDestroy(),</code></div><div class="line number85 index84 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// hence the use of AsyncTask instead of a raw thread.</code></div><div class="line number86 index85 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">final</code> <code class="java plain">Context context = </code><code class="java keyword">this</code><code class="java plain">;</code></div><div class="line number87 index86 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">mRegisterTask = </code><code class="java keyword">new</code> <code class="java plain">AsyncTask&lt;Void, Void, Void&gt;() {</code></div><div class="line number88 index87 alt1">&nbsp;</div><div class="line number89 index88 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java color1">@Override</code></div><div class="line number90 index89 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">protected</code> <code class="java plain">Void doInBackground(Void... params) {</code></div><div class="line number91 index90 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Register on our server</code></div><div class="line number92 index91 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// On server creates a new user</code></div><div class="line number93 index92 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">ServerUtilities.register(context, name, email, regId);</code></div><div class="line number94 index93 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java keyword">null</code><code class="java plain">;</code></div><div class="line number95 index94 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number96 index95 alt1">&nbsp;</div><div class="line number97 index96 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java color1">@Override</code></div><div class="line number98 index97 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">protected</code> <code class="java keyword">void</code> <code class="java plain">onPostExecute(Void result) {</code></div><div class="line number99 index98 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">mRegisterTask = </code><code class="java keyword">null</code><code class="java plain">;</code></div><div class="line number100 index99 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number101 index100 alt2">&nbsp;</div><div class="line number102 index101 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">};</code></div><div class="line number103 index102 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">mRegisterTask.execute(</code><code class="java keyword">null</code><code class="java plain">, </code><code class="java keyword">null</code><code class="java plain">, </code><code class="java keyword">null</code><code class="java plain">);</code></div><div class="line number104 index103 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number105 index104 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number106 index105 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number107 index106 alt2">&nbsp;</div><div class="line number108 index107 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">/**</code></div><div class="line number109 index108 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* Receiving push messages</code></div><div class="line number110 index109 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* */</code></div><div class="line number111 index110 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">final</code> <code class="java plain">BroadcastReceiver mHandleMessageReceiver = </code><code class="java keyword">new</code> <code class="java plain">BroadcastReceiver() {</code></div><div class="line number112 index111 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java color1">@Override</code></div><div class="line number113 index112 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">onReceive(Context context, Intent intent) {</code></div><div class="line number114 index113 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String newMessage = intent.getExtras().getString(EXTRA_MESSAGE);</code></div><div class="line number115 index114 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Waking up mobile if it is sleeping</code></div><div class="line number116 index115 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">WakeLocker.acquire(getApplicationContext());</code></div><div class="line number117 index116 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number118 index117 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">/**</code></div><div class="line number119 index118 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* Take appropriate action on this message</code></div><div class="line number120 index119 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* depending upon your app requirement</code></div><div class="line number121 index120 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* For now i am just displaying it on the screen</code></div><div class="line number122 index121 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java preprocessor">* */</code></div><div class="line number123 index122 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number124 index123 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Showing received message</code></div><div class="line number125 index124 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">lblMessage.append(newMessage + </code><code class="java string">"\n"</code><code class="java plain">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number126 index125 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Toast.makeText(getApplicationContext(), </code><code class="java string">"New Message: "</code> <code class="java plain">+ newMessage, Toast.LENGTH_LONG).show();</code></div><div class="line number127 index126 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number128 index127 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Releasing wake lock</code></div><div class="line number129 index128 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">WakeLocker.release();</code></div><div class="line number130 index129 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number131 index130 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">};</code></div><div class="line number132 index131 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number133 index132 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java color1">@Override</code></div><div class="line number134 index133 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">protected</code> <code class="java keyword">void</code> <code class="java plain">onDestroy() {</code></div><div class="line number135 index134 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">if</code> <code class="java plain">(mRegisterTask != </code><code class="java keyword">null</code><code class="java plain">) {</code></div><div class="line number136 index135 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">mRegisterTask.cancel(</code><code class="java keyword">true</code><code class="java plain">);</code></div><div class="line number137 index136 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number138 index137 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number139 index138 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">unregisterReceiver(mHandleMessageReceiver);</code></div><div class="line number140 index139 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">GCMRegistrar.onDestroy(</code><code class="java keyword">this</code><code class="java plain">);</code></div><div class="line number141 index140 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Exception e) {</code></div><div class="line number142 index141 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Log.e(</code><code class="java string">"UnRegister Receiver Error"</code><code class="java plain">, </code><code class="java string">"&gt; "</code> <code class="java plain">+ e.getMessage());</code></div><div class="line number143 index142 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number144 index143 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">super</code><code class="java plain">.onDestroy();</code></div><div class="line number145 index144 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number146 index145 alt1">&nbsp;</div><div class="line number147 index146 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>Now we are done with our android project. Following are the enhancements to enhance the user experience.<br>
<br></p>
<h3>Playing custom notification sound</h3>
<p>If you want to play custom notification sound, copy your sound file 
in your project assets folder and write the following code in in <em>private static void generateNotification()</em> function which presents in <em>GCMIntentService.java</em> file.</p>
<div><div id="highlighter_29943" class="syntaxhighlighter nogutter  java"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java plain">notification.sound = Uri.parse(</code><code class="java string">"android.<a href="resource:///">resource://</a>"</code> <code class="java plain">+ context.getPackageName() + </code><code class="java string">"your_sound_file_name.mp3"</code><code class="java plain">);</code></div></div></td></tr></tbody></table></div></div>
<p><br></p>
<h3>Vibrating device on receiving new notification</h3>
<p>If you wan’t to vibrate the device on receiving a new notification add the following lines of code in <em>private static void generateNotification()</em> function which presents in <em>GCMIntentService.java</em> file. Also make sure that you added following permission in <em>AndroidManifest.xml</em> file</p>
<div><div id="highlighter_106665" class="syntaxhighlighter nogutter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">uses-permission</code> <code class="xml color1">android:name</code><code class="xml plain">=</code><code class="xml string">"android.permission.VIBRATE"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
<div><div id="highlighter_206795" class="syntaxhighlighter nogutter  java"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java comments">// Vibrate if vibrate is enabled</code></div><div class="line number2 index1 alt1"><code class="java plain">notification.defaults |= Notification.DEFAULT_VIBRATE;</code></div></div></td></tr></tbody></table></div></div>
<p><br></p>
<h3>Waking up device on receiving new notification</h3>
<p>You can also wake the device on receiving new notification if the 
device is sleeping. Add the following permission in your 
AndroidManifest.xml file</p>
<div><div id="highlighter_583070" class="syntaxhighlighter nogutter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">uses-permission</code> <code class="xml color1">android:name</code><code class="xml plain">=</code><code class="xml string">"android.permission.WAKE_LOCK"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
<p>Add a new class file named <em>WakeLocker.java</em> and paste the following code.</p>
<div><div id="highlighter_517942" class="syntaxhighlighter nogutter  java"><table border="0" cellpadding="0" cellspacing="0"><caption>WakeLocker.java</caption><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">com.androidhive.pushnotifications;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">android.content.Context;</code></div><div class="line number4 index3 alt1"><code class="java keyword">import</code> <code class="java plain">android.os.PowerManager;</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="java keyword">public</code> <code class="java keyword">abstract</code> <code class="java keyword">class</code> <code class="java plain">WakeLocker {</code></div><div class="line number7 index6 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java plain">PowerManager.WakeLock wakeLock;</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">acquire(Context context) {</code></div><div class="line number10 index9 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">if</code> <code class="java plain">(wakeLock != </code><code class="java keyword">null</code><code class="java plain">) wakeLock.release();</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);</code></div><div class="line number13 index12 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">wakeLock = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK |</code></div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">PowerManager.ACQUIRE_CAUSES_WAKEUP |</code></div><div class="line number15 index14 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">PowerManager.ON_AFTER_RELEASE, </code><code class="java string">"WakeLock"</code><code class="java plain">);</code></div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">wakeLock.acquire();</code></div><div class="line number17 index16 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">release() {</code></div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">if</code> <code class="java plain">(wakeLock != </code><code class="java keyword">null</code><code class="java plain">) wakeLock.release(); wakeLock = </code><code class="java keyword">null</code><code class="java plain">;</code></div><div class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number22 index21 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>and call the following lines code in <em>private final BroadcastReceiver mHandleMessageReceiver = new BroadcastReceiver()</em> presents in <em>MainActivity.java</em>.</p>
<div><div id="highlighter_893695" class="syntaxhighlighter nogutter  java"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java comments">// Waking up mobile if it is sleeping</code></div><div class="line number2 index1 alt1"><code class="java plain">WakeLocker.acquire(getApplicationContext());</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="java comments">// new message code here</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="java comments">// Releasing wake lock</code></div><div class="line number7 index6 alt2"><code class="java plain">WakeLocker.release();</code></div></div></td></tr></tbody></table></div></div>
<p>Run the project and i’ll be happy to solve the errors if you got any.</p>
<div style="display: none">
<img src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/banner_gcm.png" alt="android google cloud messaging" title="android google cloud messaging" class="alignnone size-full wp-image-2451" height="198" width="166">
</div>
	
            <label class="sharethis">Share this article on</label>
            <!--MFUNC           -->
            <ul id="social_big">
                <li class="first">
                    <script type="text/javascript">var dzone_url = 
'http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/';</script>
                    <script type="text/javascript">var dzone_title = 'Click to read Android Push Notifications using Google Cloud Messaging (GCM), PHP and MySQL';</script>                
                    <script type="text/javascript">var dzone_style = '1';</script>
                    <script language="javascript" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/zoneit.htm"></script>
                </li>
                <li><div fb-iframe-plugin-query="app_id=&amp;container_width=0&amp;href=http%3A%2F%2Fwww.androidhive.info%2F2012%2F10%2Fandroid-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql%2F&amp;layout=box_count&amp;locale=en_US&amp;sdk=joey&amp;send=false&amp;show_faces=false&amp;width=450" fb-xfbml-state="rendered" class="fb-like fb_iframe_widget" data-href="http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/" data-width="450" data-layout="box_count" data-show-faces="false" data-send="false"><span style="vertical-align: bottom; width: 49px; height: 61px;"><iframe class="" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/like.htm" style="border: medium none; visibility: visible; width: 49px; height: 61px;" title="fb:like Facebook Social Plugin" scrolling="no" allowfullscreen="true" allowtransparency="true" name="f1e6f18a0f52586" frameborder="0" height="1000px" width="450px"></iframe></span></div></li>
                <li><iframe style="position: static; visibility: visible; width: 56px; height: 60px;" data-twttr-rendered="true" title="Twitter Tweet Button" class="twitter-share-button twitter-tweet-button twitter-share-button twitter-count-vertical" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/tweet_button.htm" allowtransparency="true" scrolling="no" id="twitter-widget-0" frameborder="0"></iframe></li>
                <li><div id="___plusone_0" style="text-indent: 0px; margin: 0px; padding: 0px; background: transparent none repeat scroll 0% 0%; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 50px; height: 60px;"><iframe title="+1" data-gapiattached="true" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/fastbutton.htm" name="I2_1436300614424" id="I2_1436300614424" vspace="0" tabindex="0" style="position: static; top: 0px; width: 50px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 60px;" scrolling="no" marginwidth="0" marginheight="0" hspace="0" frameborder="0" width="100%"></iframe></div></li>            
                <script type="text/javascript" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/widgets.js"></script> 
                <div class="clear"></div>

            </ul>
            <!--/mfunc -->
            
<div class="wp_rp_wrap  wp_rp_vertical" id="wp_rp_first"><div class="wp_rp_content"><h3 class="related_post_title">You May Also Like</h3><ul class="related_post wp_rp"><li data-position="0" data-poid="in-1154" data-post-type="none"><a href="http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/" class="wp_rp_thumbnail"><img src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/android-login-and-registration-screen-design.jpg" class="attachment-150x150 wp-post-image" alt="android login and registration screen design" itemprop="image" height="75" width="150"></a><a href="http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/" class="wp_rp_title">Android Login and Registration with PHP, MySQL and SQLite</a></li><li data-position="1" data-poid="in-4134" data-post-type="none"><a href="http://www.androidhive.info/2014/01/how-to-create-rest-api-for-android-app-using-php-slim-and-mysql-day-12-2/" class="wp_rp_thumbnail"><img src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/Android-rest-api-banner13.jpg" class="attachment-150x150 wp-post-image" alt="android rest api php mysql slim" itemprop="image" height="49" width="150"></a><a href="http://www.androidhive.info/2014/01/how-to-create-rest-api-for-android-app-using-php-slim-and-mysql-day-12-2/" class="wp_rp_title">How to create REST API for Android app using PHP, Slim and MySQL – Day 1/2</a></li><li data-position="2" data-poid="in-31622" data-post-type="none"><a href="http://www.androidhive.info/2015/02/android-integrating-paypal-using-php-mysql-part-2/" class="wp_rp_thumbnail"><img src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/android-paypal-integration-php-mysql.jpg" class="attachment-150x150 wp-post-image" alt="android paypal integration php mysql" itemprop="image" height="75" width="150"></a><a href="http://www.androidhive.info/2015/02/android-integrating-paypal-using-php-mysql-part-2/" class="wp_rp_title">Android Integrating PayPal using PHP, MySQL – Part 2</a></li><li data-position="3" data-poid="in-33894" data-post-type="none"><a href="http://www.androidhive.info/2015/03/android-hosting-php-mysql-restful-services-to-digitalocean/" class="wp_rp_thumbnail"><img src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/digitalocean-deploying-android-php-mysql-restful-services.png" class="attachment-150x150 wp-post-image" alt="digitalocean deploying android php mysql restful services" itemprop="image" height="75" width="150"></a><a href="http://www.androidhive.info/2015/03/android-hosting-php-mysql-restful-services-to-digitalocean/" class="wp_rp_title">Android Hosting PHP, MySQL RESTful services to DigitalOcean</a></li></ul></div></div>
 
            <div class="clear"></div>
            <div id="disqus_thread" data-disqus-shortname="androidhive" data-disqus-url="http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/"></div>
        </div>

        		<footer class="entry-footer">
    <div class="entry-meta">
                        		

    </div><!-- .entry-meta -->
</footer>
	</div><!-- .entry-wrap -->
	
</article><!-- #post-## -->
	</main><!-- .content -->

	

	<aside class="sidebar sidebar-primary widget-area" role="complementary" itemscope="itemscope" itemtype="http://schema.org/WPSideBar">
	
		
		<section id="text-2" class="widget widget-1 even widget-first widget_text"><div class="widget-wrap">			<div class="textwidget"><div id="profile_new"><div class="profile_pic"></div><div class="profile_meta"> <span>Ravi Tamada</span> <span>Hyderabad, INDIA</span><ul><li class="f"><div class="hover"></div><a href="http://www.facebook.com/ravi8x" target="_blank" onclick="_gaq.push(['_trackEvent', 'Profile Sidebar', 'Click', 'Home | Facebook']);"></a></li><li class="t"><div class="hover"></div><a href="http://www.twitter.com/ravitamada" target="_blank" onclick="_gaq.push(['_trackEvent', 'Profile Sidebar', 'Click', 'Home | Twitter']);"></a></li><li class="g"><div class="hover"></div><a href="https://plus.google.com/u/0/108738908574182577919/posts" target="_blank" onclick="_gaq.push(['_trackEvent', 'Profile Sidebar', 'Click', 'Home | GPlus']);"></a></li><li class="l"><div class="hover"></div><a href="http://in.linkedin.com/pub/ravi-tamada/26/457/a12" target="_blank" onclick="_gaq.push(['_trackEvent', 'Profile Sidebar', 'Click', 'Home | Linkedin']);"></a></li><li class="i"><div class="hover"></div><a href="http://instagram.com/ravitamada" target="_blank" onclick="_gaq.push(['_trackEvent', 'Profile Sidebar', 'Click', 'Home | Instagram']);" title="Instagram"></a></li></ul></div><div class="clear"></div></div></div>
		</div></section><section id="text-3" class="widget widget-2 odd widget_text"><div class="widget-wrap">			<div class="textwidget"><div class="subscribe_sidebar"><div id="form_sub_hide"> <label class="tagline">Subscribe to get latest updates to your inbox. <br>-- I don’t spam!&nbsp;<img class="img_loader" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/loader.gif" alt="loader"></label><div class="form_container"><form id="form_subscribe" name="subscribe" method="get" action="http://download.androidhive.info/firewall/firewall.php" onsubmit="return false"> <input class="input_email" name="email" placeholder="Enter your email here" type="text"> <input name="flag" value="subscribe_from_site" type="hidden"> <input class="btn_subscribe" value="SUBSCRIBE" onclick="subscribeTo();" type="submit"><div class="clear"></div></form></div></div><div id="subscribe_response"> An email has been sent to your email address. Please verify your account</div><div id="subscribe_response_error"> Please enter valid email address</div></div></div>
		</div></section><section id="text-4" class="widget widget-3 even widget_text"><div class="widget-wrap">			<div class="textwidget"><label class="lbl_advertise_sidebar"><a href="http://buysellads.com/buy/detail/111048" target="_blank">Advertise</a></label>
    <div class="side_bar_ad">
<!-- BuySellAds Zone Code -->
<div data-serve="CWADE5T" id="bsap_1266299" class="bsap bsap_1266299">
<style type="text/css">
div.bsap_1266299{width:100%;display:block;}div.bsap_1266299 
a{width:125px;}div.bsap_1266299 a img{padding:0;}div.bsap_1266299 a 
em{font-style:normal;}div.bsap_1266299 
a{display:block;font-size:11px;color:#888;font-family:verdana,sans-serif;margin:0
 4px 10px 
0;text-align:center;text-decoration:none;overflow:hidden;float:left;}
div.bsap_1266299 img{border:0;clear:right;}
div.bsap_1266299 
a.adhere{color:#666;font-weight:bold;font-size:12px;border:1px solid 
#ccc;background:#e7e7e7;text-align:center;}
div.bsap_1266299 a.adhere:hover{border:1px solid 
#999;background:#ddd;color:#333;}
div.bsap_1266299 
iframe{display:block;font-size:11px;color:#888;font-family:verdana,sans-serif;margin:0
 4px 10px 
0;text-align:center;text-decoration:none;overflow:hidden;float:left;}div.bsap_1266299
 a{line-height:100%;}div.bsap_1266299 
a.adhere{width:125px;height:125px;line-height:1000%;}html>body 
div.bsap_1266299 a.adhere{width:123px;height:123px;}div.bsap_1266299 
img.s{height:0;width:0;}
</style>
<a href="http://srv.buysellads.com/ads/click/x/GTND423ICY7ITKQMCTB4YKQWCKSDCKJ7CAAD4Z3JCE7IKK7WFTSDT53KC6BDC2JLF6AI6K3EHJNCLSIZ" class="ad0 odd " title="50 % off RRP.. The Best Prices Online for Samsung Smartphones, Tablets &amp; Gadgets... Free Gifts With Every Purchase" id="bsa_5837851" target="_blank" rel="nofollow">
<img src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/272231-1433552982.jpg" alt="" height="125" width="125"></a><!-- no ad --><a href="http://srv.buysellads.com/ads/click/x/GTND423ICY7ITKQMCTB4YKQWCKSDCK7EC6SDPZ3JCE7IKK7WF67IL23KC6BDC2JLF6AI6K3EHJNCLSIZ" class="ad2  even" title="AppSuch.com" id="bsa_5824676" target="_blank" rel="nofollow">
<img src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/271750-1433251436.jpg" alt="" height="125" width="125"></a><a href="http://srv.buysellads.com/ads/click/x/GTND423ICY7ITKQMCTB4YKQWCKSD65QJFTSDLZ3JCE7IKK7JFTBILK7KC6BDC2JLF6AI6K3EHJNCLSIZ" class="ad3 odd " title="Hyperdrive 3D Future Combat Racing" id="bsa_4538565" target="_blank" rel="nofollow">
<img src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/214260-1395642705.png" alt="" height="125" width="125"></a>

<a href="http://buysellads.com/buy/detail/111048/zone/1266299?utm_source=site_111048&amp;utm_medium=website&amp;utm_campaign=imagetext&amp;utm_content=zone_1266299" class="adhere">Advertise Here</a>


<script class="ignoreme" id="auto_7" type="text/javascript"> if (typeof(BSACallback) !== 'undefined') BSACallback(); </script></div>
<!-- End BuySellAds Zone Code -->
</div>
<div class="separator"></div></div>
		</div></section><section id="text-5" class="widget widget-4 odd widget_text"><div class="widget-wrap">			<div class="textwidget"><div id="ad_center_300"> <a href="http://androidhive.info/reviews" target="_blank"><img src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/reviews_banner.jpg" alt="Androd app reviews"></a></div>
<div class="separator"></div></div>
		</div></section><section id="text-6" class="widget widget-5 even widget_text"><div class="widget-wrap">			<div class="textwidget"><div class="facebook_likebox">
        <div fb-iframe-plugin-query="app_id=&amp;container_width=340&amp;header=false&amp;href=https%3A%2F%2Fwww.facebook.com%2FAndroidHive&amp;locale=en_US&amp;sdk=joey&amp;show_border=false&amp;show_faces=true&amp;stream=false&amp;width=320" fb-xfbml-state="rendered" class="fb-like-box fb_iframe_widget" data-href="https://www.facebook.com/AndroidHive" data-width="320" data-show-faces="true" data-stream="false" data-show-border="false" data-header="false"><span style="vertical-align: bottom; width: 320px; height: 214px;"><iframe class="" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/like_box.htm" style="border: medium none; visibility: visible; width: 320px; height: 214px;" title="fb:like_box Facebook Social Plugin" scrolling="no" allowfullscreen="true" allowtransparency="true" name="f2829599df16f3a" frameborder="0" height="1000px" width="320px"></iframe></span></div>
    </div>
<div class="separator"></div></div>
		</div></section><section id="text-7" class="widget widget-6 odd widget_text"><div class="widget-wrap">			<div class="textwidget"><div class="tag_cloud">
        <label>Tag Cloud</label>
        <ul>
            <li><a href="http://www.androidhive.info/category/action-bar/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Action Bar']);">Action Bar</a></li><li><a href="http://www.androidhive.info/category/adapter/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Adapter']);">Adapter</a></li><li><a href="http://www.androidhive.info/category/animation/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Animation']);">Animation</a></li><li><a href="http://www.androidhive.info/category/api/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'API']);">API</a></li><li><a href="http://www.androidhive.info/category/apps/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Apps']);">Apps</a></li><li><a href="http://www.androidhive.info/category/async/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Async']);">Async</a></li><li><a href="http://www.androidhive.info/category/beginner/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Beginner']);">Beginner</a></li><li><a href="http://www.androidhive.info/category/camera/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Camera']);">Camera</a></li><li><a href="http://www.androidhive.info/category/chat/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Chat']);">Chat</a></li><li><a href="http://www.androidhive.info/category/dashboard/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Dashboard']);">Dashboard</a></li><li><a href="http://www.androidhive.info/category/database/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Database']);">Database</a></li><li><a href="http://www.androidhive.info/category/facebook/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'facebook']);">facebook</a></li><li><a href="http://www.androidhive.info/category/file-upload/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'File Upload']);">File Upload</a></li><li><a href="http://www.androidhive.info/category/fragments/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Fragments']);">Fragments</a></li><li><a href="http://www.androidhive.info/category/gcm/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'GCM']);">GCM</a></li><li><a href="http://www.androidhive.info/category/gdk/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'GDK']);">GDK</a></li><li><a href="http://www.androidhive.info/category/gestures/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Gestures']);">Gestures</a></li><li><a href="http://www.androidhive.info/category/google/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Google']);">Google</a></li><li><a href="http://www.androidhive.info/category/google-glass/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Google Glass']);">Google Glass</a></li><li><a href="http://www.androidhive.info/category/google-plus/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Google Plus']);">Google Plus</a></li><li><a href="http://www.androidhive.info/category/gps/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'GPS']);">GPS</a></li><li><a href="http://www.androidhive.info/category/grid/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Grid']);">Grid</a></li><li><a href="http://www.androidhive.info/category/grid-view/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Grid View']);">Grid View</a></li><li><a href="http://www.androidhive.info/category/http/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'HTTP']);">HTTP</a></li><li><a href="http://www.androidhive.info/category/intermediate/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Intermediate']);">Intermediate</a></li><li><a href="http://www.androidhive.info/category/json/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'json']);">json</a></li><li><a href="http://www.androidhive.info/category/libstreaming/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Libstreaming']);">Libstreaming</a></li><li><a href="http://www.androidhive.info/category/list-view/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'List View']);">List View</a></li><li><a href="http://www.androidhive.info/category/locale/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Locale']);">Locale</a></li><li><a href="http://www.androidhive.info/category/location/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Location']);">Location</a></li><li><a href="http://www.androidhive.info/category/maps/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Maps']);">Maps</a></li><li><a href="http://www.androidhive.info/category/material-design/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Material Design']);">Material Design</a></li><li><a href="http://www.androidhive.info/category/mysql/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'MySQL']);">MySQL</a></li><li><a href="http://www.androidhive.info/category/navigation-drawer/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Navigation Drawer']);">Navigation Drawer</a></li><li><a href="http://www.androidhive.info/category/paypal/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'PayPal']);">PayPal</a></li><li><a href="http://www.androidhive.info/category/php/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'PHP']);">PHP</a></li><li><a href="http://www.androidhive.info/category/pinch/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Pinch']);">Pinch</a></li><li><a href="http://www.androidhive.info/category/progress-bar/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Progress Bar']);">Progress Bar</a></li><li><a href="http://www.androidhive.info/category/push-notifications/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Push Notifications']);">Push Notifications</a></li><li><a href="http://www.androidhive.info/category/quick-tips/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Quick Tips']);">Quick Tips</a></li><li><a href="http://www.androidhive.info/category/recyclerview/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'RecyclerView']);">RecyclerView</a></li><li><a href="http://www.androidhive.info/category/rest/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'REST']);">REST</a></li><li><a href="http://www.androidhive.info/category/sessions/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'sessions']);">sessions</a></li><li><a href="http://www.androidhive.info/category/slim/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Slim']);">Slim</a></li><li><a href="http://www.androidhive.info/category/sockets/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Sockets']);">Sockets</a></li><li><a href="http://www.androidhive.info/category/speech-input/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Speech Input']);">Speech Input</a></li><li><a href="http://www.androidhive.info/category/spinner/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Spinner']);">Spinner</a></li><li><a href="http://www.androidhive.info/category/sponsored/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'sponsored']);">sponsored</a></li><li><a href="http://www.androidhive.info/category/sqlite/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'SQLite']);">SQLite</a></li><li><a href="http://www.androidhive.info/category/swipe/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Swipe']);">Swipe</a></li><li><a href="http://www.androidhive.info/category/tab-view/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Tab View']);">Tab View</a></li><li><a href="http://www.androidhive.info/category/twitter/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Twitter']);">Twitter</a></li><li><a href="http://www.androidhive.info/category/ui/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'UI']);">UI</a></li><li><a href="http://www.androidhive.info/category/video/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Video']);">Video</a></li><li><a href="http://www.androidhive.info/category/video-streaming/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Video Streaming']);">Video Streaming</a></li><li><a href="http://www.androidhive.info/category/view-pager/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'View Pager']);">View Pager</a></li><li><a href="http://www.androidhive.info/category/volley/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Volley']);">Volley</a></li><li><a href="http://www.androidhive.info/category/wearable/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'Wearable']);">Wearable</a></li><li><a href="http://www.androidhive.info/category/xml/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'xml']);">xml</a></li><li><a href="http://www.androidhive.info/category/youtube/" onclick="_gaq.push(['_trackEvent', 'Tags Cloud', 'Click', 'YouTube']);">YouTube</a></li>                    </ul>
        <div class="clear"></div>
    </div>
    <div class="separator"></div></div>
		</div></section><section id="text-8" class="widget widget-7 even widget_text"><div class="widget-wrap">			<div class="textwidget">    <div style="width:300px;margin:0 auto;">
        <!-- Place this tag where you want the widget to render. -->
        <div id="___person_0" style="text-indent: 0px; margin: 0px; padding: 0px; background: transparent none repeat scroll 0% 0%; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 300px; height: 353px;"><iframe title="+Badge" data-gapiattached="true" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/person.htm" name="I3_1436300614463" id="I3_1436300614463" vspace="0" tabindex="0" style="position: static; top: 0px; width: 300px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 353px;" scrolling="no" marginwidth="0" marginheight="0" hspace="0" frameborder="0" width="100%"></iframe></div>
    </div>
<div class="separator"></div></div>
		</div></section><section id="text-9" class="widget widget-8 odd widget-last widget_text"><div class="widget-wrap">			<div class="textwidget"><div class="mp_sidebar">
        <label>Most Popular</label>
        <ol class="mp">
            <li><a href="http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/" title="Android SQLite Database Tutorial">Android SQLite Database Tutorial - 1,110,349 views</a> </li><li><a href="http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/" title="How to connect Android with PHP, MySQL">How to connect Android with PHP, MySQL - 1,037,673 views</a> </li><li><a href="http://www.androidhive.info/2012/01/android-json-parsing-tutorial/" title="Android JSON Parsing Tutorial">Android JSON Parsing Tutorial - 930,084 views</a> </li><li><a href="http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/" title="Android Push Notifications using Google Cloud Messaging (GCM), PHP and MySQL">Android Push Notifications using Google Cloud Messaging (GCM), PHP and MySQL - 847,438 views</a> </li><li><a href="http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/" title="Android Custom ListView with Image and Text">Android Custom ListView with Image and Text - 820,999 views</a> </li><li><a href="http://www.androidhive.info/2013/11/android-sliding-menu-using-navigation-drawer/" title="Android Sliding Menu using Navigation Drawer">Android Sliding Menu using Navigation Drawer - 709,862 views</a> </li><li><a href="http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/" title="Android Login and Registration with PHP, MySQL and SQLite">Android Login and Registration with PHP, MySQL and SQLite - 674,663 views</a> </li><li><a href="http://www.androidhive.info/2012/07/android-gps-location-manager-tutorial/" title="Android GPS, Location Manager Tutorial">Android GPS, Location Manager Tutorial - 514,569 views</a> </li><li><a href="http://www.androidhive.info/2011/08/android-tab-layout-tutorial/" title="Android Tab Layout Tutorial">Android Tab Layout Tutorial - 503,380 views</a> </li><li><a href="http://www.androidhive.info/2013/10/android-tab-layout-with-swipeable-views-1/" title="Android Tab Layout with Swipeable Views">Android Tab Layout with Swipeable Views - 469,076 views</a> </li>        </ol>
    </div></div>
		</div></section>
		
  	</aside><!-- .sidebar -->

</div>
</div><!-- .site-inner -->

<footer id="footer" class="site-footer" role="contentinfo" itemscope="itemscope" itemtype="http://schema.org/WPFooter"><div class="wrap"><div class="footer-content footer-insert"><p class="copyright">Copyright © AndroidHive </p><p class="credit"> <a href="http://www.androidhive.info/advertise-with-us" onclick="_gaq.push(['_trackEvent', 'Footer Pages', 'Click', 'Advertise | Home Page']);">Advertise</a> . <a href="http://www.androidhive.info/privacy-policy" onclick="_gaq.push(['_trackEvent', 'Footer Pages', 'Click', 'Privacy Policy | Home Page']);">Privacy Policy</a> . <a href="http://www.androidhive.info/terms-of-service" onclick="_gaq.push(['_trackEvent', 'Footer Pages', 'Click', 'Terms of Service | Home Page']);">Terms &amp; Conditions</a></p></div></div></footer><!-- .site-footer -->
</div><!-- .site-container -->


<script type="text/javascript" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/shCore.js"></script>
<script type="text/javascript" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/shBrushXml.js"></script>
<script type="text/javascript" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/shBrushSql.js"></script>
<script type="text/javascript" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/shBrushPhp.js"></script>
<script type="text/javascript" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/shBrushJava.js"></script>
<script type="text/javascript">
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = 
"http://www.androidhive.info/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";

		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, 
document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = 
"http://www.androidhive.info/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9b";

		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		
//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);

		document.getElementsByTagName("head")[0].insertBefore( themecss, 
document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t 
configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<script type="text/javascript" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/comment-reply.js"></script>

<script type="text/javascript" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/widgets.js"></script> 
<script type="text/javascript">
    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id))
            return;
        js = d.createElement(s);
        js.id = id;
        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
    (function () {
        var po = document.createElement('script');
        po.type = 'text/javascript';
        po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(po, s);
    })();
</script>
<!-- BuySellAds Ad Code -->
<script type="text/javascript">
    (function () {
        var bsa = document.createElement('script');
        bsa.type = 'text/javascript';
        bsa.async = true;
        bsa.src = '//s3.buysellads.com/ac/bsa.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(bsa);
    })();
</script>
<!-- End BuySellAds Ad Code -->
<script async="" type="text/javascript" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/fancybar.js" id="_fancybar_js"></script><script src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/check_359604.js" type="text/javascript" async=""></script><iframe style="visibility: hidden; display: none;" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/container_002.htm"></iframe>


<iframe tabindex="-1" style="width: 1px; height: 1px; position: absolute; top: -100px;" src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/postmessageRelay.htm" id="oauth2relay802359818" name="oauth2relay802359818"></iframe><div class=" fb_reset" id="fb-root"><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/xRlIuTsSMoE.htm" style="border: medium none;" tabindex="-1" title="Facebook Cross Domain Communication Frame" aria-hidden="true" id="fb_xdm_frame_http" scrolling="no" allowfullscreen="true" allowtransparency="true" name="fb_xdm_frame_http" frameborder="0"></iframe><iframe src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/xRlIuTsSMoE_002.htm" style="border: medium none;" tabindex="-1" title="Facebook Cross Domain Communication Frame" aria-hidden="true" id="fb_xdm_frame_https" scrolling="no" allowfullscreen="true" allowtransparency="true" name="fb_xdm_frame_https" frameborder="0"></iframe></div></div><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div></div></div></div><iframe style="display: none; width: 0px; height: 0px;" name="google_osd_static_frame" id="google_osd_static_frame_8681316199772"></iframe><div class="fancybar_show" id="_fbn_C6ADVKE"><style type="text/css">.fancybar_hide
 ._fancybar{top:-100%;}.fancybar_show ._fancybar 
{top:0;}._fancybar{display:block;width:100%;float:left;position:fixed;top:-50px;left:0;right:0;z-index:100001;background-color:#505379;-webkit-transition:top
 700ms;-moz-transition:top 700ms;-o-transition:top 700ms;transition:top 
700ms;text-align:center;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;box-sizing:border-box;font-family:helvetica,arial,sans-serif;margin:0
 auto;box-shadow: 0 1px 5px 
rgba(0,0,0,.6);backface-visibility:hidden;}._fancybar a 
{display:block;position:relative;text-align:left;text-decoration:none;margin:0
 auto;float:left;width:100%;padding:10px 
5%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;box-sizing:border-box;}._fancybar
 a:hover {background:#505379;display: block;}._fancybar a .fancybar-cta 
{display:block;float:right;color:#ffffff;background-color:#ff5c63;border-radius:2px;line-height:28px;font-size:15px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0
 12px;}._fancybar a:hover .fancybar-cta 
{background:#ff5c63;color:#ffffff;}._fancybar a .fancybar-logo 
{display:block;float:left;padding:0;margin:-10px 0;}._fancybar a 
.fancybar-logo img {display:block;max-width:110px;}._fancybar a 
.fancybar-text {float:left;font-size:16px;line-height:16px;padding:8px 0
 0 15px;color:#ffffff;}._fancybar a:hover .fancybar-text 
{color:#ffffff;}@media all and (max-width: 680px){._fancybar a 
.fancybar-logo {margin:0 auto;display:block;min-width:100%;}._fancybar a
 .fancybar-logo img {max-width:110px;display:block;margin:0 
auto;}._fancybar a .fancybar-text 
{font-size:13px;line-height:13px;padding:10px 
0;text-align:center;width:100%;display:block;}._fancybar a .fancybar-cta
 
{display:block;float:left;width:100%;margin:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;box-sizing:border-box;text-align:center;}}._fancybar
 .fancybar-close{display: block;position: absolute;top: 11px;right: 
15px;padding: 5px 10px 7px;border-radius: 2px;color:#ffffff;z-index: 
2;font-size: 14px;line-height: 12px;}._fancybar 
.fancybar-close:hover{cursor: pointer;background:#505379;}</style><div class="_fancybar" id="_fancybar_div"><span class="fancybar-close" onclick="_fancybar.close('_fbn_C6ADVKE')">x</span><a href="http://srv.buysellads.com/ads/click/x/GTND423ICY7DL27WCWA4YKQWCKSDCKJUF6SDCZ3JCE7IKK7ICYAIV23KC6BDC2JLF6AI6K3EHJNCLSIZ?segment=placement:androidhive;" target="_blank"><span class="fancybar-logo"><img src="Android%20Push%20Notifications%20using%20Google%20Cloud%20Messaging%20%28GCM%29,%20PHP%20and%20MySQL_files/22134.png"></span><span class="fancybar-cta">See the latest news</span><span class="fancybar-text">WebdesignerNews.com - The best curated stories for Designers and Developers!</span></a></div></div></body></html>